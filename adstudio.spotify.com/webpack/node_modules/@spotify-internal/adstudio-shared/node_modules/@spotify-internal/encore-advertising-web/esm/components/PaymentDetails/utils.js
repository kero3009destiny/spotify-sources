import get from 'lodash/get';
import memoize from 'lodash/memoize';
import sum from 'lodash/sum';
import { CREDIT_CARD_CONFIG, DEFAULT_CARD_CONFIG } from './constants';
export const getCreditCardConfig = memoize((detail) => get(CREDIT_CARD_CONFIG, get(detail, 'paymentMethod', '').toLowerCase(), DEFAULT_CARD_CONFIG), detail => JSON.stringify(detail));
export const getFormattedCardNumber = memoize((detail) => {
    const { cardNumber = '' } = detail || {};
    const { format } = getCreditCardConfig(detail);
    if (!cardNumber) {
        return null;
    }
    const cardLength = sum(format);
    const visibleLength = cardNumber ? cardNumber.length : 0;
    const asterisksLength = cardLength - visibleLength;
    const spaceIndices = format.map((charCount, idx) => sum(format.slice(0, idx + 1)));
    return [...Array(cardLength)].reduce((str, _, idx) => {
        let result = str;
        if (idx < asterisksLength) {
            result += '*';
        }
        else {
            result += cardNumber[idx - asterisksLength];
        }
        if (idx + 1 < cardLength && spaceIndices.includes(idx + 1)) {
            result += ' ';
        }
        return result;
    }, '');
}, detail => JSON.stringify(detail));
//# sourceMappingURL=utils.js.map