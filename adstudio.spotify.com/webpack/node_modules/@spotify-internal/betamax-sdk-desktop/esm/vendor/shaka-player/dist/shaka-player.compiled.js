"use strict";
(function () {
    var innerGlobal = typeof window != "undefined" ? window : global;
    var exportTo = {};
    (function (window, global) {
        var n, aa = "function" == typeof Object.defineProperties ? Object.defineProperty : function (b, c, d) { b != Array.prototype && b != Object.prototype && (b[c] = d.value); }, ba = "undefined" != typeof window && window === this ? this : "undefined" != typeof global && null != global ? global : this;
        function ca() { ca = function () { }; ba.Symbol || (ba.Symbol = da); }
        var da = function () { var b = 0; return function (c) { return "jscomp_symbol_" + (c || "") + b++; }; }();
        function ea() { ca(); var b = ba.Symbol.iterator; b || (b = ba.Symbol.iterator = ba.Symbol("iterator")); "function" != typeof Array.prototype[b] && aa(Array.prototype, b, { configurable: !0, writable: !0, value: function () { return fa(this); } }); ea = function () { }; }
        function fa(b) { var c = 0; return ha(function () { return c < b.length ? { done: !1, value: b[c++] } : { done: !0 }; }); }
        function ha(b) { ea(); b = { next: b }; b[ba.Symbol.iterator] = function () { return this; }; return b; }
        function r(b) { ea(); var c = b[Symbol.iterator]; return c ? c.call(b) : fa(b); }
        function ja(b, c) { if (c) {
            for (var d = ba, e = b.split("."), f = 0; f < e.length - 1; f++) {
                var g = e[f];
                g in d || (d[g] = {});
                d = d[g];
            }
            e = e[e.length - 1];
            f = d[e];
            g = c(f);
            g != f && null != g && aa(d, e, { configurable: !0, writable: !0, value: g });
        } }
        ja("Promise", function (b) {
            function c(b) { this.b = 0; this.g = void 0; this.a = []; var c = this.c(); try {
                b(c.resolve, c.reject);
            }
            catch (l) {
                c.reject(l);
            } }
            function d() { this.a = null; }
            function e(b) { return b instanceof c ? b : new c(function (c) { c(b); }); }
            if (b)
                return b;
            d.prototype.b = function (b) { null == this.a && (this.a = [], this.f()); this.a.push(b); };
            d.prototype.f = function () { var b = this; this.c(function () { b.h(); }); };
            var f = ba.setTimeout;
            d.prototype.c = function (b) { f(b, 0); };
            d.prototype.h = function () {
                for (; this.a && this.a.length;) {
                    var b = this.a;
                    this.a =
                        [];
                    for (var c = 0; c < b.length; ++c) {
                        var d = b[c];
                        b[c] = null;
                        try {
                            d();
                        }
                        catch (m) {
                            this.g(m);
                        }
                    }
                }
                this.a = null;
            };
            d.prototype.g = function (b) { this.c(function () { throw b; }); };
            c.prototype.c = function () { function b(b) { return function (e) { d || (d = !0, b.call(c, e)); }; } var c = this, d = !1; return { resolve: b(this.s), reject: b(this.f) }; };
            c.prototype.s = function (b) {
                if (b === this)
                    this.f(new TypeError("A Promise cannot resolve to itself"));
                else if (b instanceof c)
                    this.u(b);
                else {
                    a: switch (typeof b) {
                        case "object":
                            var d = null != b;
                            break a;
                        case "function":
                            d = !0;
                            break a;
                        default: d = !1;
                    }
                    d ? this.m(b) : this.h(b);
                }
            };
            c.prototype.m = function (b) { var c = void 0; try {
                c = b.then;
            }
            catch (l) {
                this.f(l);
                return;
            } "function" == typeof c ? this.v(c, b) : this.h(b); };
            c.prototype.f = function (b) { this.i(2, b); };
            c.prototype.h = function (b) { this.i(1, b); };
            c.prototype.i = function (b, c) { if (0 != this.b)
                throw Error("Cannot settle(" + b + ", " + c + "): Promise already settled in state" + this.b); this.b = b; this.g = c; this.l(); };
            c.prototype.l = function () { if (null != this.a) {
                for (var b = 0; b < this.a.length; ++b)
                    g.b(this.a[b]);
                this.a = null;
            } };
            var g = new d;
            c.prototype.u = function (b) { var c = this.c(); b.nb(c.resolve, c.reject); };
            c.prototype.v = function (b, c) { var d = this.c(); try {
                b.call(c, d.resolve, d.reject);
            }
            catch (m) {
                d.reject(m);
            } };
            c.prototype.then = function (b, d) { function e(b, c) { return "function" == typeof b ? function (c) { try {
                f(b(c));
            }
            catch (z) {
                g(z);
            } } : c; } var f, g, h = new c(function (b, c) { f = b; g = c; }); this.nb(e(b, f), e(d, g)); return h; };
            c.prototype["catch"] = function (b) { return this.then(void 0, b); };
            c.prototype.nb = function (b, c) {
                function d() {
                    switch (e.b) {
                        case 1:
                            b(e.g);
                            break;
                        case 2:
                            c(e.g);
                            break;
                        default: throw Error("Unexpected state: " + e.b);
                    }
                }
                var e = this;
                null == this.a ? g.b(d) : this.a.push(d);
            };
            c.resolve = e;
            c.reject = function (b) { return new c(function (c, d) { d(b); }); };
            c.race = function (b) { return new c(function (c, d) { for (var f = r(b), g = f.next(); !g.done; g = f.next())
                e(g.value).nb(c, d); }); };
            c.all = function (b) {
                var d = r(b), f = d.next();
                return f.done ? e([]) : new c(function (b, c) {
                    function g(c) { return function (d) { h[c] = d; k--; 0 == k && b(h); }; }
                    var h = [], k = 0;
                    do
                        h.push(void 0), k++, e(f.value).nb(g(h.length - 1), c), f = d.next();
                    while (!f.done);
                });
            };
            return c;
        });
        ja("Promise.prototype.finally", function (b) { return b ? b : function (b) { return this.then(function (c) { return Promise.resolve(b()).then(function () { return c; }); }, function (c) { return Promise.resolve(b()).then(function () { throw c; }); }); }; });
        function ka(b) { function c(c) { return b.next(c); } function d(c) { return b["throw"](c); } return new Promise(function (e, f) { function g(b) { b.done ? e(b.value) : Promise.resolve(b.value).then(c, d).then(g, f); } g(b.next()); }); }
        function t(b) { return ka(b()); }
        var ma = "function" == typeof Object.create ? Object.create : function (b) { function c() { } c.prototype = b; return new c; }, na;
        if ("function" == typeof Object.setPrototypeOf)
            na = Object.setPrototypeOf;
        else {
            var oa;
            a: {
                var pa = { Pc: !0 }, qa = {};
                try {
                    qa.__proto__ = pa;
                    oa = qa.Pc;
                    break a;
                }
                catch (b) { }
                oa = !1;
            }
            na = oa ? function (b, c) { b.__proto__ = c; if (b.__proto__ !== c)
                throw new TypeError(b + " is not extensible"); return b; } : null;
        }
        var ra = na;
        function sa() { this.c = !1; this.a = null; this.w = void 0; this.j = 1; this.g = this.P = 0; this.b = null; }
        function ta(b) { if (b.c)
            throw new TypeError("Generator is already running"); b.c = !0; }
        sa.prototype.f = function (b) { this.w = b; };
        function ua(b, c) { b.b = { qc: c, yd: !0 }; b.j = b.P || b.g; }
        sa.prototype["return"] = function (b) { this.b = { "return": b }; this.j = this.g; };
        function u(b, c, d) { b.j = d; return { value: c }; }
        function x(b) { b.j = 0; }
        function va(b, c) { b.j = c; b.P = 0; }
        function ya(b) { b.P = 0; var c = b.b.qc; b.b = null; return c; }
        function za(b) { this.a = new sa; this.b = b; }
        function Aa(b, c) { ta(b.a); var d = b.a.a; if (d)
            return Ba(b, "return" in d ? d["return"] : function (b) { return { value: b, done: !0 }; }, c, b.a["return"]); b.a["return"](c); return Ca(b); }
        function Ba(b, c, d, e) { try {
            var f = c.call(b.a.a, d);
            if (!(f instanceof Object))
                throw new TypeError("Iterator result " + f + " is not an object");
            if (!f.done)
                return b.a.c = !1, f;
            var g = f.value;
        }
        catch (h) {
            return b.a.a = null, ua(b.a, h), Ca(b);
        } b.a.a = null; e.call(b.a, g); return Ca(b); }
        function Ca(b) { for (; b.a.j;)
            try {
                var c = b.b(b.a);
                if (c)
                    return b.a.c = !1, { value: c.value, done: !1 };
            }
            catch (d) {
                b.a.w = void 0, ua(b.a, d);
            } b.a.c = !1; if (b.a.b) {
            c = b.a.b;
            b.a.b = null;
            if (c.yd)
                throw c.qc;
            return { value: c["return"], done: !0 };
        } return { value: void 0, done: !0 }; }
        function Da(b) { this.next = function (c) { ta(b.a); b.a.a ? c = Ba(b, b.a.a.next, c, b.a.f) : (b.a.f(c), c = Ca(b)); return c; }; this["throw"] = function (c) { ta(b.a); b.a.a ? c = Ba(b, b.a.a["throw"], c, b.a.f) : (ua(b.a, c), c = Ca(b)); return c; }; this["return"] = function (c) { return Aa(b, c); }; ea(); this[Symbol.iterator] = function () { return this; }; }
        function y(b, c) { Da.prototype = b.prototype; return new Da(new za(c)); }
        function Ea(b, c) { return Object.prototype.hasOwnProperty.call(b, c); }
        ja("WeakMap", function (b) {
            function c(b) { this.a = (g += Math.random() + 1).toString(); if (b) {
                ca();
                ea();
                b = r(b);
                for (var c; !(c = b.next()).done;)
                    c = c.value, this.set(c[0], c[1]);
            } }
            function d(b) { Ea(b, f) || aa(b, f, { value: {} }); }
            function e(b) { var c = Object[b]; c && (Object[b] = function (b) { d(b); return c(b); }); }
            if (function () { if (!b || !Object.seal)
                return !1; try {
                var c = Object.seal({}), d = Object.seal({}), e = new b([[c, 2], [d, 3]]);
                if (2 != e.get(c) || 3 != e.get(d))
                    return !1;
                e["delete"](c);
                e.set(d, 4);
                return !e.has(c) && 4 == e.get(d);
            }
            catch (m) {
                return !1;
            } }())
                return b;
            var f = "$jscomp_hidden_" + Math.random();
            e("freeze");
            e("preventExtensions");
            e("seal");
            var g = 0;
            c.prototype.set = function (b, c) { d(b); if (!Ea(b, f))
                throw Error("WeakMap key fail: " + b); b[f][this.a] = c; return this; };
            c.prototype.get = function (b) { return Ea(b, f) ? b[f][this.a] : void 0; };
            c.prototype.has = function (b) { return Ea(b, f) && Ea(b[f], this.a); };
            c.prototype["delete"] = function (b) { return Ea(b, f) && Ea(b[f], this.a) ? delete b[f][this.a] : !1; };
            return c;
        });
        ja("Map", function (b) {
            function c() { var b = {}; return b.ja = b.next = b.head = b; }
            function d(b, c) { var d = b.a; return ha(function () { if (d) {
                for (; d.head != b.a;)
                    d = d.ja;
                for (; d.next != d.head;)
                    return d = d.next, { done: !1, value: c(d) };
                d = null;
            } return { done: !0, value: void 0 }; }); }
            function e(b, c) {
                var d = c && typeof c;
                "object" == d || "function" == d ? g.has(c) ? d = g.get(c) : (d = "" + ++h, g.set(c, d)) : d = "p_" + c;
                var e = b.b[d];
                if (e && Ea(b.b, d))
                    for (var f = 0; f < e.length; f++) {
                        var k = e[f];
                        if (c !== c && k.key !== k.key || c === k.key)
                            return { id: d, list: e, index: f, O: k };
                    }
                return { id: d,
                    list: e, index: -1, O: void 0 };
            }
            function f(b) { this.b = {}; this.a = c(); this.size = 0; if (b) {
                b = r(b);
                for (var d; !(d = b.next()).done;)
                    d = d.value, this.set(d[0], d[1]);
            } }
            if (function () {
                if (!b || "function" != typeof b || !b.prototype.entries || "function" != typeof Object.seal)
                    return !1;
                try {
                    var c = Object.seal({ x: 4 }), d = new b(r([[c, "s"]]));
                    if ("s" != d.get(c) || 1 != d.size || d.get({ x: 4 }) || d.set({ x: 4 }, "t") != d || 2 != d.size)
                        return !1;
                    var e = d.entries(), f = e.next();
                    if (f.done || f.value[0] != c || "s" != f.value[1])
                        return !1;
                    f = e.next();
                    return f.done || 4 != f.value[0].x ||
                        "t" != f.value[1] || !e.next().done ? !1 : !0;
                }
                catch (q) {
                    return !1;
                }
            }())
                return b;
            ca();
            ea();
            var g = new WeakMap;
            f.prototype.set = function (b, c) { var d = e(this, b); d.list || (d.list = this.b[d.id] = []); d.O ? d.O.value = c : (d.O = { next: this.a, ja: this.a.ja, head: this.a, key: b, value: c }, d.list.push(d.O), this.a.ja.next = d.O, this.a.ja = d.O, this.size++); return this; };
            f.prototype["delete"] = function (b) {
                b = e(this, b);
                return b.O && b.list ? (b.list.splice(b.index, 1), b.list.length || delete this.b[b.id], b.O.ja.next = b.O.next, b.O.next.ja = b.O.ja, b.O.head =
                    null, this.size--, !0) : !1;
            };
            f.prototype.clear = function () { this.b = {}; this.a = this.a.ja = c(); this.size = 0; };
            f.prototype.has = function (b) { return !!e(this, b).O; };
            f.prototype.get = function (b) { return (b = e(this, b).O) && b.value; };
            f.prototype.entries = function () { return d(this, function (b) { return [b.key, b.value]; }); };
            f.prototype.keys = function () { return d(this, function (b) { return b.key; }); };
            f.prototype.values = function () { return d(this, function (b) { return b.value; }); };
            f.prototype.forEach = function (b, c) {
                for (var d = this.entries(), e; !(e = d.next()).done;)
                    e =
                        e.value, b.call(c, e[1], e[0], this);
            };
            f.prototype[Symbol.iterator] = f.prototype.entries;
            var h = 0;
            return f;
        });
        ja("Set", function (b) {
            function c(b) { this.a = new Map; if (b) {
                b = r(b);
                for (var c; !(c = b.next()).done;)
                    this.add(c.value);
            } this.size = this.a.size; }
            if (function () {
                if (!b || "function" != typeof b || !b.prototype.entries || "function" != typeof Object.seal)
                    return !1;
                try {
                    var c = Object.seal({ x: 4 }), e = new b(r([c]));
                    if (!e.has(c) || 1 != e.size || e.add(c) != e || 1 != e.size || e.add({ x: 4 }) != e || 2 != e.size)
                        return !1;
                    var f = e.entries(), g = f.next();
                    if (g.done || g.value[0] != c || g.value[1] != c)
                        return !1;
                    g = f.next();
                    return g.done || g.value[0] == c || 4 != g.value[0].x ||
                        g.value[1] != g.value[0] ? !1 : f.next().done;
                }
                catch (h) {
                    return !1;
                }
            }())
                return b;
            ca();
            ea();
            c.prototype.add = function (b) { this.a.set(b, b); this.size = this.a.size; return this; };
            c.prototype["delete"] = function (b) { b = this.a["delete"](b); this.size = this.a.size; return b; };
            c.prototype.clear = function () { this.a.clear(); this.size = 0; };
            c.prototype.has = function (b) { return this.a.has(b); };
            c.prototype.entries = function () { return this.a.entries(); };
            c.prototype.values = function () { return this.a.values(); };
            c.prototype.keys = c.prototype.values;
            c.prototype[Symbol.iterator] = c.prototype.values;
            c.prototype.forEach = function (b, c) { var d = this; this.a.forEach(function (e) { return b.call(c, e, e, d); }); };
            return c;
        });
        function Fa(b, c) { ea(); b instanceof String && (b += ""); var d = 0, e = { next: function () { if (d < b.length) {
                var f = d++;
                return { value: c(f, b[f]), done: !1 };
            } e.next = function () { return { done: !0, value: void 0 }; }; return e.next(); } }; e[Symbol.iterator] = function () { return e; }; return e; }
        ja("Array.prototype.keys", function (b) { return b ? b : function () { return Fa(this, function (b) { return b; }); }; });
        ja("Object.is", function (b) { return b ? b : function (b, d) { return b === d ? 0 !== b || 1 / b === 1 / d : b !== b && d !== d; }; });
        ja("Array.prototype.includes", function (b) { return b ? b : function (b, d) { var c = this; c instanceof String && (c = String(c)); var f = c.length, g = d || 0; for (0 > g && (g = Math.max(g + f, 0)); g < f; g++) {
            var h = c[g];
            if (h === b || Object.is(h, b))
                return !0;
        } return !1; }; });
        function Ga(b, c, d) { if (null == b)
            throw new TypeError("The 'this' value for String.prototype." + d + " must not be null or undefined"); if (c instanceof RegExp)
            throw new TypeError("First argument to String.prototype." + d + " must not be a regular expression"); return b + ""; }
        ja("String.prototype.includes", function (b) { return b ? b : function (b, d) { return -1 !== Ga(this, b, "includes").indexOf(b, d || 0); }; });
        ja("Array.from", function (b) { return b ? b : function (b, d, e) { ea(); d = null != d ? d : function (b) { return b; }; var c = [], g = b[Symbol.iterator]; if ("function" == typeof g)
            for (b = g.call(b); !(g = b.next()).done;)
                c.push(d.call(e, g.value));
        else {
            g = b.length;
            for (var h = 0; h < g; h++)
                c.push(d.call(e, b[h]));
        } return c; }; });
        ja("String.prototype.startsWith", function (b) { return b ? b : function (b, d) { for (var c = Ga(this, b, "startsWith"), f = c.length, g = b.length, h = Math.max(0, Math.min(d | 0, c.length)), k = 0; k < g && h < f;)
            if (c[h++] != b[k++])
                return !1; return k >= g; }; });
        ja("Array.prototype.find", function (b) { return b ? b : function (b, d) { a: {
            var c = this;
            c instanceof String && (c = String(c));
            for (var f = c.length, g = 0; g < f; g++) {
                var h = c[g];
                if (b.call(d, h, g, c)) {
                    c = h;
                    break a;
                }
            }
            c = void 0;
        } return c; }; });
        var Ha = this;
        Ha.a = !0;
        function D(b, c) { var d = b.split("."), e = Ha; d[0] in e || !e.execScript || e.execScript("var " + d[0]); for (var f; d.length && (f = d.shift());)
            d.length || void 0 === c ? e[f] ? e = e[f] : e = e[f] = {} : e[f] = c; }
        function Ia(b, c) { function d() { } d.prototype = c.prototype; b.ke = c.prototype; b.prototype = new d; b.prototype.constructor = b; b.we = function (b, d, g) { return c.prototype[d].apply(b, Array.prototype.slice.call(arguments, 2)); }; }
        ;
        function Ka(b) { this.c = Math.exp(Math.log(.5) / b); this.b = this.a = 0; }
        function La(b, c, d) { var e = Math.pow(b.c, c); d = d * (1 - e) + e * b.a; isNaN(d) || (b.a = d, b.b += c); }
        function Ma(b) { return b.a / (1 - Math.pow(b.c, b.b)); }
        ;
        function Na() { this.b = new Ka(2); this.c = new Ka(5); this.a = 0; }
        Na.prototype.getBandwidthEstimate = function (b) { return 128E3 > this.a ? b : Math.min(Ma(this.b), Ma(this.c)); };
        function Oa() { }
        function Qa() { }
        window.console && window.console.log.bind && (Qa = console.warn.bind(console), Oa = console.error.bind(console));
        var Ra = /^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;
        function Sa(b) { var c; b instanceof Sa ? (Ta(this, b.ea), this.Ea = b.Ea, this.aa = b.aa, Ua(this, b.Xa), this.U = b.U, Va(this, b.a.clone()), this.xa = b.xa) : b && (c = String(b).match(Ra)) ? (Ta(this, c[1] || "", !0), this.Ea = Wa(c[2] || ""), this.aa = Wa(c[3] || "", !0), Ua(this, c[4]), this.U = Wa(c[5] || "", !0), Va(this, c[6] || "", !0), this.xa = Wa(c[7] || "")) : this.a = new Za(null); }
        n = Sa.prototype;
        n.ea = "";
        n.Ea = "";
        n.aa = "";
        n.Xa = null;
        n.U = "";
        n.xa = "";
        n.toString = function () { var b = [], c = this.ea; c && b.push($a(c, ab, !0), ":"); if (c = this.aa) {
            b.push("//");
            var d = this.Ea;
            d && b.push($a(d, ab, !0), "@");
            b.push(encodeURIComponent(c).replace(/%25([0-9a-fA-F]{2})/g, "%$1"));
            c = this.Xa;
            null != c && b.push(":", String(c));
        } if (c = this.U)
            this.aa && "/" != c.charAt(0) && b.push("/"), b.push($a(c, "/" == c.charAt(0) ? bb : cb, !0)); (c = this.a.toString()) && b.push("?", c); (c = this.xa) && b.push("#", $a(c, db)); return b.join(""); };
        n.resolve = function (b) {
            var c = this.clone();
            "data" === c.ea && (c = new Sa);
            var d = !!b.ea;
            d ? Ta(c, b.ea) : d = !!b.Ea;
            d ? c.Ea = b.Ea : d = !!b.aa;
            d ? c.aa = b.aa : d = null != b.Xa;
            var e = b.U;
            if (d)
                Ua(c, b.Xa);
            else if (d = !!b.U) {
                if ("/" != e.charAt(0))
                    if (this.aa && !this.U)
                        e = "/" + e;
                    else {
                        var f = c.U.lastIndexOf("/");
                        -1 != f && (e = c.U.substr(0, f + 1) + e);
                    }
                if (".." == e || "." == e)
                    e = "";
                else if (-1 != e.indexOf("./") || -1 != e.indexOf("/.")) {
                    f = 0 == e.lastIndexOf("/", 0);
                    e = e.split("/");
                    for (var g = [], h = 0; h < e.length;) {
                        var k = e[h++];
                        "." == k ? f && h == e.length && g.push("") : ".." == k ?
                            ((1 < g.length || 1 == g.length && "" != g[0]) && g.pop(), f && h == e.length && g.push("")) : (g.push(k), f = !0);
                    }
                    e = g.join("/");
                }
            }
            d ? c.U = e : d = "" !== b.a.toString();
            d ? Va(c, b.a.clone()) : d = !!b.xa;
            d && (c.xa = b.xa);
            return c;
        };
        n.clone = function () { return new Sa(this); };
        function Ta(b, c, d) { b.ea = d ? Wa(c, !0) : c; b.ea && (b.ea = b.ea.replace(/:$/, "")); }
        function Ua(b, c) { if (c) {
            c = Number(c);
            if (isNaN(c) || 0 > c)
                throw Error("Bad port number " + c);
            b.Xa = c;
        }
        else
            b.Xa = null; }
        function Va(b, c, d) { c instanceof Za ? b.a = c : (d || (c = $a(c, eb)), b.a = new Za(c)); }
        function Wa(b, c) { return b ? c ? decodeURI(b) : decodeURIComponent(b) : ""; }
        function $a(b, c, d) { return "string" == typeof b ? (b = encodeURI(b).replace(c, fb), d && (b = b.replace(/%25([0-9a-fA-F]{2})/g, "%$1")), b) : null; }
        function fb(b) { b = b.charCodeAt(0); return "%" + (b >> 4 & 15).toString(16) + (b & 15).toString(16); }
        var ab = /[#\/\?@]/g, cb = /[#\?:]/g, bb = /[#\?]/g, eb = /[#\?@]/g, db = /#/g;
        function Za(b) { this.a = b || null; }
        n = Za.prototype;
        n.T = null;
        n.pb = null;
        n.add = function (b, c) { if (!this.T && (this.T = {}, this.pb = 0, this.a))
            for (var d = this.a.split("&"), e = 0; e < d.length; e++) {
                var f = d[e].indexOf("="), g = null;
                if (0 <= f) {
                    var h = d[e].substring(0, f);
                    g = d[e].substring(f + 1);
                }
                else
                    h = d[e];
                h = decodeURIComponent(h.replace(/\+/g, " "));
                g = g || "";
                this.add(h, decodeURIComponent(g.replace(/\+/g, " ")));
            } this.a = null; (d = this.T.hasOwnProperty(b) && this.T[b]) || (this.T[b] = d = []); d.push(c); this.pb++; return this; };
        n.toString = function () { if (this.a)
            return this.a; if (!this.T)
            return ""; var b = [], c; for (c in this.T)
            for (var d = encodeURIComponent(c), e = this.T[c], f = 0; f < e.length; f++) {
                var g = d;
                "" !== e[f] && (g += "=" + encodeURIComponent(e[f]));
                b.push(g);
            } return this.a = b.join("&"); };
        n.clone = function () { var b = new Za; b.a = this.a; if (this.T) {
            var c = {}, d;
            for (d in this.T)
                c[d] = this.T[d].concat();
            b.T = c;
            b.pb = this.pb;
        } return b; };
        function gb(b) { this.b = b; this.a = null; }
        gb.prototype.L = function (b) { var c = this; this.stop(); var d = !0, e = null; this.a = function () { window.clearTimeout(e); d = !1; }; e = window.setTimeout(function () { d && c.b(); }, 1E3 * b); return this; };
        gb.prototype.stop = function () { this.a && (this.a(), this.a = null); };
        function E(b) { this.b = b; this.a = null; }
        D("shaka.util.Timer", E);
        E.prototype.le = function () { this.stop(); this.b(); return this; };
        E.prototype.tickNow = E.prototype.le;
        E.prototype.L = function (b) { var c = this; this.stop(); this.a = (new gb(function () { c.b(); })).L(b); return this; };
        E.prototype.tickAfter = E.prototype.L;
        E.prototype.qa = function (b) { var c = this; this.stop(); this.a = (new gb(function () { c.a.L(b); c.b(); })).L(b); return this; };
        E.prototype.tickEvery = E.prototype.qa;
        E.prototype.stop = function () { this.a && (this.a.stop(), this.a = null); };
        E.prototype.stop = E.prototype.stop;
        function hb(b, c) { var d = ib(); this.i = null == b.maxAttempts ? d.maxAttempts : b.maxAttempts; this.f = null == b.baseDelay ? d.baseDelay : b.baseDelay; this.h = null == b.fuzzFactor ? d.fuzzFactor : b.fuzzFactor; this.g = null == b.backoffFactor ? d.backoffFactor : b.backoffFactor; this.a = 0; this.b = this.f; if (this.c = void 0 === c ? !1 : c)
            this.a = 1; }
        function jb(b) { return t(function d() { var e, f; return y(d, function (d) { switch (d.j) {
            case 1:
                if (b.a >= b.i)
                    if (b.c)
                        b.a = 1, b.b = b.f;
                    else
                        return d["return"](Promise.reject());
                e = b.a;
                b.a++;
                if (0 == e)
                    return d["return"]();
                f = b.b * (1 + (2 * Math.random() - 1) * b.h);
                return u(d, new Promise(function (b) { (new E(b)).L(f / 1E3); }), 2);
            case 2: b.b *= b.g, x(d);
        } }); }); }
        function ib() { return { maxAttempts: 2, baseDelay: 1E3, backoffFactor: 2, fuzzFactor: .5, timeout: 0 }; }
        ;
        function F(b, c, d, e) { for (var f = [], g = 3; g < arguments.length; ++g)
            f[g - 3] = arguments[g]; this.severity = b; this.category = c; this.code = d; this.data = f; this.handled = !1; }
        D("shaka.util.Error", F);
        F.prototype.toString = function () { return "shaka.util.Error " + JSON.stringify(this, null, "  "); };
        F.Severity = { RECOVERABLE: 1, CRITICAL: 2 };
        F.Category = { NETWORK: 1, TEXT: 2, MEDIA: 3, MANIFEST: 4, STREAMING: 5, DRM: 6, PLAYER: 7, CAST: 8, STORAGE: 9 };
        F.Code = { UNSUPPORTED_SCHEME: 1E3, BAD_HTTP_STATUS: 1001, HTTP_ERROR: 1002, TIMEOUT: 1003, MALFORMED_DATA_URI: 1004, UNKNOWN_DATA_URI_ENCODING: 1005, REQUEST_FILTER_ERROR: 1006, RESPONSE_FILTER_ERROR: 1007, MALFORMED_TEST_URI: 1008, UNEXPECTED_TEST_REQUEST: 1009, INVALID_TEXT_HEADER: 2E3, INVALID_TEXT_CUE: 2001, UNABLE_TO_DETECT_ENCODING: 2003, BAD_ENCODING: 2004, INVALID_XML: 2005, INVALID_MP4_TTML: 2007, INVALID_MP4_VTT: 2008, UNABLE_TO_EXTRACT_CUE_START_TIME: 2009, BUFFER_READ_OUT_OF_BOUNDS: 3E3, JS_INTEGER_OVERFLOW: 3001, EBML_OVERFLOW: 3002,
            EBML_BAD_FLOATING_POINT_SIZE: 3003, MP4_SIDX_WRONG_BOX_TYPE: 3004, MP4_SIDX_INVALID_TIMESCALE: 3005, MP4_SIDX_TYPE_NOT_SUPPORTED: 3006, WEBM_CUES_ELEMENT_MISSING: 3007, WEBM_EBML_HEADER_ELEMENT_MISSING: 3008, WEBM_SEGMENT_ELEMENT_MISSING: 3009, WEBM_INFO_ELEMENT_MISSING: 3010, WEBM_DURATION_ELEMENT_MISSING: 3011, WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING: 3012, WEBM_CUE_TIME_ELEMENT_MISSING: 3013, MEDIA_SOURCE_OPERATION_FAILED: 3014, MEDIA_SOURCE_OPERATION_THREW: 3015, VIDEO_ERROR: 3016, QUOTA_EXCEEDED_ERROR: 3017, TRANSMUXING_FAILED: 3018,
            UNABLE_TO_GUESS_MANIFEST_TYPE: 4E3, DASH_INVALID_XML: 4001, DASH_NO_SEGMENT_INFO: 4002, DASH_EMPTY_ADAPTATION_SET: 4003, DASH_EMPTY_PERIOD: 4004, DASH_WEBM_MISSING_INIT: 4005, DASH_UNSUPPORTED_CONTAINER: 4006, DASH_PSSH_BAD_ENCODING: 4007, DASH_NO_COMMON_KEY_SYSTEM: 4008, DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED: 4009, DASH_CONFLICTING_KEY_IDS: 4010, UNPLAYABLE_PERIOD: 4011, RESTRICTIONS_CANNOT_BE_MET: 4012, NO_PERIODS: 4014, HLS_PLAYLIST_HEADER_MISSING: 4015, INVALID_HLS_TAG: 4016, HLS_INVALID_PLAYLIST_HIERARCHY: 4017, DASH_DUPLICATE_REPRESENTATION_ID: 4018,
            HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND: 4020, HLS_COULD_NOT_GUESS_MIME_TYPE: 4021, HLS_MASTER_PLAYLIST_NOT_PROVIDED: 4022, HLS_REQUIRED_ATTRIBUTE_MISSING: 4023, HLS_REQUIRED_TAG_MISSING: 4024, HLS_COULD_NOT_GUESS_CODECS: 4025, HLS_KEYFORMATS_NOT_SUPPORTED: 4026, DASH_UNSUPPORTED_XLINK_ACTUATE: 4027, DASH_XLINK_DEPTH_LIMIT: 4028, HLS_COULD_NOT_PARSE_SEGMENT_START_TIME: 4030, CONTENT_UNSUPPORTED_BY_BROWSER: 4032, CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM: 4033, HLS_AES_128_ENCRYPTION_NOT_SUPPORTED: 4034, INVALID_STREAMS_CHOSEN: 5005,
            NO_RECOGNIZED_KEY_SYSTEMS: 6E3, REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE: 6001, FAILED_TO_CREATE_CDM: 6002, FAILED_TO_ATTACH_TO_VIDEO: 6003, INVALID_SERVER_CERTIFICATE: 6004, FAILED_TO_CREATE_SESSION: 6005, FAILED_TO_GENERATE_LICENSE_REQUEST: 6006, LICENSE_REQUEST_FAILED: 6007, LICENSE_RESPONSE_REJECTED: 6008, ENCRYPTED_CONTENT_WITHOUT_DRM_INFO: 6010, NO_LICENSE_SERVER_GIVEN: 6012, OFFLINE_SESSION_REMOVED: 6013, EXPIRED: 6014, LOAD_INTERRUPTED: 7E3, OPERATION_ABORTED: 7001, NO_VIDEO_ELEMENT: 7002, CAST_API_UNAVAILABLE: 8E3, NO_CAST_RECEIVERS: 8001,
            ALREADY_CASTING: 8002, UNEXPECTED_CAST_ERROR: 8003, CAST_CANCELED_BY_USER: 8004, CAST_CONNECTION_TIMED_OUT: 8005, CAST_RECEIVER_APP_UNAVAILABLE: 8006, STORAGE_NOT_SUPPORTED: 9E3, INDEXED_DB_ERROR: 9001, DEPRECATED_OPERATION_ABORTED: 9002, REQUESTED_ITEM_NOT_FOUND: 9003, MALFORMED_OFFLINE_URI: 9004, CANNOT_STORE_LIVE_OFFLINE: 9005, STORE_ALREADY_IN_PROGRESS: 9006, NO_INIT_DATA_FOR_OFFLINE: 9007, LOCAL_PLAYER_INSTANCE_REQUIRED: 9008, NEW_KEY_OPERATION_NOT_SUPPORTED: 9011, KEY_NOT_FOUND: 9012, MISSING_STORAGE_CELL: 9013 };
        function G() { var b, c, d = new Promise(function (d, f) { b = d; c = f; }); d.resolve = b; d.reject = c; return d; }
        G.prototype.resolve = function () { };
        G.prototype.reject = function () { };
        function H(b, c) { this.promise = b; this.zc = c; this.a = !1; }
        D("shaka.util.AbortableOperation", H);
        function kb(b) { return new H(Promise.reject(b), function () { return Promise.resolve(); }); }
        H.failed = kb;
        function lb() { var b = Promise.reject(new F(2, 7, 7001)); b["catch"](function () { }); return new H(b, function () { return Promise.resolve(); }); }
        H.aborted = lb;
        function rb(b) { return new H(Promise.resolve(b), function () { return Promise.resolve(); }); }
        H.completed = rb;
        function sb(b) { return new H(b, function () { return b["catch"](function () { }); }); }
        H.notAbortable = sb;
        H.prototype.abort = function () { this.a = !0; return this.zc(); };
        H.prototype.abort = H.prototype.abort;
        function tb(b) { return new H(Promise.all(b.map(function (b) { return b.promise; })), function () { return Promise.all(b.map(function (b) { return b.abort(); })); }); }
        H.all = tb;
        H.prototype["finally"] = function (b) { this.promise.then(function () { return b(!0); }, function () { return b(!1); }); return this; };
        H.prototype["finally"] = H.prototype["finally"];
        H.prototype.$ = function (b, c) { function d() { f.reject(new F(2, 7, 7001)); return e.abort(); } var e = this, f = new G; this.promise.then(function (c) { e.a ? f.reject(new F(2, 7, 7001)) : b ? d = ub(b, c, f) : f.resolve(c); }, function (b) { c ? d = ub(c, b, f) : f.reject(b); }); return new H(f, function () { return d(); }); };
        H.prototype.chain = H.prototype.$;
        function ub(b, c, d) { try {
            var e = b(c);
            if (e && e.promise && e.abort)
                return d.resolve(e.promise), function () { return e.abort(); };
            d.resolve(e);
            return function () { return Promise.resolve(e).then(function () { })["catch"](function () { }); };
        }
        catch (f) {
            return d.reject(f), function () { return Promise.resolve(); };
        } }
        ;
        function I(b, c) { c = void 0 === c ? {} : c; for (var d in c)
            this[d] = c[d]; this.defaultPrevented = this.cancelable = this.bubbles = !1; this.timeStamp = window.performance && window.performance.now ? window.performance.now() : Date.now(); this.type = b; this.isTrusted = !1; this.target = this.currentTarget = null; this.a = !1; }
        I.prototype.preventDefault = function () { this.cancelable && (this.defaultPrevented = !0); };
        I.prototype.stopImmediatePropagation = function () { this.a = !0; };
        I.prototype.stopPropagation = function () { };
        function vb() { this.a = {}; }
        vb.prototype.push = function (b, c) { this.a.hasOwnProperty(b) ? this.a[b].push(c) : this.a[b] = [c]; };
        vb.prototype.get = function (b) { return (b = this.a[b]) ? b.slice() : null; };
        vb.prototype.remove = function (b, c) { var d = this.a[b]; if (d)
            for (var e = 0; e < d.length; ++e)
                d[e] == c && (d.splice(e, 1), --e); };
        vb.prototype.forEach = function (b) { for (var c in this.a)
            b(c, this.a[c]); };
        function wb() { this.Fb = new vb; this.rc = this; }
        wb.prototype.addEventListener = function (b, c) { this.Fb.push(b, c); };
        wb.prototype.removeEventListener = function (b, c) { this.Fb.remove(b, c); };
        wb.prototype.dispatchEvent = function (b) { for (var c = this.Fb.get(b.type) || [], d = 0; d < c.length; ++d) {
            b.target = this.rc;
            b.currentTarget = this.rc;
            var e = c[d];
            try {
                e.handleEvent ? e.handleEvent(b) : e.call(this, b);
            }
            catch (f) { }
            if (b.a)
                break;
        } return b.defaultPrevented; };
        function xb(b) { function c(b) { switch (typeof b) {
            case "undefined":
            case "boolean":
            case "number":
            case "string":
            case "symbol":
            case "function": return b;
            default:
                if (!b || b.buffer && b.buffer.constructor == ArrayBuffer)
                    return b;
                if (d.has(b))
                    return null;
                var e = b.constructor == Array;
                if (b.constructor != Object && !e)
                    return null;
                d.add(b);
                var g = e ? [] : {}, h;
                for (h in b)
                    g[h] = c(b[h]);
                e && (g.length = b.length);
                return g;
        } } var d = new Set; return c(b); }
        ;
        function yb(b, c) { var d = b.indexOf(c); -1 < d && b.splice(d, 1); }
        function zb(b, c) { var d = 0; b.forEach(function (b) { d += c(b) ? 1 : 0; }); return d; }
        ;
        function Ab() { this.a = []; }
        function Bb(b, c) { b.a.push(c["finally"](function () { yb(b.a, c); })); }
        Ab.prototype.destroy = function () { var b = []; this.a.forEach(function (c) { c.promise["catch"](function () { }); b.push(c.abort()); }); this.a = []; return Promise.all(b); };
        function J(b) { wb.call(this); this.f = !1; this.g = new Ab; this.a = new Set; this.b = new Set; this.c = b || null; }
        Ia(J, wb);
        D("shaka.net.NetworkingEngine", J);
        var Cb = { MANIFEST: 0, SEGMENT: 1, LICENSE: 2, APP: 3, TIMING: 4 };
        J.RequestType = Cb;
        J.PluginPriority = { FALLBACK: 1, PREFERRED: 2, APPLICATION: 3 };
        var Db = {};
        function Eb(b, c, d) { d = d || 3; var e = Db[b]; if (!e || d >= e.priority)
            Db[b] = { priority: d, Nd: c }; }
        J.registerScheme = Eb;
        J.unregisterScheme = function (b) { delete Db[b]; };
        J.prototype.Pd = function (b) { this.a.add(b); };
        J.prototype.registerRequestFilter = J.prototype.Pd;
        J.prototype.oe = function (b) { this.a["delete"](b); };
        J.prototype.unregisterRequestFilter = J.prototype.oe;
        J.prototype.Wc = function () { this.a.clear(); };
        J.prototype.clearAllRequestFilters = J.prototype.Wc;
        J.prototype.Qd = function (b) { this.b.add(b); };
        J.prototype.registerResponseFilter = J.prototype.Qd;
        J.prototype.pe = function (b) { this.b["delete"](b); };
        J.prototype.unregisterResponseFilter = J.prototype.pe;
        J.prototype.Xc = function () { this.b.clear(); };
        J.prototype.clearAllResponseFilters = J.prototype.Xc;
        function Fb(b, c) { return { uris: b, method: "GET", body: null, headers: {}, allowCrossSiteCredentials: !1, retryParameters: c, licenseRequestType: null }; }
        J.prototype.destroy = function () { this.f = !0; this.a.clear(); this.b.clear(); return this.g.destroy(); };
        J.prototype.destroy = J.prototype.destroy;
        J.prototype.request = function (b, c) {
            var d = this, e = new Gb;
            if (this.f) {
                var f = Promise.reject(new F(2, 7, 7001));
                f["catch"](function () { });
                return new Hb(f, function () { return Promise.resolve(); }, e);
            }
            c.method = c.method || "GET";
            c.headers = c.headers || {};
            c.retryParameters = c.retryParameters ? xb(c.retryParameters) : ib();
            c.uris = xb(c.uris);
            f = Ib(this, b, c);
            var g = f.$(function () { return Jb(d, b, c, new hb(c.retryParameters, !1), 0, null, e); }), h = g.$(function (c) { return Kb(d, b, c); }), k = Date.now(), l = 0;
            f.promise.then(function () { l = Date.now() - k; }, function () { });
            var m = 0;
            g.promise.then(function () { m = Date.now(); }, function () { });
            f = h.$(function (c) { var e = Date.now() - m, f = c.response; f.timeMs += l; f.timeMs += e; c.wd || !d.c || f.fromCache || 1 != b || d.c(f.timeMs, f.data.byteLength); return f; }, function (b) { b && (b.severity = 2); throw b; });
            f = new Hb(f.promise, f.zc, e);
            Bb(this.g, f);
            return f;
        };
        J.prototype.request = J.prototype.request;
        function Ib(b, c, d) { var e = rb(void 0), f = {}; b = r(b.a); for (var g = b.next(); !g.done; f = { dc: f.dc }, g = b.next())
            f.dc = g.value, e = e.$(function (b) { return function () { return b.dc(c, d); }; }(f)); return e.$(void 0, function (b) { if (b && 7001 == b.code)
            throw b; throw new F(2, 1, 1006, b); }); }
        function Jb(b, c, d, e, f, g, h) {
            var k = new Sa(d.uris[f]), l = k.ea, m = !1;
            l || (l = location.protocol, l = l.slice(0, -1), Ta(k, l), d.uris[f] = k.toString());
            var p = (l = Db[l]) ? l.Nd : null;
            if (!p)
                return kb(new F(2, 1, 1E3, k));
            var q;
            return sb(jb(e)).$(function () { if (b.f)
                return lb(); q = Date.now(); return p(d.uris[f], d, c, function (d, e, f) { b.c && 1 == c && (b.c(d, e), m = !0, h.a = f); }); }).$(function (b) { void 0 == b.timeMs && (b.timeMs = Date.now() - q); return { response: b, wd: m }; }, function (h) {
                if (h && 7001 == h.code)
                    throw h;
                if (b.f)
                    return lb();
                if (h && 1 == h.severity)
                    return b.dispatchEvent(new I("retry", { error: h instanceof F ? h : null })), f = (f + 1) % d.uris.length, Jb(b, c, d, e, f, h);
                throw h || g;
            });
        }
        function Kb(b, c, d) { var e = rb(void 0); b = r(b.b); for (var f = b.next(); !f.done; f = b.next())
            e = e.$(f.value.bind(null, c, d.response)); return e.$(function () { return d; }, function (b) { if (b && 7001 == b.code)
            throw b; var c = 2; b instanceof F && (c = b.severity); throw new F(c, 1, 1007, b); }); }
        function Gb() { this.a = 0; }
        J.NumBytesRemainingClass = Gb;
        function Hb(b, c, d) { H.call(this, b, c); this.b = d; }
        var Lb = Hb;
        Lb.prototype = ma(H.prototype);
        Lb.prototype.constructor = Lb;
        if (ra)
            ra(Lb, H);
        else
            for (var Mb in H)
                if ("prototype" != Mb)
                    if (Object.defineProperties) {
                        var Nb = Object.getOwnPropertyDescriptor(H, Mb);
                        Nb && Object.defineProperty(Lb, Mb, Nb);
                    }
                    else
                        Lb[Mb] = H[Mb];
        Lb.ke = H.prototype;
        J.PendingRequest = Hb;
        Hb.all = tb;
        Hb.notAbortable = sb;
        Hb.completed = rb;
        Hb.aborted = lb;
        Hb.failed = kb;
        function Ob() { this.b = new vb; }
        Ob.prototype.a = function () { Pb(this); this.b = null; };
        function K(b, c, d, e) { b.b && (c = new Qb(c, d, e), b.b.push(d, c)); }
        function Rb(b, c, d, e) { function f(g) { b.Y(c, d, f); e(g); } K(b, c, d, f); }
        Ob.prototype.Y = function (b, c, d) { if (this.b)
            for (var e = this.b.get(c) || [], f = 0; f < e.length; ++f) {
                var g = e[f];
                g.target != b || d != g.listener && d || (g.Y(), this.b.remove(c, g));
            } };
        function Pb(b) { if (b.b) {
            var c = b.b, d = [], e;
            for (e in c.a)
                d.push.apply(d, c.a[e]);
            for (c = 0; c < d.length; ++c)
                d[c].Y();
            b.b.a = {};
        } }
        function Qb(b, c, d) { this.target = b; this.type = c; this.listener = d; this.target.addEventListener(c, d, !1); }
        Qb.prototype.Y = function () { this.target.removeEventListener(this.type, this.listener, !1); this.listener = this.target = null; };
        function Sb(b, c) { for (var d = r(b), e = d.next(); !e.done; e = d.next())
            if (!c(e.value))
                return !1; return !0; }
        ;
        function Tb(b) { var c = new Map; Object.keys(b).forEach(function (d) { c.set(d, b[d]); }); return c; }
        function Ub(b) { var c = {}; b.forEach(function (b, e) { c[e] = b; }); return c; }
        ;
        function Vb(b, c) { var d = b; c && (d += '; codecs="' + c + '"'); return d; }
        function Wb(b) { var c = [b.mimeType]; Xb.forEach(function (d, e) { var f = b[e]; f && c.push(d + '="' + f + '"'); }); return c.join(";"); }
        function Yb(b) { b = b.split("."); var c = b[0]; b.pop(); return [c, b.join(".")]; }
        var Xb = (new Map).set("codecs", "codecs").set("frameRate", "framerate").set("bandwidth", "bitrate").set("width", "width").set("height", "height").set("channelsCount", "channels");
        function Zb() { return window.MediaSource && MediaSource.isTypeSupported ? !0 : !1; }
        function $b(b) { return "" != ac().canPlayType(b); }
        function bc(b) { return (navigator.userAgent || "").includes(b); }
        function ac() { if (cc)
            return cc; dc || (dc = new E(function () { cc = null; })); (cc = document.querySelector("video") || document.querySelector("audio")) || (cc = document.createElement("video")); dc.L(1); return cc; }
        var dc = null, cc = null;
        function ec(b) { if (!b)
            return ""; b = new Uint8Array(b); 239 == b[0] && 187 == b[1] && 191 == b[2] && (b = b.subarray(3)); b = escape(fc(b)); try {
            return decodeURIComponent(b);
        }
        catch (c) {
            throw new F(2, 2, 2004);
        } }
        D("shaka.util.StringUtils.fromUTF8", ec);
        function gc(b, c, d) { if (!b)
            return ""; if (!d && 0 != b.byteLength % 2)
            throw new F(2, 2, 2004); if (b instanceof ArrayBuffer)
            var e = b;
        else
            d = new Uint8Array(b.byteLength), d.set(new Uint8Array(b)), e = d.buffer; b = Math.floor(b.byteLength / 2); d = new Uint16Array(b); e = new DataView(e); for (var f = 0; f < b; f++)
            d[f] = e.getUint16(2 * f, c); return fc(d); }
        D("shaka.util.StringUtils.fromUTF16", gc);
        function hc(b) { var c = new Uint8Array(b); if (239 == c[0] && 187 == c[1] && 191 == c[2])
            return ec(c); if (254 == c[0] && 255 == c[1])
            return gc(c.subarray(2), !1); if (255 == c[0] && 254 == c[1])
            return gc(c.subarray(2), !0); var d = function (b, c) { return b.byteLength <= c || 32 <= b[c] && 126 >= b[c]; }.bind(null, c); if (0 == c[0] && 0 == c[2])
            return gc(b, !1); if (0 == c[1] && 0 == c[3])
            return gc(b, !0); if (d(0) && d(1) && d(2) && d(3))
            return ec(b); throw new F(2, 2, 2003); }
        D("shaka.util.StringUtils.fromBytesAutoDetect", hc);
        function ic(b) { b = encodeURIComponent(b); b = unescape(b); for (var c = new Uint8Array(b.length), d = 0; d < b.length; ++d)
            c[d] = b.charCodeAt(d); return c.buffer; }
        D("shaka.util.StringUtils.toUTF8", ic);
        function jc(b, c) { for (var d = new Uint8Array(2 * b.length), e = new DataView(d.buffer), f = 0; f < b.length; ++f)
            e.setUint16(2 * f, b.charCodeAt(f), c); return d.buffer; }
        D("shaka.util.StringUtils.toUTF16", jc);
        function fc(b) { for (var c = "", d = 0; d < b.length; d += 16E3)
            c += String.fromCharCode.apply(null, b.subarray(d, d + 16E3)); return c; }
        ;
        function kc(b, c) { var d = fc(b); c = void 0 == c ? !0 : c; d = window.btoa(d).replace(/\+/g, "-").replace(/\//g, "_"); return c ? d : d.replace(/=*$/, ""); }
        D("shaka.util.Uint8ArrayUtils.toBase64", kc);
        function lc(b) { b = window.atob(b.replace(/-/g, "+").replace(/_/g, "/")); for (var c = new Uint8Array(b.length), d = 0; d < b.length; ++d)
            c[d] = b.charCodeAt(d); return c; }
        D("shaka.util.Uint8ArrayUtils.fromBase64", lc);
        function mc(b) { for (var c = new Uint8Array(b.length / 2), d = 0; d < b.length; d += 2)
            c[d / 2] = window.parseInt(b.substr(d, 2), 16); return c; }
        D("shaka.util.Uint8ArrayUtils.fromHex", mc);
        function nc(b) { for (var c = "", d = 0; d < b.length; ++d) {
            var e = b[d].toString(16);
            1 == e.length && (e = "0" + e);
            c += e;
        } return c; }
        D("shaka.util.Uint8ArrayUtils.toHex", nc);
        function oc(b, c) { if (!b && !c)
            return !0; if (!b || !c || b.length != c.length)
            return !1; for (var d = 0; d < b.length; ++d)
            if (b[d] != c[d])
                return !1; return !0; }
        D("shaka.util.Uint8ArrayUtils.equal", oc);
        function pc(b) { for (var c = [], d = 0; d < arguments.length; ++d)
            c[d] = arguments[d]; for (var e = d = 0; e < c.length; ++e)
            d += c[e].length; d = new Uint8Array(d); for (var f = e = 0; f < c.length; ++f)
            d.set(c[f], e), e += c[f].length; return d; }
        D("shaka.util.Uint8ArrayUtils.concat", pc);
        function qc(b) { var c = this; this.v = b; this.s = new Set; this.l = this.h = null; this.J = !1; this.a = null; this.i = new Ob; this.b = new Map; this.u = []; this.m = new G; this.f = null; this.g = function (d) { c.m.reject(d); b.onError(d); }; this.W = new Map; this.K = new Map; this.H = new E(function () { return rc(c); }); this.c = !1; this.N = new G; this.G = !1; this.B = []; this.V = !1; this.M = (new E(function () { sc(c); })).qa(1); this.m["catch"](function () { }); }
        n = qc.prototype;
        n.destroy = function () { var b = this; return t(function d() { return y(d, function (d) { switch (d.j) {
            case 1:
                if (b.c)
                    return u(d, b.N, 0);
                b.c = !0;
                return u(d, tc(b), 4);
            case 4: b.N.resolve(), d.j = 0;
        } }); }); };
        function tc(b) {
            return t(function d() {
                var e;
                return y(d, function (d) {
                    switch (d.j) {
                        case 1: return b.i.a(), b.i = null, b.m.reject(), b.M.stop(), b.M = null, b.H.stop(), b.H = null, e = Array.from(b.b.keys()), b.b.clear(), u(d, Promise.all(e.map(function (b) { return Promise.resolve().then(function () { return t(function k() { return y(k, function (d) { switch (d.j) {
                            case 1: return d.P = 2, u(d, uc(b), 4);
                            case 4:
                                va(d, 0);
                                break;
                            case 2: ya(d), x(d);
                        } }); }); }); })), 2);
                        case 2:
                            if (!b.l) {
                                d.j = 3;
                                break;
                            }
                            d.P = 4;
                            return u(d, b.l.setMediaKeys(null), 6);
                        case 6:
                            va(d, 5);
                            break;
                        case 4: ya(d);
                        case 5: b.l = null;
                        case 3: b.a = null, b.s.clear(), b.h = null, b.u = [], b.f = null, b.g = null, b.v = null, x(d);
                    }
                });
            });
        }
        n.configure = function (b) { this.f = b; };
        function vc(b, c, d) { b.u = d; b.G = 0 < d.length; return wc(b, c); }
        function wc(b, c) { var d = c.some(function (b) { return 0 < b.drmInfos.length; }); if (!d) {
            var e = Tb(b.f.servers);
            xc(c, e);
        } var f = yc(b); if (f) {
            var g = r(c);
            for (e = g.next(); !e.done; e = g.next())
                e.value.drmInfos = [f];
        } f = r(c); for (e = f.next(); !e.done; e = f.next())
            for (e = r(e.value.drmInfos), g = e.next(); !g.done; g = e.next())
                zc(g.value, Tb(b.f.servers), Tb(b.f.advanced || {})); e = Ac(b, c); if (!e.size)
            return b.J = !0, Promise.resolve(); e = Bc(b, e); return d ? e : e["catch"](function () { }); }
        n.ab = function (b) {
            var c = this;
            if (!this.h)
                return Rb(this.i, b, "encrypted", function () { c.g(new F(2, 6, 6010)); }), Promise.resolve();
            this.l = b;
            Rb(this.i, this.l, "play", function () { for (var b = 0; b < c.B.length; b++)
                Cc(c, c.B[b]); c.V = !0; c.B = []; });
            b = this.l.setMediaKeys(this.h);
            b = b["catch"](function (b) { return Promise.reject(new F(2, 6, 6003, b.message)); });
            var d = Dc(this);
            return Promise.all([b, d]).then(function () {
                if (c.c)
                    return Promise.reject();
                Ec(c);
                c.a.initData.length || c.u.length || K(c.i, c.l, "encrypted", function (b) {
                    return Fc(c, b.initDataType, new Uint8Array(b.initData));
                });
            })["catch"](function (b) { if (!c.c)
                return Promise.reject(b); });
        };
        function Dc(b) { return t(function d() { var e; return y(d, function (d) { switch (d.j) {
            case 1:
                if (!(b.h && b.a && b.a.serverCertificate && b.a.serverCertificate.length)) {
                    d.j = 0;
                    break;
                }
                d.P = 3;
                return u(d, b.h.setServerCertificate(b.a.serverCertificate), 5);
            case 5:
                va(d, 0);
                break;
            case 3: return e = ya(d), d["return"](Promise.reject(new F(2, 6, 6004, e.message)));
        } }); }); }
        function Ec(b) { var c = b.a ? b.a.initData : []; c.forEach(function (c) { return Gc(b, c.initDataType, c.initData); }); b.u.forEach(function (c) { return Hc(b, c); }); c.length || b.u.length || b.m.resolve(); }
        function Fc(b, c, d) { var e = b.b.values(); e = r(e); for (var f = e.next(); !f.done; f = e.next())
            if (oc(d, f.value.initData))
                return; Gc(b, c, d); }
        n.keySystem = function () { return this.a ? this.a.keySystem : ""; };
        function Ic(b, c) { return bc("Edge/") ? !0 : b.s.has(c); }
        n.Sb = function () { var b = Infinity, c = this.b.keys(); c = r(c); for (var d = c.next(); !d.done; d = c.next())
            d = d.value, isNaN(d.expiration) || (b = Math.min(b, d.expiration)); return b; };
        function Ac(b, c) {
            for (var d = new Set, e = r(c), f = e.next(); !f.done; f = e.next()) {
                var g = r(f.value.drmInfos);
                for (f = g.next(); !f.done; f = g.next())
                    d.add(f.value);
            }
            e = r(d);
            for (f = e.next(); !f.done; f = e.next())
                zc(f.value, Tb(b.f.servers), Tb(b.f.advanced || {}));
            g = b.G ? "required" : "optional";
            var h = b.G ? ["persistent-license"] : ["temporary"];
            e = new Map;
            d = r(d);
            for (f = d.next(); !f.done; f = d.next())
                f = f.value, e.set(f.keySystem, { audioCapabilities: [], videoCapabilities: [], distinctiveIdentifier: "optional", persistentState: g, sessionTypes: h,
                    label: f.keySystem, drmInfos: [] });
            d = r(c);
            for (f = d.next(); !f.done; f = d.next()) {
                f = f.value;
                g = f.audio;
                h = f.video;
                var k = g ? Vb(g.mimeType, g.codecs) : "", l = h ? Vb(h.mimeType, h.codecs) : "", m = r(f.drmInfos);
                for (f = m.next(); !f.done; f = m.next()) {
                    f = f.value;
                    var p = e.get(f.keySystem);
                    p.drmInfos.push(f);
                    f.distinctiveIdentifierRequired && (p.distinctiveIdentifier = "required");
                    f.persistentStateRequired && (p.persistentState = "required");
                    g && p.audioCapabilities.push({ robustness: f.audioRobustness || "", contentType: k });
                    h && p.videoCapabilities.push({ robustness: f.videoRobustness ||
                            "", contentType: l });
                }
            }
            return e;
        }
        function Bc(b, c) {
            if (1 == c.size && c.has(""))
                return Promise.reject(new F(2, 6, 6E3));
            for (var d = r(c.values()), e = d.next(); !e.done; e = d.next())
                e = e.value, 0 == e.audioCapabilities.length && delete e.audioCapabilities, 0 == e.videoCapabilities.length && delete e.videoCapabilities;
            var f = d = new G;
            [!0, !1].forEach(function (b) { var d = this; c.forEach(function (c, e) { c.drmInfos.some(function (b) { return !!b.licenseServerUri; }) == b && (f = f["catch"](function () { if (!this.c)
                return navigator.requestMediaKeySystemAccess(e, [c]); }.bind(d))); }); }.bind(b));
            f = f["catch"](function () { return Promise.reject(new F(2, 6, 6001)); });
            f = f.then(function (b) {
                if (this.c)
                    return Promise.reject();
                this.s.clear();
                var d = b.getConfiguration(), e = d.videoCapabilities || [], f = r(d.audioCapabilities || []);
                for (d = f.next(); !d.done; d = f.next())
                    this.s.add(d.value.contentType);
                e = r(e);
                for (d = e.next(); !d.done; d = e.next())
                    this.s.add(d.value.contentType);
                e = b.keySystem;
                d = c.get(b.keySystem);
                f = [];
                var g = [], p = [], q = [];
                Jc(d.drmInfos, f, g, p, q);
                this.a = { keySystem: e, licenseServerUri: f[0], distinctiveIdentifierRequired: "required" ==
                        d.distinctiveIdentifier, persistentStateRequired: "required" == d.persistentState, audioRobustness: d.audioCapabilities ? d.audioCapabilities[0].robustness : "", videoRobustness: d.videoCapabilities ? d.videoCapabilities[0].robustness : "", serverCertificate: g[0], initData: p, keyIds: q };
                return this.a.licenseServerUri ? b.createMediaKeys() : Promise.reject(new F(2, 6, 6012, this.a.keySystem));
            }.bind(b)).then(function (b) { if (this.c)
                return Promise.reject(); this.h = b; this.J = !0; }.bind(b))["catch"](function (b) {
                if (!this.c)
                    return this.a =
                        null, this.s.clear(), b instanceof F ? Promise.reject(b) : Promise.reject(new F(2, 6, 6002, b.message));
            }.bind(b));
            d.reject();
            return f;
        }
        function yc(b) {
            b = Tb(b.f.clearKeys);
            if (0 == b.size)
                return null;
            var c = [], d = [];
            b.forEach(function (b, e) { var f = mc(e), g = mc(b); f = { kty: "oct", kid: kc(f, !1), k: kc(g, !1) }; c.push(f); d.push(f.kid); });
            b = JSON.stringify({ keys: c });
            var e = JSON.stringify({ kids: d });
            e = [{ initData: new Uint8Array(ic(e)), initDataType: "keyids" }];
            return { keySystem: "org.w3.clearkey", licenseServerUri: "data:application/json;base64," + window.btoa(b), distinctiveIdentifierRequired: !1, persistentStateRequired: !1, audioRobustness: "", videoRobustness: "", serverCertificate: null,
                initData: e, keyIds: [] };
        }
        function Hc(b, c) {
            try {
                var d = b.h.createSession("persistent-license");
            }
            catch (g) {
                var e = new F(2, 6, 6005, g.message);
                b.g(e);
                return Promise.reject(e);
            }
            K(b.i, d, "message", b.Ec.bind(b));
            K(b.i, d, "keystatuseschange", b.Dc.bind(b));
            var f = { initData: null, loaded: !1, Zb: Infinity, ra: null };
            b.b.set(d, f);
            return d.load(c).then(function (b) { if (this.c)
                return Promise.reject(); if (b)
                return f.loaded = !0, Kc(this) && this.m.resolve(), d; this.b["delete"](d); this.g(new F(2, 6, 6013)); }.bind(b), function (b) {
                this.c || (this.b["delete"](d), this.g(new F(2, 6, 6005, b.message)));
            }.bind(b));
        }
        function Gc(b, c, d) { try {
            var e = b.G ? b.h.createSession("persistent-license") : b.h.createSession();
        }
        catch (f) {
            b.g(new F(2, 6, 6005, f.message));
            return;
        } K(b.i, e, "message", b.Ec.bind(b)); K(b.i, e, "keystatuseschange", b.Dc.bind(b)); b.b.set(e, { initData: d, loaded: !1, Zb: Infinity, ra: null }); e.generateRequest(c, d.buffer)["catch"](function (c) { if (!b.c) {
            b.b["delete"](e);
            if (c.errorCode && c.errorCode.systemCode) {
                var d = c.errorCode.systemCode;
                0 > d && (d += Math.pow(2, 32));
                d = "0x" + d.toString(16);
            }
            b.g(new F(2, 6, 6006, c.message, c, d));
        } }); }
        n.Ec = function (b) { this.f.delayLicenseRequestUntilPlayed && this.l.paused && !this.V ? this.B.push(b) : Cc(this, b); };
        function Cc(b, c) {
            var d = c.target, e = b.b.get(d), f = b.a.licenseServerUri, g = b.f.advanced[b.a.keySystem];
            "individualization-request" == c.messageType && g && g.individualizationServer && (f = g.individualizationServer);
            f = Fb([f], b.f.retryParameters);
            f.body = c.message;
            f.method = "POST";
            f.licenseRequestType = c.messageType;
            "com.microsoft.playready" != b.a.keySystem && "com.chromecast.playready" != b.a.keySystem || Lc(f);
            b.a.keySystem.startsWith("com.apple.fps") && Mc(f);
            b.v.ub.request(2, f).promise.then(function (b) {
                if (this.c)
                    return Promise.reject();
                this.a.keySystem.startsWith("com.apple.fps") && Nc(b);
                return d.update(b.data).then(function () { var b = this; this.v.onEvent(new I("drmsessionupdate")); e && (e.ra && e.ra.resolve(), (new E(function () { e.loaded = !0; Kc(b) && b.m.resolve(); })).L(Oc)); }.bind(this));
            }.bind(b), function (b) { this.c || (b = new F(2, 6, 6007, b), this.g(b), e && e.ra && e.ra.reject(b)); }.bind(b))["catch"](function (b) { this.c || (b = new F(2, 6, 6008, b.message), this.g(b), e && e.ra && e.ra.reject(b)); }.bind(b));
        }
        function Lc(b) { var c = gc(b.body, !0, !0); if (c.includes("PlayReadyKeyMessage")) {
            c = (new DOMParser).parseFromString(c, "application/xml");
            for (var d = c.getElementsByTagName("HttpHeader"), e = 0; e < d.length; ++e)
                b.headers[d[e].querySelector("name").textContent] = d[e].querySelector("value").textContent;
            b.body = lc(c.querySelector("Challenge").textContent).buffer;
        }
        else
            b.headers["Content-Type"] = "text/xml; charset=utf-8"; }
        function Mc(b) { var c = new Uint8Array(b.body); c = "spc=" + kc(c); b.headers["Content-Type"] = "application/x-www-form-urlencoded"; b.body = ic(c); }
        function Nc(b) { try {
            var c = ec(b.data);
        }
        catch (d) {
            return;
        } c = c.trim(); "<ckc>" === c.substr(0, 5) && "</ckc>" === c.substr(-6) && (c = c.slice(5, -6)); try {
            c = JSON.parse(c).ckc;
        }
        catch (d) { } b.data = lc(c).buffer; }
        n.Dc = function (b) {
            b = b.target;
            var c = this.b.get(b), d = !1;
            b.keyStatuses.forEach(function (b, e) {
                if ("string" == typeof e) {
                    var f = e;
                    e = b;
                    b = f;
                }
                if ("com.microsoft.playready" == this.a.keySystem && 16 == e.byteLength && !bc("Tizen")) {
                    f = new DataView(e);
                    var g = f.getUint32(0, !0), l = f.getUint16(4, !0), m = f.getUint16(6, !0);
                    f.setUint32(0, g, !1);
                    f.setUint16(4, l, !1);
                    f.setUint16(6, m, !1);
                }
                "com.microsoft.playready" == this.a.keySystem && "status-pending" == b && (b = "usable");
                "status-pending" != b && (c.loaded = !0);
                "expired" == b && (d = !0);
                f = nc(new Uint8Array(e));
                this.W.set(f, b);
            }.bind(this));
            var e = b.expiration - Date.now();
            (0 > e || d && 1E3 > e) && c && !c.ra && (this.b["delete"](b), b.close()["catch"](function () { }));
            Kc(this) && (this.m.resolve(), this.H.L(Pc));
        };
        function rc(b) { var c = b.W, d = b.K; d.clear(); c.forEach(function (b, c) { return d.set(c, b); }); c = Array.from(d.values()); c.length && c.every(function (b) { return "expired" == b; }) && b.g(new F(2, 6, 6014)); b.v.Cc(Ub(d)); }
        function Qc() {
            function b(b) { return t(function h() { var c, f, m; return y(h, function (h) { switch (h.j) {
                case 1: return h.P = 2, u(h, navigator.requestMediaKeySystemAccess(b, d), 4);
                case 4: return c = h.w, m = (f = c.getConfiguration().sessionTypes) ? f.includes("persistent-license") : !1, bc("Tizen 3") && (m = !1), e.set(b, { persistentState: m }), u(h, c.createMediaKeys(), 5);
                case 5:
                    va(h, 0);
                    break;
                case 2: ya(h), e.set(b, null), x(h);
            } }); }); }
            var c = [{ contentType: 'video/mp4; codecs="avc1.42E01E"' }, { contentType: 'video/webm; codecs="vp8"' }], d = [{ videoCapabilities: c,
                    persistentState: "required", sessionTypes: ["persistent-license"] }, { videoCapabilities: c }], e = new Map;
            c = "org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").map(function (c) { return b(c); });
            return Promise.all(c).then(function () { return Ub(e); });
        }
        function Rc(b, c) { var d = c.audio, e = c.video; if (d && d.encrypted && !Ic(b, Vb(d.mimeType, d.codecs)) || e && e.encrypted && !Ic(b, Vb(e.mimeType, e.codecs)))
            return !1; var f = b.keySystem(); return 0 == c.drmInfos.length || c.drmInfos.some(function (b) { return b.keySystem == f; }); }
        function Sc(b, c) {
            if (!b.length)
                return c;
            if (!c.length)
                return b;
            for (var d = [], e = 0; e < b.length; e++)
                for (var f = 0; f < c.length; f++)
                    if (b[e].keySystem == c[f].keySystem) {
                        var g = b[e];
                        f = c[f];
                        var h = [];
                        h = h.concat(g.initData || []);
                        h = h.concat(f.initData || []);
                        var k = [];
                        k = k.concat(g.keyIds);
                        k = k.concat(f.keyIds);
                        d.push({ keySystem: g.keySystem, licenseServerUri: g.licenseServerUri || f.licenseServerUri, distinctiveIdentifierRequired: g.distinctiveIdentifierRequired || f.distinctiveIdentifierRequired, persistentStateRequired: g.persistentStateRequired ||
                                f.persistentStateRequired, videoRobustness: g.videoRobustness || f.videoRobustness, audioRobustness: g.audioRobustness || f.audioRobustness, serverCertificate: g.serverCertificate || f.serverCertificate, initData: h, keyIds: k });
                        break;
                    }
            return d;
        }
        function sc(b) { b.b.forEach(function (c, d) { var e = c.Zb, f = d.expiration; isNaN(f) && (f = Infinity); f != e && (b.v.onExpirationUpdated(d.sessionId, f), c.Zb = f); }); }
        function Kc(b) { b = b.b.values(); return Sb(b, function (b) { return b.loaded; }); }
        function xc(b, c) { var d = []; c.forEach(function (b, c) { d.push({ keySystem: c, licenseServerUri: b, distinctiveIdentifierRequired: !1, persistentStateRequired: !1, audioRobustness: "", videoRobustness: "", serverCertificate: null, initData: [], keyIds: [] }); }); for (var e = r(b), f = e.next(); !f.done; f = e.next())
            f.value.drmInfos = d; }
        function Jc(b, c, d, e, f) { b.forEach(function (b) { c.includes(b.licenseServerUri) || c.push(b.licenseServerUri); b.serverCertificate && (d.some(function (c) { return oc(c, b.serverCertificate); }) || d.push(b.serverCertificate)); b.initData && b.initData.forEach(function (b) { e.some(function (c) { return c.keyId && c.keyId == b.keyId ? !0 : c.initDataType == b.initDataType && oc(c.initData, b.initData); }) || e.push(b); }); if (b.keyIds)
            for (var g = 0; g < b.keyIds.length; ++g)
                f.includes(b.keyIds[g]) || f.push(b.keyIds[g]); }); }
        function zc(b, c, d) {
            if (b.keySystem && ("org.w3.clearkey" != b.keySystem || !b.licenseServerUri)) {
                c.size && (c = c.get(b.keySystem) || "", b.licenseServerUri = c);
                b.keyIds || (b.keyIds = []);
                if (d = d.get(b.keySystem))
                    b.distinctiveIdentifierRequired || (b.distinctiveIdentifierRequired = d.distinctiveIdentifierRequired), b.persistentStateRequired || (b.persistentStateRequired = d.persistentStateRequired), b.videoRobustness || (b.videoRobustness = d.videoRobustness), b.audioRobustness || (b.audioRobustness = d.audioRobustness), b.serverCertificate ||
                        (b.serverCertificate = d.serverCertificate);
                window.cast && window.cast.__platform__ && "com.microsoft.playready" == b.keySystem && (b.keySystem = "com.chromecast.playready");
            }
        }
        function uc(b) { return t(function d() { var e; return y(d, function (d) { switch (d.j) {
            case 1: return e = new Promise(function (b) { (new E(b)).L(Tc); }), u(d, Promise.race([b.close().then(function () { return !0; }), e.then(function () { return !1; })]), 2);
            case 2: x(d);
        } }); }); }
        var Tc = 1, Oc = 5, Pc = .5;
        function Uc() { this.a = new muxjs.mp4.CaptionParser; this.g = []; this.f = {}; }
        Uc.prototype.init = function (b) { var c = muxjs.mp4.probe; b = new Uint8Array(b); this.g = c.videoTrackIds(b); this.f = c.timescale(b); this.a.init(); };
        Uc.prototype.b = function (b, c) { var d = new Uint8Array(b); (d = this.a.parse(d, this.g, this.f)) && d.captions && c(d.captions); this.a.clearParsedCaptions(); };
        Uc.prototype.c = function () { this.a.resetCaptionStream(); };
        function Vc() { }
        Vc.prototype.init = function () { };
        Vc.prototype.b = function () { };
        Vc.prototype.c = function () { };
        function Wc(b) { return !b || 1 == b.length && 1E-6 > b.end(0) - b.start(0) ? null : b.length ? b.end(b.length - 1) : null; }
        function Xc(b, c, d) { d = void 0 === d ? 0 : d; return !b || !b.length || 1 == b.length && 1E-6 > b.end(0) - b.start(0) || c > b.end(b.length - 1) ? !1 : c + d >= b.start(0); }
        function Yc(b, c) { if (!b || !b.length || 1 == b.length && 1E-6 > b.end(0) - b.start(0))
            return 0; for (var d = 0, e = b.length - 1; 0 <= e && b.end(e) > c; --e)
            d += b.end(e) - Math.max(b.start(e), c); return d; }
        function Zc(b) { if (!b)
            return []; for (var c = [], d = 0; d < b.length; d++)
            c.push({ start: b.start(d), end: b.end(d) }); return c; }
        ;
        var $c = { xe: function (b, c) { return b.reduce(function (b, c, f) { return c["catch"](b.bind(null, f)); }.bind(null, c), Promise.reject()); }, Lb: function (b, c) { return b.concat(c); }, eb: function () { }, zd: function (b) { return null != b; } };
        function ad(b, c) { if (0 == c.length)
            return b; var d = c.map(function (b) { return new Sa(b); }); return b.map(function (b) { return new Sa(b); }).map(function (b) { return d.map(b.resolve.bind(b)); }).reduce($c.Lb, []).map(function (b) { return b.toString(); }); }
        var bd = { ua: "video", Za: "audio", Z: "text", se: "application" }, cd = 1 / 15;
        function dd() { this.a = new muxjs.mp4.Transmuxer({ keepOriginalTimestamps: !0 }); this.b = null; this.g = []; this.c = []; this.f = !1; this.a.on("data", this.i.bind(this)); this.a.on("done", this.h.bind(this)); }
        dd.prototype.destroy = function () { this.a.dispose(); this.a = null; return Promise.resolve(); };
        function ed(b, c) { return window.muxjs && "mp2t" == b.split(";")[0].split("/")[1] ? c ? MediaSource.isTypeSupported(fd(c, b)) : MediaSource.isTypeSupported(fd("audio", b)) || MediaSource.isTypeSupported(fd("video", b)) : !1; }
        function fd(b, c) { var d = c.replace("mp2t", "mp4"); "audio" == b && (d = d.replace("video", "audio")); var e = /avc1\.(66|77|100)\.(\d+)/.exec(d); if (e) {
            var f = "avc1.", g = e[1], h = Number(e[2]);
            f = ("66" == g ? f + "4200" : "77" == g ? f + "4d00" : f + "6400") + (h >> 4).toString(16);
            f += (h & 15).toString(16);
            d = d.replace(e[0], f);
        } return d; }
        function gd(b, c) { b.f = !0; b.b = new G; b.g = []; b.c = []; var d = new Uint8Array(c); b.a.push(d); b.a.flush(); b.f && b.b.reject(new F(2, 3, 3018)); return b.b; }
        dd.prototype.i = function (b) { this.c = b.captions; var c = new Uint8Array(b.data.byteLength + b.initSegment.byteLength); c.set(b.initSegment, 0); c.set(b.data, b.initSegment.byteLength); this.g.push(c); };
        dd.prototype.h = function () { var b = { data: pc.apply(null, this.g), captions: this.c }; this.b.resolve(b); this.f = !1; };
        function hd(b, c, d) { this.startTime = b; this.direction = id; this.endTime = c; this.payload = d; this.region = new jd; this.position = null; this.positionAlign = kd; this.size = 100; this.textAlign = ld; this.writingMode = md; this.lineInterpretation = nd; this.line = null; this.lineHeight = ""; this.lineAlign = od; this.displayAlign = pd; this.backgroundColor = this.color = ""; this.backgroundImage = null; this.fontSize = ""; this.fontWeight = qd; this.fontStyle = rd; this.fontFamily = ""; this.textDecoration = []; this.wrapLine = !0; this.id = ""; }
        D("shaka.text.Cue", hd);
        var kd = "auto";
        hd.positionAlign = { LEFT: "line-left", RIGHT: "line-right", CENTER: "center", AUTO: kd };
        var ld = "center", sd = { LEFT: "left", RIGHT: "right", CENTER: ld, START: "start", END: "end" };
        hd.textAlign = sd;
        var pd = "after", td = { BEFORE: "before", CENTER: "center", AFTER: pd };
        hd.displayAlign = td;
        var id = "ltr";
        hd.direction = { HORIZONTAL_LEFT_TO_RIGHT: id, HORIZONTAL_RIGHT_TO_LEFT: "rtl" };
        var md = "horizontal-tb";
        hd.writingMode = { HORIZONTAL_TOP_TO_BOTTOM: md, VERTICAL_LEFT_TO_RIGHT: "vertical-lr", VERTICAL_RIGHT_TO_LEFT: "vertical-rl" };
        var nd = 0;
        hd.lineInterpretation = { LINE_NUMBER: nd, PERCENTAGE: 1 };
        var od = "start", ud = { CENTER: "center", START: od, END: "end" };
        hd.lineAlign = ud;
        var qd = 400;
        hd.fontWeight = { NORMAL: qd, BOLD: 700 };
        var rd = "normal", vd = { NORMAL: rd, ITALIC: "italic", OBLIQUE: "oblique" };
        hd.fontStyle = vd;
        hd.textDecoration = { UNDERLINE: "underline", LINE_THROUGH: "lineThrough", OVERLINE: "overline" };
        function jd() { this.id = ""; this.regionAnchorY = this.regionAnchorX = this.viewportAnchorY = this.viewportAnchorX = 0; this.height = this.width = 100; this.viewportAnchorUnits = this.widthUnits = this.heightUnits = wd; this.scroll = xd; }
        D("shaka.text.CueRegion", jd);
        var wd = 1;
        jd.units = { PX: 0, PERCENTAGE: wd, LINES: 2 };
        var xd = "";
        jd.scrollMode = { NONE: xd, UP: "up" };
        function yd(b) { this.g = null; this.c = b; this.f = this.m = 0; this.h = Infinity; this.b = this.a = null; this.l = ""; this.i = new Map; }
        var zd = {};
        D("shaka.text.TextEngine.registerParser", function (b, c) { zd[b] = c; });
        D("shaka.text.TextEngine.unregisterParser", function (b) { delete zd[b]; });
        function Ad(b) { return zd[b] || window.muxjs && "application/cea-608" == b ? !0 : !1; }
        yd.prototype.destroy = function () { this.c = this.g = null; this.i.clear(); return Promise.resolve(); };
        function Bd(b, c) { "application/cea-608" != c && (b.g = new zd[c]); }
        yd.prototype.Ub = function (b) { var c = { periodStart: 0, segmentStart: null, segmentEnd: 0 }; try {
            return this.g.parseMedia(new Uint8Array(b), c)[0].startTime;
        }
        catch (d) {
            throw new F(2, 2, 2009, d);
        } };
        function Cd(b, c, d, e) { return Promise.resolve().then(function () { if (this.g && this.c)
            if (null == d || null == e)
                this.g.parseInit(new Uint8Array(c));
            else {
                var b = { periodStart: this.m, segmentStart: d, segmentEnd: e };
                b = this.g.parseMedia(new Uint8Array(c), b).filter(function (b) { return b.startTime >= this.f && b.startTime < this.h; }.bind(this));
                this.c.append(b);
                null == this.a && (this.a = Math.max(d, this.f));
                this.b = Math.min(e, this.h);
            } }.bind(b)); }
        yd.prototype.remove = function (b, c) { return Promise.resolve().then(function () { !this.c || !this.c.remove(b, c) || null == this.a || c <= this.a || b >= this.b || (b <= this.a && c >= this.b ? this.a = this.b = null : b <= this.a && c < this.b ? this.a = c : b > this.a && c >= this.b && (this.b = b)); }.bind(this)); };
        yd.prototype.Sc = function (b) { this.c.append(b); };
        yd.prototype.appendCues = yd.prototype.Sc;
        yd.prototype.Bb = function (b, c) { this.l = b; var d = this.i.get(b); if (d)
            for (var e = r(d.keys()), f = e.next(); !f.done; f = e.next())
                if (f = d.get(f.value))
                    f = f.filter(function (b) { return b.endTime <= c; }), this.c.append(f); };
        yd.prototype.setSelectedClosedCaptionId = yd.prototype.Bb;
        function Dd(b, c, d, e, f) {
            var g = d + " " + e, h = new Map;
            c = r(c);
            for (var k = c.next(); !k.done; k = c.next()) {
                var l = k.value;
                k = l.stream;
                h.has(k) || h.set(k, new Map);
                h.get(k).has(g) || h.get(k).set(g, []);
                l.startTime += f;
                l.endTime += f;
                l.startTime >= b.f && l.startTime < b.h && (l = new hd(l.startTime, l.endTime, l.text), h.get(k).get(g).push(l), k == b.l && b.c.append([l]));
            }
            f = r(h.keys());
            for (g = f.next(); !g.done; g = f.next())
                for (g = g.value, b.i.has(g) || b.i.set(g, new Map), c = r(h.get(g).keys()), k = c.next(); !k.done; k = c.next())
                    k = k.value, l = h.get(g).get(k),
                        b.i.get(g).set(k, l);
            b.a = null == b.a ? Math.max(d, b.f) : Math.min(b.a, Math.max(d, b.f));
            b.b = Math.max(b.b, Math.min(e, b.h));
        }
        ;
        function Ed(b, c, d) { this.f = b; this.h = d; this.b = {}; this.a = null; this.c = {}; this.i = new Ob; this.u = !1; this.l = {}; this.m = c; b = this.s = new G; c = new MediaSource; Rb(this.i, c, "sourceopen", b.resolve); this.f.src = Hd(c); this.g = c; }
        var Hd = window.URL.createObjectURL;
        function Id(b) { var c = Vb(b.mimeType, b.codecs), d = Wb(b); return Ad(c) || MediaSource.isTypeSupported(d) || ed(c, b.type); }
        n = Ed.prototype;
        n.destroy = function () { var b = this; this.u = !0; var c = [], d; for (d in this.c) {
            var e = this.c[d], f = e[0];
            this.c[d] = e.slice(0, 1);
            f && c.push(f.p["catch"]($c.eb));
            for (f = 1; f < e.length; ++f)
                e[f].p["catch"]($c.eb), e[f].p.reject();
        } this.a && c.push(this.a.destroy()); this.h && c.push(this.h.destroy()); for (var g in this.l)
            c.push(this.l[g].destroy()); return Promise.all(c).then(function () { b.i && (b.i.a(), b.i = null); b.f && (b.f.removeAttribute("src"), b.f.load(), b.f = null); b.g = null; b.a = null; b.h = null; b.b = {}; b.l = {}; b.m = null; b.c = {}; }); };
        n.init = function (b, c) { var d = this; return t(function f() { var g; return y(f, function (f) { switch (f.j) {
            case 1: return g = bd, u(f, d.s, 2);
            case 2: b.forEach(function (b, f) { var h = Vb(b.mimeType, b.codecs); f == g.Z ? Jd(d, h) : (!c && MediaSource.isTypeSupported(h) || !ed(h, f) || (d.l[f] = new dd, h = fd(f, h)), h = d.g.addSourceBuffer(h), K(d.i, h, "error", d.de.bind(d, f)), K(d.i, h, "updateend", d.Va.bind(d, f)), d.b[f] = h, d.c[f] = []); }), x(f);
        } }); }); };
        function Jd(b, c) { b.a || (b.a = new yd(b.h)); Bd(b.a, c); }
        function Kd(b, c) { if ("text" == c)
            var d = b.a.a;
        else
            d = Ld(b, c), d = !d || 1 == d.length && 1E-6 > d.end(0) - d.start(0) ? null : 1 == d.length && 0 > d.start(0) ? 0 : d.length ? d.start(0) : null; return d; }
        function Md(b, c) { return "text" == c ? b.a.b : Wc(Ld(b, c)); }
        function Nd(b, c, d) { if ("text" == c)
            return b = b.a, null == b.b || b.b < d ? 0 : b.b - Math.max(d, b.a); b = Ld(b, c); return Yc(b, d); }
        n.Qb = function (b) { b.total = Zc(this.f.buffered); b.audio = Zc(Ld(this, "audio")); b.video = Zc(Ld(this, "video")); b.text = []; if (this.a) {
            var c = this.a.a, d = this.a.b;
            null != c && null != d && b.text.push({ start: c, end: d });
        } };
        function Ld(b, c) { try {
            return b.b[c].buffered;
        }
        catch (d) {
            return null;
        } }
        function Od(b, c, d, e, f, g) { if ("text" == c)
            return Cd(b.a, d, e, f); if (b.l[c])
            return gd(b.l[c], d).then(function (b) { this.a || Jd(this, "text/vtt"); b.captions && Dd(this.a, b.captions, e, f, this.b.video.timestampOffset); return Pd(this, c, this.Mc.bind(this, c, b.data.buffer)); }.bind(b)); g && window.muxjs && (b.a || Jd(b, "text/vtt"), null == e && null == f ? b.m.init(d) : b.m.b(d, function (c) { c.length && Dd(b.a, c, e, f, b.b.video.timestampOffset); })); return Pd(b, c, b.Mc.bind(b, c, d)); }
        n.Bb = function (b) { var c = Md(this, "video") || 0; this.a.Bb(b, c); };
        n.remove = function (b, c, d) { return "text" == b ? this.a.remove(c, d) : Pd(this, b, this.Hc.bind(this, b, c, d)); };
        function Qd(b, c) { if ("text" == c) {
            if (!b.a)
                return Promise.resolve();
            b.m.c();
            return b.a.remove(0, Infinity);
        } return Pd(b, c, b.Hc.bind(b, c, 0, b.g.duration)); }
        n.flush = function (b) { return "text" == b ? Promise.resolve() : Pd(this, b, this.$c.bind(this, b)); };
        function Rd(b, c, d, e, f) { return "text" == c ? (b.a.m = d, b = b.a, b.f = e, b.h = f, Promise.resolve()) : Promise.all([Pd(b, c, b.Qc.bind(b, c)), Pd(b, c, b.ce.bind(b, c, d)), Pd(b, c, b.Yd.bind(b, c, e, f))]); }
        n.endOfStream = function (b) { return Sd(this, function () { b ? this.g.endOfStream(b) : this.g.endOfStream(); }.bind(this)); };
        n.oa = function (b) { return Sd(this, function () { this.g.duration = b; }.bind(this)); };
        n.R = function () { return this.g.duration; };
        n.Mc = function (b, c) { this.b[b].appendBuffer(c); };
        n.Hc = function (b, c, d) { d <= c ? this.Va(b) : this.b[b].remove(c, d); };
        n.Qc = function (b) { var c = this.b[b].appendWindowStart, d = this.b[b].appendWindowEnd; this.b[b].abort(); this.b[b].appendWindowStart = c; this.b[b].appendWindowEnd = d; this.Va(b); };
        n.$c = function (b) { this.f.currentTime -= .001; this.Va(b); };
        n.ce = function (b, c) { 0 > c && (c += .001); this.b[b].timestampOffset = c; this.Va(b); };
        n.Yd = function (b, c, d) { this.b[b].appendWindowStart = 0; this.b[b].appendWindowEnd = d; this.b[b].appendWindowStart = c; this.Va(b); };
        n.de = function (b) { this.c[b][0].p.reject(new F(2, 3, 3014, this.f.error ? this.f.error.code : 0)); };
        n.Va = function (b) { var c = this.c[b][0]; c && (c.p.resolve(), Td(this, b)); };
        function Pd(b, c, d) { if (b.u)
            return Promise.reject(); d = { start: d, p: new G }; b.c[c].push(d); if (1 == b.c[c].length)
            try {
                d.start();
            }
            catch (e) {
                "QuotaExceededError" == e.name ? d.p.reject(new F(2, 3, 3017, c)) : d.p.reject(new F(2, 3, 3015, e)), Td(b, c);
            } return d.p; }
        function Sd(b, c) { if (b.u)
            return Promise.reject(); var d = [], e; for (e in b.b) {
            var f = new G, g = { start: function (b) { b.resolve(); }.bind(null, f), p: f };
            b.c[e].push(g);
            d.push(f);
            1 == b.c[e].length && g.start();
        } return Promise.all(d).then(function () { try {
            c();
        }
        catch (l) {
            var b = Promise.reject(new F(2, 3, 3015, l));
        } for (var d in this.b)
            Td(this, d); return b; }.bind(b), function () { return Promise.reject(); }.bind(b)); }
        function Td(b, c) { b.c[c].shift(); var d = b.c[c][0]; if (d)
            try {
                d.start();
            }
            catch (e) {
                d.p.reject(new F(2, 3, 3015, e)), Td(b, c);
            } }
        ;
        function Ud(b, c) { b = L(b); c = L(c); return b.split("-")[0] == c.split("-")[0]; }
        function Vd(b, c) { b = L(b); c = L(c); var d = b.split("-"), e = c.split("-"); return d[0] == e[0] && 1 == d.length && 2 == e.length; }
        function L(b) { var c = b.split("-"); b = c[0] || ""; c = c[1] || ""; b = b.toLowerCase(); b = Wd.get(b) || b; return (c = c.toUpperCase()) ? b + "-" + c : b; }
        function Xd(b) { return b.language ? L(b.language) : b.audio && b.audio.language ? L(b.audio.language) : b.video && b.video.language ? L(b.video.language) : "und"; }
        function Yd(b, c) { for (var d = L(b), e = new Set, f = r(c), g = f.next(); !g.done; g = f.next())
            e.add(L(g.value)); f = r(e); for (g = f.next(); !g.done; g = f.next())
            if (g = g.value, g == d)
                return g; f = r(e); for (g = f.next(); !g.done; g = f.next())
            if (g = g.value, Vd(g, d))
                return g; f = r(e); for (g = f.next(); !g.done; g = f.next()) {
            var h = g = g.value, k = d;
            h = L(h);
            k = L(k);
            h = h.split("-");
            k = k.split("-");
            if (2 == h.length && 2 == k.length && h[0] == k[0])
                return g;
        } e = r(e); for (g = e.next(); !g.done; g = e.next())
            if (f = g.value, Vd(d, f))
                return f; return null; }
        var Wd = new Map([["aar", "aa"], ["abk", "ab"], ["afr", "af"], ["aka", "ak"], ["alb", "sq"], ["amh", "am"], ["ara", "ar"], ["arg", "an"], ["arm", "hy"], ["asm", "as"], ["ava", "av"], ["ave", "ae"], ["aym", "ay"], ["aze", "az"], ["bak", "ba"], ["bam", "bm"], ["baq", "eu"], ["bel", "be"], ["ben", "bn"], ["bih", "bh"], ["bis", "bi"], ["bod", "bo"], ["bos", "bs"], ["bre", "br"], ["bul", "bg"], ["bur", "my"], ["cat", "ca"], ["ces", "cs"], ["cha", "ch"], ["che", "ce"], ["chi", "zh"], ["chu", "cu"], ["chv", "cv"], ["cor", "kw"], ["cos", "co"], ["cre", "cr"], ["cym", "cy"], ["cze",
                "cs"], ["dan", "da"], ["deu", "de"], ["div", "dv"], ["dut", "nl"], ["dzo", "dz"], ["ell", "el"], ["eng", "en"], ["epo", "eo"], ["est", "et"], ["eus", "eu"], ["ewe", "ee"], ["fao", "fo"], ["fas", "fa"], ["fij", "fj"], ["fin", "fi"], ["fra", "fr"], ["fre", "fr"], ["fry", "fy"], ["ful", "ff"], ["geo", "ka"], ["ger", "de"], ["gla", "gd"], ["gle", "ga"], ["glg", "gl"], ["glv", "gv"], ["gre", "el"], ["grn", "gn"], ["guj", "gu"], ["hat", "ht"], ["hau", "ha"], ["heb", "he"], ["her", "hz"], ["hin", "hi"], ["hmo", "ho"], ["hrv", "hr"], ["hun", "hu"], ["hye", "hy"], ["ibo", "ig"], ["ice",
                "is"], ["ido", "io"], ["iii", "ii"], ["iku", "iu"], ["ile", "ie"], ["ina", "ia"], ["ind", "id"], ["ipk", "ik"], ["isl", "is"], ["ita", "it"], ["jav", "jv"], ["jpn", "ja"], ["kal", "kl"], ["kan", "kn"], ["kas", "ks"], ["kat", "ka"], ["kau", "kr"], ["kaz", "kk"], ["khm", "km"], ["kik", "ki"], ["kin", "rw"], ["kir", "ky"], ["kom", "kv"], ["kon", "kg"], ["kor", "ko"], ["kua", "kj"], ["kur", "ku"], ["lao", "lo"], ["lat", "la"], ["lav", "lv"], ["lim", "li"], ["lin", "ln"], ["lit", "lt"], ["ltz", "lb"], ["lub", "lu"], ["lug", "lg"], ["mac", "mk"], ["mah", "mh"], ["mal", "ml"], ["mao",
                "mi"], ["mar", "mr"], ["may", "ms"], ["mkd", "mk"], ["mlg", "mg"], ["mlt", "mt"], ["mon", "mn"], ["mri", "mi"], ["msa", "ms"], ["mya", "my"], ["nau", "na"], ["nav", "nv"], ["nbl", "nr"], ["nde", "nd"], ["ndo", "ng"], ["nep", "ne"], ["nld", "nl"], ["nno", "nn"], ["nob", "nb"], ["nor", "no"], ["nya", "ny"], ["oci", "oc"], ["oji", "oj"], ["ori", "or"], ["orm", "om"], ["oss", "os"], ["pan", "pa"], ["per", "fa"], ["pli", "pi"], ["pol", "pl"], ["por", "pt"], ["pus", "ps"], ["que", "qu"], ["roh", "rm"], ["ron", "ro"], ["rum", "ro"], ["run", "rn"], ["rus", "ru"], ["sag", "sg"], ["san",
                "sa"], ["sin", "si"], ["slk", "sk"], ["slo", "sk"], ["slv", "sl"], ["sme", "se"], ["smo", "sm"], ["sna", "sn"], ["snd", "sd"], ["som", "so"], ["sot", "st"], ["spa", "es"], ["sqi", "sq"], ["srd", "sc"], ["srp", "sr"], ["ssw", "ss"], ["sun", "su"], ["swa", "sw"], ["swe", "sv"], ["tah", "ty"], ["tam", "ta"], ["tat", "tt"], ["tel", "te"], ["tgk", "tg"], ["tgl", "tl"], ["tha", "th"], ["tib", "bo"], ["tir", "ti"], ["ton", "to"], ["tsn", "tn"], ["tso", "ts"], ["tuk", "tk"], ["tur", "tr"], ["twi", "tw"], ["uig", "ug"], ["ukr", "uk"], ["urd", "ur"], ["uzb", "uz"], ["ven", "ve"], ["vie",
                "vi"], ["vol", "vo"], ["wel", "cy"], ["wln", "wa"], ["wol", "wo"], ["xho", "xh"], ["yid", "yi"], ["yor", "yo"], ["zha", "za"], ["zho", "zh"], ["zul", "zu"]]);
        function Zd(b, c, d) { function e(b, c, d) { return b >= c && b <= d; } var f = b.video; return f && f.width && f.height && !(e(f.width, c.minWidth, Math.min(c.maxWidth, d.width)) && e(f.height, c.minHeight, Math.min(c.maxHeight, d.height)) && e(f.width * f.height, c.minPixels, c.maxPixels)) || !e(b.bandwidth, c.minBandwidth, c.maxBandwidth) ? !1 : !0; }
        function $d(b, c, d) { var e = !1; b.forEach(function (b) { var f = b.allowedByApplication; b.allowedByApplication = Zd(b, c, d); f != b.allowedByApplication && (e = !0); }); return e; }
        function ae(b, c, d, e) { e.variants = e.variants.filter(function (e) { if (b && b.J && !Rc(b, e))
            return !1; var f = e.audio; e = e.video; return f && !Id(f) || e && !Id(e) || f && c && !be(f, c) || e && d && !be(e, d) ? !1 : !0; }); e.textStreams = e.textStreams.filter(function (b) { return Ad(Vb(b.mimeType, b.codecs)); }); }
        function be(b, c) { return b.mimeType != c.mimeType || b.codecs.split(".")[0] != c.codecs.split(".")[0] ? !1 : !0; }
        function ce(b) {
            var c = b.audio, d = b.video, e = c ? c.codecs : null, f = d ? d.codecs : null, g = [];
            f && g.push(f);
            e && g.push(e);
            var h = [];
            d && h.push(d.mimeType);
            c && h.push(c.mimeType);
            h = h[0] || null;
            var k = [];
            c && k.push(c.kind);
            d && k.push(d.kind);
            k = k[0] || null;
            var l = new Set;
            c && c.roles.forEach(function (b) { return l.add(b); });
            d && d.roles.forEach(function (b) { return l.add(b); });
            b = { id: b.id, active: !1, type: "variant", bandwidth: b.bandwidth, language: b.language, label: null, kind: k, width: null, height: null, frameRate: null, mimeType: h, codecs: g.join(", "),
                audioCodec: e, videoCodec: f, primary: b.primary, roles: Array.from(l), audioRoles: null, videoId: null, audioId: null, channelsCount: null, audioBandwidth: null, videoBandwidth: null, originalVideoId: null, originalAudioId: null, originalTextId: null };
            d && (b.videoId = d.id, b.originalVideoId = d.originalId, b.width = d.width || null, b.height = d.height || null, b.frameRate = d.frameRate || null, b.videoBandwidth = d.bandwidth || null);
            c && (b.audioId = c.id, b.originalAudioId = c.originalId, b.channelsCount = c.channelsCount, b.audioBandwidth = c.bandwidth ||
                null, b.label = c.label, b.audioRoles = c.roles);
            return b;
        }
        function de(b) { return { id: b.id, active: !1, type: "text", bandwidth: 0, language: b.language, label: b.label, kind: b.kind || null, width: null, height: null, frameRate: null, mimeType: b.mimeType, codecs: b.codecs || null, audioCodec: null, videoCodec: null, primary: b.primary, roles: b.roles, audioRoles: null, videoId: null, audioId: null, channelsCount: null, audioBandwidth: null, videoBandwidth: null, originalVideoId: null, originalAudioId: null, originalTextId: b.originalId }; }
        function ee(b) { b.__shaka_id || (b.__shaka_id = fe++); return b.__shaka_id; }
        var fe = 0;
        function ge(b) { return { id: ee(b), active: !1, type: "", bandwidth: 0, language: L(b.language), label: b.label, kind: b.kind, width: null, height: null, frameRate: null, mimeType: null, codecs: null, audioCodec: null, videoCodec: null, primary: !1, roles: [], audioRoles: null, videoId: null, audioId: null, channelsCount: null, audioBandwidth: null, videoBandwidth: null, originalVideoId: null, originalAudioId: null, originalTextId: null }; }
        function he(b) { return b.allowedByApplication && b.allowedByKeySystem; }
        function ie(b, c) { var d = b.filter(function (b) { return b.audio && b.audio.channelsCount; }), e = new Map; d = r(d); for (var f = d.next(); !f.done; f = d.next()) {
            f = f.value;
            var g = f.audio.channelsCount;
            e.has(g) || e.set(g, []);
            e.get(g).push(f);
        } d = Array.from(e.keys()); if (0 == d.length)
            return b; f = d.filter(function (b) { return b <= c; }); return f.length ? e.get(Math.max.apply(null, f)) : e.get(Math.min.apply(null, d)); }
        function je(b, c, d) { var e = b, f = b.filter(function (b) { return b.primary; }); f.length && (e = f); var g = e.length ? e[0].language : ""; e = e.filter(function (b) { return b.language == g; }); if (c) {
            var h = Yd(L(c), b.map(function (b) { return b.language; }));
            h && (e = b.filter(function (b) { return L(b.language) == h; }));
        } if (d) {
            if (b = ke(e, d), b.length)
                return b;
        }
        else if (b = e.filter(function (b) { return 0 == b.roles.length; }), b.length)
            return b; b = e.map(function (b) { return b.roles; }).reduce($c.Lb, []); return b.length ? ke(e, b[0]) : e; }
        function ke(b, c) { return b.filter(function (b) { return b.roles.includes(c); }); }
        function le(b, c, d) { for (var e = 0; e < d.length; e++)
            if (d[e].audio == b && d[e].video == c)
                return d[e]; return null; }
        function me(b) { var c = []; b.audio && c.push(b.audio); b.video && c.push(b.video); return c; }
        ;
        function M() { this.h = null; this.f = !1; this.b = new Na; this.c = []; this.i = !1; this.a = this.g = null; }
        D("shaka.abr.SimpleAbrManager", M);
        M.prototype.stop = function () { this.h = null; this.f = !1; this.c = []; this.g = null; };
        M.prototype.stop = M.prototype.stop;
        M.prototype.init = function (b) { this.h = b; };
        M.prototype.init = M.prototype.init;
        M.prototype.chooseVariant = function () { var b = ne(this.a.restrictions, this.c), c = this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate); this.c.length && !b.length && (b = ne(null, this.c), b = [b[0]]); for (var d = b[0] || null, e = 0; e < b.length; ++e) {
            var f = b[e], g = (b[e + 1] || { bandwidth: Infinity }).bandwidth / this.a.bandwidthUpgradeTarget;
            c >= f.bandwidth / this.a.bandwidthDowngradeTarget && c <= g && (d = f);
        } this.g = Date.now(); return d; };
        M.prototype.chooseVariant = M.prototype.chooseVariant;
        M.prototype.enable = function () { this.f = !0; };
        M.prototype.enable = M.prototype.enable;
        M.prototype.disable = function () { this.f = !1; };
        M.prototype.disable = M.prototype.disable;
        M.prototype.segmentDownloaded = function (b, c) { var d = this.b; if (!(16E3 > c)) {
            var e = 8E3 * c / b, f = b / 1E3;
            d.a += c;
            La(d.b, f, e);
            La(d.c, f, e);
        } if (null != this.g && this.f)
            a: {
                if (!this.i) {
                    if (!(128E3 <= this.b.a))
                        break a;
                    this.i = !0;
                }
                else if (Date.now() - this.g < 1E3 * this.a.switchInterval)
                    break a;
                d = this.chooseVariant();
                this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);
                this.h(d);
            } };
        M.prototype.segmentDownloaded = M.prototype.segmentDownloaded;
        M.prototype.getBandwidthEstimate = function () { return this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate); };
        M.prototype.getBandwidthEstimate = M.prototype.getBandwidthEstimate;
        M.prototype.setVariants = function (b) { this.c = b; };
        M.prototype.setVariants = M.prototype.setVariants;
        M.prototype.configure = function (b) { this.a = b; };
        M.prototype.configure = M.prototype.configure;
        function ne(b, c) { b && (c = c.filter(function (c) { return Zd(c, b, { width: Infinity, height: Infinity }); })); return c.sort(function (b, c) { return b.bandwidth - c.bandwidth; }); }
        ;
        function oe(b, c) { this.a = b; this.b = c; }
        oe.prototype.toString = function () { return "v" + this.a + "." + this.b; };
        function pe(b, c) { var d = new oe(2, 6), e = qe, f = e.a, g = d.b - f.b; (0 < (d.a - f.a || g) ? e.c : e.b)(e.a, d, b, c); }
        function re(b, c, d, e) { Qa([d, "has been deprecated and will be removed in", c, ". We are currently at version", b, ". Additional information:", e].join(" ")); }
        function se(b, c, d, e) { Oa([d, "has been deprecated and has been removed in", c, ". We are now at version", b, ". Additional information:", e].join("")); }
        var qe = null;
        function te(b, c, d, e) { this.b = b; this.type = c; this.a = d; this.segments = e || null; }
        function ue(b, c, d, e) { this.id = b; this.name = c; this.a = d; this.value = void 0 === e ? null : e; }
        ue.prototype.toString = function () { function b(b) { return b.name + "=" + (isNaN(Number(b.value)) ? '"' + b.value + '"' : b.value); } var c = "#" + this.name, d = this.a ? this.a.map(b) : []; this.value && d.unshift(this.value); 0 < d.length && (c += ":" + d.join(",")); return c; };
        function ve(b, c) { this.name = b; this.value = c; }
        function we(b, c) { var d = b.a.filter(function (b) { return b.name == c; }); return d.length ? d[0] : null; }
        function xe(b, c, d) { return (b = we(b, c)) ? b.value : d || null; }
        function ye(b, c) { this.b = c; this.a = b; }
        ;
        var ze = { Oa: function (b, c) { return b.filter(function (b) { return b.name == c; }); }, ya: function (b, c) { var d = ze.Oa(b, c); return d.length ? d[0] : null; }, Pb: function (b, c, d) { return b.filter(function (b) { var e = we(b, "TYPE"); b = we(b, "GROUP-ID"); return e.value == c && b.value == d; }); }, Mb: function (b, c) { return ad([b], [c])[0]; }, Wb: function (b) { return /^#(?!EXT)/m.test(b); } };
        function Ae(b) { this.b = b; this.a = 0; }
        function Be(b) { Ce(b, /[ \t]+/gm); }
        function Ce(b, c) { c.lastIndex = b.a; var d = c.exec(b.b); d = null == d ? null : { position: d.index, length: d[0].length, Sd: d }; if (b.a == b.b.length || null == d || d.position != b.a)
            return null; b.a += d.length; return d.Sd; }
        function De(b) { return b.a == b.b.length ? null : (b = Ce(b, /[^ \t\n]*/gm)) ? b[0] : null; }
        ;
        function Ee() { this.a = 0; }
        function Fe(b, c, d) {
            c = ec(c);
            c = c.replace(/\r\n|\r(?=[^\n]|$)/gm, "\n").trim();
            var e = c.split(/\n+/m);
            if (!/^#EXTM3U($|[ \t\n])/m.test(e[0]))
                throw new F(2, 4, 4015);
            c = 0;
            for (var f = 1; f < e.length; f++)
                if (!ze.Wb(e[f])) {
                    var g = Ge(b, e[f]);
                    --b.a;
                    if (He.includes(g.name)) {
                        c = 1;
                        break;
                    }
                    else
                        "EXT-X-STREAM-INF" == g.name && (f += 1);
                }
            f = [];
            for (g = 1; g < e.length;)
                if (ze.Wb(e[g]))
                    g += 1;
                else {
                    var h = Ge(b, e[g]);
                    if (Ie.includes(h.name)) {
                        if (1 != c)
                            throw new F(2, 4, 4017);
                        e = e.splice(g, e.length - g);
                        b = Je(b, d, e, f);
                        return new te(d, c, f, b);
                    }
                    f.push(h);
                    g += 1;
                    "EXT-X-STREAM-INF" ==
                        h.name && (h.a.push(new ve("URI", e[g])), g += 1);
                }
            return new te(d, c, f);
        }
        function Je(b, c, d, e) { var f = [], g = []; d.forEach(function (d) { if (/^(#EXT)/.test(d))
            d = Ge(b, d), He.includes(d.name) ? e.push(d) : g.push(d);
        else {
            if (ze.Wb(d))
                return [];
            d = ze.Mb(c, d.trim());
            f.push(new ye(d, g));
            g = [];
        } }); return f; }
        function Ge(b, c) { var d = b.a++, e = c.match(/^#(EXT[^:]*)(?::(.*))?$/); if (!e)
            throw new F(2, 4, 4016, c); var f = e[1], g = e[2]; e = []; var h; if (g) {
            g = new Ae(g);
            var k;
            (k = Ce(g, /^([^,=]+)(?:,|$)/g)) && (h = k[1]);
            for (var l = /([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g; k = Ce(g, l);)
                e.push(new ve(k[1], k[2] || k[3]));
        } return new ue(d, f, e, h); }
        var He = "EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "), Ie = "EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");
        function Ke(b, c, d) { this.c = b; this.b = c; this.a = d; }
        D("shaka.media.InitSegmentReference", Ke);
        Ke.prototype.Nb = function () { return this.c(); };
        Ke.prototype.createUris = Ke.prototype.Nb;
        Ke.prototype.Tb = function () { return this.b; };
        Ke.prototype.getStartByte = Ke.prototype.Tb;
        Ke.prototype.Rb = function () { return this.a; };
        Ke.prototype.getEndByte = Ke.prototype.Rb;
        function N(b, c, d, e, f, g) { this.position = b; this.startTime = c; this.endTime = d; this.c = e; this.b = f; this.a = g; }
        D("shaka.media.SegmentReference", N);
        N.prototype.ba = function () { return this.position; };
        N.prototype.getPosition = N.prototype.ba;
        N.prototype.Ub = function () { return this.startTime; };
        N.prototype.getStartTime = N.prototype.Ub;
        N.prototype.ed = function () { return this.endTime; };
        N.prototype.getEndTime = N.prototype.ed;
        N.prototype.Nb = function () { return this.c(); };
        N.prototype.createUris = N.prototype.Nb;
        N.prototype.Tb = function () { return this.b; };
        N.prototype.getStartByte = N.prototype.Tb;
        N.prototype.Rb = function () { return this.a; };
        N.prototype.getEndByte = N.prototype.Rb;
        var O = { Wa: {}, gb: {}, Gc: function (b, c) { O.gb[b] = c; } };
        D("shaka.media.ManifestParser.registerParserByExtension", O.Gc);
        O.cc = function (b, c) { O.Wa[b] = c; };
        D("shaka.media.ManifestParser.registerParserByMime", O.cc);
        O.Od = function () { var b = {}; if (Zb()) {
            for (var c in O.Wa)
                b[c] = !0;
            for (var d in O.gb)
                b[d] = !0;
        } c = { mpd: "application/dash+xml", m3u8: "application/x-mpegurl", ism: "application/vnd.ms-sstr+xml" }; d = r(["application/dash+xml", "application/x-mpegurl", "application/vnd.apple.mpegurl", "application/vnd.ms-sstr+xml"]); for (var e = d.next(); !e.done; e = d.next())
            e = e.value, b[e] = Zb() ? !!O.Wa[e] : $b(e); for (var f in c)
            b[f] = Zb() ? !!O.gb[f] : $b(c[f]); return b; };
        O.create = function (b, c, d, e) { return t(function g() { var h, k; return y(g, function (g) { switch (g.j) {
            case 1: return g.P = 2, u(g, O.fd(b, c, d, e), 4);
            case 4: return h = g.w, g["return"](new h);
            case 2: throw k = ya(g), k.severity = 2, k;
        } }); }); };
        O.fd = function (b, c, d, e) { return t(function g() { var h, k, l, m, p; return y(g, function (g) { switch (g.j) {
            case 1:
                h = O;
                if (e && (k = h.Wa[e.toLowerCase()]))
                    return g["return"](k);
                if (l = h.getExtension(b))
                    if (m = h.gb[l])
                        return g["return"](m);
                if (e) {
                    g.j = 2;
                    break;
                }
                return u(g, h.nd(b, c, d), 3);
            case 3: if (e = g.w)
                if (p = O.Wa[e])
                    return g["return"](p);
            case 2: throw new F(2, 4, 4E3, b);
        } }); }); };
        O.nd = function (b, c, d) { return t(function f() { var g, h, k; return y(f, function (f) { switch (f.j) {
            case 1: return g = Fb([b], d), g.method = "HEAD", u(f, c.request(0, g).promise, 2);
            case 2: return h = f.w, k = h.headers["content-type"], f["return"](k ? k.toLowerCase() : "");
        } }); }); };
        O.getExtension = function (b) { b = (new Sa(b)).U.split("/").pop().split("."); return 1 == b.length ? "" : b.pop().toLowerCase(); };
        O.isSupported = function (b, c) { return Zb() ? c in O.Wa || O.getExtension(b) in O.gb ? !0 : !1 : !1; };
        function P(b, c, d) { this.f = b; this.yb = c; this.h = this.g = Infinity; this.a = 1; this.b = this.c = null; this.l = 0; this.m = !0; this.i = 0; this.s = void 0 === d ? !0 : d; }
        D("shaka.media.PresentationTimeline", P);
        P.prototype.R = function () { return this.g; };
        P.prototype.getDuration = P.prototype.R;
        P.prototype.oa = function (b) { this.g = b; };
        P.prototype.setDuration = P.prototype.oa;
        P.prototype.sd = function () { return this.f; };
        P.prototype.getPresentationStartTime = P.prototype.sd;
        P.prototype.Zd = function (b) { this.l = b; };
        P.prototype.setClockOffset = P.prototype.Zd;
        P.prototype.Cb = function (b) { this.m = b; };
        P.prototype.setStatic = P.prototype.Cb;
        P.prototype.Kc = function (b) { this.h = b; };
        P.prototype.setSegmentAvailabilityDuration = P.prototype.Kc;
        P.prototype.$d = function (b) { this.yb = b; };
        P.prototype.setDelay = P.prototype.$d;
        P.prototype.dd = function () { return this.yb; };
        P.prototype.getDelay = P.prototype.dd;
        P.prototype.yc = function (b, c) { if (0 != b.length) {
            var d = b[b.length - 1].endTime + c;
            this.xc(b[0].startTime + c);
            this.a = b.reduce(function (b, c) { return Math.max(b, c.endTime - c.startTime); }, this.a);
            this.b = Math.max(this.b, d);
            null != this.f && this.s && (this.f = (Date.now() + this.l) / 1E3 - this.b - this.a);
        } };
        P.prototype.notifySegments = P.prototype.yc;
        P.prototype.xc = function (b) { this.c = null == this.c ? b : Math.min(this.c, b); };
        P.prototype.notifyMinSegmentStartTime = P.prototype.xc;
        P.prototype.Bd = function (b) { this.a = Math.max(this.a, b); };
        P.prototype.notifyMaxSegmentDuration = P.prototype.Bd;
        P.prototype.offset = function (b) { null != this.c && (this.c += b); null != this.b && (this.b += b); };
        P.prototype.offset = P.prototype.offset;
        P.prototype.S = function () { return Infinity == this.g && !this.m; };
        P.prototype.isLive = P.prototype.S;
        P.prototype.Sa = function () { return Infinity != this.g && !this.m; };
        P.prototype.isInProgress = P.prototype.Sa;
        P.prototype.tc = function () { return Infinity == this.h ? this.i : Math.max(this.i, this.Qa() - this.h); };
        P.prototype.getSegmentAvailabilityStart = P.prototype.tc;
        P.prototype.Lc = function (b) { this.i = b; };
        P.prototype.setUserSeekStart = P.prototype.Lc;
        P.prototype.Qa = function () { return this.S() || this.Sa() ? Math.min(Math.max(0, (Date.now() + this.l) / 1E3 - this.a - this.f), this.g) : this.g; };
        P.prototype.getSegmentAvailabilityEnd = P.prototype.Qa;
        P.prototype.bb = function (b) { var c = Math.max(this.c, this.i); return Infinity == this.h ? c : Math.max(c, Math.min(this.Qa() - this.h + b, this.ga())); };
        P.prototype.getSafeSeekRangeStart = P.prototype.bb;
        P.prototype.Pa = function () { return this.bb(0); };
        P.prototype.getSeekRangeStart = P.prototype.Pa;
        P.prototype.ga = function () { return Math.max(0, this.Qa() - (this.S() || this.Sa() ? this.yb : 0)); };
        P.prototype.getSeekRangeEnd = P.prototype.ga;
        P.prototype.re = function () { return null == this.f || null != this.b ? !1 : !0; };
        P.prototype.usingPresentationStartTime = P.prototype.re;
        function Q(b) { this.a = b; }
        D("shaka.media.SegmentIndex", Q);
        Q.prototype.destroy = function () { this.a = null; return Promise.resolve(); };
        Q.prototype.destroy = Q.prototype.destroy;
        Q.prototype.find = function (b) { for (var c = this.a.length - 1; 0 <= c; --c) {
            var d = this.a[c];
            if (b >= d.startTime && b < d.endTime)
                return d.position;
        } return this.a.length && b < this.a[0].startTime ? this.a[0].position : null; };
        Q.prototype.find = Q.prototype.find;
        Q.prototype.get = function (b) { if (0 == this.a.length)
            return null; b -= this.a[0].position; return 0 > b || b >= this.a.length ? null : this.a[b]; };
        Q.prototype.get = Q.prototype.get;
        Q.prototype.offset = function (b) { for (var c = 0; c < this.a.length; ++c)
            this.a[c].startTime += b, this.a[c].endTime += b; };
        Q.prototype.offset = Q.prototype.offset;
        Q.prototype.Ad = function (b) { for (var c = [], d = 0, e = 0; d < this.a.length && e < b.length;) {
            var f = this.a[d], g = b[e];
            f.startTime < g.startTime ? (c.push(f), d++) : (f.startTime > g.startTime ? 0 == d && c.push(g) : (.1 < Math.abs(f.endTime - g.endTime) ? c.push(new N(f.position, g.startTime, g.endTime, g.c, g.b, g.a)) : c.push(f), d++), e++);
        } for (; d < this.a.length;)
            c.push(this.a[d++]); if (c.length)
            for (d = c[c.length - 1].position + 1; e < b.length;)
                f = b[e++], f = new N(d++, f.startTime, f.endTime, f.c, f.b, f.a), c.push(f);
        else
            c = b; this.a = c; };
        Q.prototype.merge = Q.prototype.Ad;
        Q.prototype.Zc = function (b) { for (var c = 0; c < this.a.length; ++c)
            if (this.a[c].endTime > b) {
                this.a.splice(0, c);
                return;
            } this.a = []; };
        Q.prototype.evict = Q.prototype.Zc;
        function Le(b) { try {
            var c = Le.parse(b);
            return rb({ uri: b, data: c.data, headers: { "content-type": c.contentType } });
        }
        catch (d) {
            return kb(d);
        } }
        D("shaka.net.DataUriPlugin", Le);
        Le.parse = function (b) { var c = b.split(":"); if (2 > c.length || "data" != c[0])
            throw new F(2, 1, 1004, b); c = c.slice(1).join(":").split(","); if (2 > c.length)
            throw new F(2, 1, 1004, b); var d = c[0]; c = window.decodeURIComponent(c.slice(1).join(",")); d = d.split(";"); var e = null; 1 < d.length && (e = d[1]); if ("base64" == e)
            b = lc(c).buffer;
        else {
            if (e)
                throw new F(2, 1, 1005, b);
            b = ic(c);
        } return { data: b, contentType: d[0] }; };
        Eb("data", Le);
        function S(b, c) { this.C = b; this.b = c == Me; this.a = 0; }
        D("shaka.util.DataViewReader", S);
        var Me = 1;
        S.Endianness = { te: 0, ue: Me };
        S.prototype.rb = function () { return this.a < this.C.byteLength; };
        S.prototype.hasMoreData = S.prototype.rb;
        S.prototype.ba = function () { return this.a; };
        S.prototype.getPosition = S.prototype.ba;
        S.prototype.gd = function () { return this.C.byteLength; };
        S.prototype.getLength = S.prototype.gd;
        S.prototype.da = function () { try {
            var b = this.C.getUint8(this.a);
            this.a += 1;
            return b;
        }
        catch (c) {
            Ne();
        } };
        S.prototype.readUint8 = S.prototype.da;
        S.prototype.zb = function () { try {
            var b = this.C.getUint16(this.a, this.b);
            this.a += 2;
            return b;
        }
        catch (c) {
            Ne();
        } };
        S.prototype.readUint16 = S.prototype.zb;
        S.prototype.D = function () { try {
            var b = this.C.getUint32(this.a, this.b);
            this.a += 4;
            return b;
        }
        catch (c) {
            Ne();
        } };
        S.prototype.readUint32 = S.prototype.D;
        S.prototype.Fc = function () { try {
            var b = this.C.getInt32(this.a, this.b);
            this.a += 4;
            return b;
        }
        catch (c) {
            Ne();
        } };
        S.prototype.readInt32 = S.prototype.Fc;
        S.prototype.Ab = function () { try {
            if (this.b) {
                var b = this.C.getUint32(this.a, !0);
                var c = this.C.getUint32(this.a + 4, !0);
            }
            else
                c = this.C.getUint32(this.a, !1), b = this.C.getUint32(this.a + 4, !1);
        }
        catch (d) {
            Ne();
        } if (2097151 < c)
            throw new F(2, 3, 3001); this.a += 8; return c * Math.pow(2, 32) + b; };
        S.prototype.readUint64 = S.prototype.Ab;
        S.prototype.Da = function (b) { this.a + b > this.C.byteLength && Ne(); var c = new Uint8Array(this.C.buffer, this.C.byteOffset + this.a, b); this.a += b; return new Uint8Array(c); };
        S.prototype.readBytes = S.prototype.Da;
        S.prototype.I = function (b) { this.a + b > this.C.byteLength && Ne(); this.a += b; };
        S.prototype.skip = S.prototype.I;
        S.prototype.Jc = function (b) { this.a < b && Ne(); this.a -= b; };
        S.prototype.rewind = S.prototype.Jc;
        S.prototype.seek = function (b) { (0 > b || b > this.C.byteLength) && Ne(); this.a = b; };
        S.prototype.seek = S.prototype.seek;
        S.prototype.ac = function () { for (var b = this.a; this.rb() && 0 != this.C.getUint8(this.a);)
            this.a += 1; b = new Uint8Array(this.C.buffer, this.C.byteOffset + b, this.a - b); this.a += 1; return ec(b); };
        S.prototype.readTerminatedString = S.prototype.ac;
        function Ne() { throw new F(2, 3, 3E3); }
        ;
        function T() { this.c = []; this.b = []; this.a = !1; }
        D("shaka.util.Mp4Parser", T);
        T.prototype.A = function (b, c) { var d = Oe(b); this.c[d] = 0; this.b[d] = c; return this; };
        T.prototype.box = T.prototype.A;
        T.prototype.X = function (b, c) { var d = Oe(b); this.c[d] = 1; this.b[d] = c; return this; };
        T.prototype.fullBox = T.prototype.X;
        T.prototype.stop = function () { this.a = !0; };
        T.prototype.stop = T.prototype.stop;
        T.prototype.parse = function (b, c) { var d = new Uint8Array(b); d = new S(new DataView(d.buffer, d.byteOffset, d.byteLength), 0); for (this.a = !1; d.rb() && !this.a;)
            this.xb(0, d, c); };
        T.prototype.parse = T.prototype.parse;
        T.prototype.xb = function (b, c, d) { var e = c.ba(), f = c.D(), g = c.D(); switch (f) {
            case 0:
                f = c.C.byteLength - e;
                break;
            case 1: f = c.Ab();
        } var h = this.b[g]; if (h) {
            var k = null, l = null;
            1 == this.c[g] && (l = c.D(), k = l >>> 24, l &= 16777215);
            g = e + f;
            d && g > c.C.byteLength && (g = c.C.byteLength);
            g -= c.ba();
            c = 0 < g ? c.Da(g) : new Uint8Array(0);
            c = new S(new DataView(c.buffer, c.byteOffset, c.byteLength), 0);
            h({ parser: this, partialOkay: d || !1, version: k, flags: l, reader: c, size: f, start: e + b });
        }
        else
            c.I(Math.min(e + f - c.ba(), c.C.byteLength - c.ba())); };
        T.prototype.parseNext = T.prototype.xb;
        function U(b) { for (; b.reader.rb() && !b.parser.a;)
            b.parser.xb(b.start, b.reader, b.partialOkay); }
        T.children = U;
        function Pe(b) { for (var c = b.reader.D(); 0 < c && !b.parser.a; --c)
            b.parser.xb(b.start, b.reader, b.partialOkay); }
        T.sampleDescription = Pe;
        function Qe(b) { return function (c) { b(c.reader.Da(c.reader.C.byteLength - c.reader.ba())); }; }
        T.allData = Qe;
        function Oe(b) { for (var c = 0, d = 0; d < b.length; d++)
            c = c << 8 | b.charCodeAt(d); return c; }
        function Re(b) { return String.fromCharCode(b >> 24 & 255, b >> 16 & 255, b >> 8 & 255, b & 255); }
        T.typeToString = Re;
        function Se(b, c, d, e) { b = Fb(b, e); if (0 != c || null != d)
            b.headers.Range = d ? "bytes=" + c + "-" + d : "bytes=" + c + "-"; return b; }
        ;
        function Te() { var b = this; this.c = this.g = null; this.N = 1; this.B = new Map; this.K = new Set; this.a = new Map; this.b = null; this.u = ""; this.s = new Ee; this.J = 0; this.h = new E(function () { Ue(b); }); this.f = Ve; this.m = null; this.v = 0; this.G = Infinity; this.i = new Ab; this.H = []; this.l = new Map; this.M = !1; }
        D("shaka.hls.HlsParser", Te);
        n = Te.prototype;
        n.configure = function (b) { this.c = b; };
        n.start = function (b, c) { var d = this; return t(function f() { var g, h; return y(f, function (f) { switch (f.j) {
            case 1: return d.g = c, u(f, We(d, b), 2);
            case 2: return g = f.w, d.u = g.uri, u(f, Xe(d, g.data), 3);
            case 3: return h = d.J, 0 < h && d.h.L(h), f["return"](d.m);
        } }); }); };
        n.stop = function () { this.h && (this.h.stop(), this.h = null); var b = []; this.i && (b.push(this.i.destroy()), this.i = null); this.c = this.g = null; this.B.clear(); this.K.clear(); this.a.clear(); this.m = null; return Promise.all(b); };
        n.update = function () { if (this.f != Ye.va) {
            for (var b = [], c = r(this.a.values()), d = c.next(); !d.done; d = c.next())
                b.push(Ze(this, d.value));
            return Promise.all(b);
        } };
        function Ze(b, c) { return t(function e() { var f, g, h, k, l, m, p, q, v, w, B; return y(e, function (e) { switch (e.j) {
            case 1: return f = ze, g = Ye, h = c.Rc, u(e, We(b, h), 2);
            case 2:
                k = e.w;
                l = Fe(b.s, k.data, k.uri);
                if (1 != l.type)
                    throw new F(2, 4, 4017);
                p = (m = f.ya(l.a, "EXT-X-MEDIA-SEQUENCE")) ? Number(m.value) : 0;
                q = c.stream;
                return u(e, $e(b, c.Db, l, p, q.mimeType, q.codecs), 3);
            case 3:
                v = e.w;
                c.hb.a = v;
                w = v[v.length - 1];
                if (B = f.ya(l.a, "EXT-X-ENDLIST"))
                    af(b, g.va), b.b.oa(w.endTime);
                x(e);
        } }); }); }
        n.onExpirationUpdated = function () { };
        function Xe(b, c) {
            return t(function e() {
                var f, g, h, k, l, m, p, q, v, w, B;
                return y(e, function (e) {
                    switch (e.j) {
                        case 1:
                            f = Fe(b.s, c, b.u);
                            if (0 != f.type)
                                throw new F(2, 4, 4022);
                            return u(e, bf(b, f), 2);
                        case 2:
                            g = e.w;
                            if (!b.g)
                                throw new F(2, 7, 7001);
                            if (b.M && 0 == g.variants.length)
                                throw new F(2, 4, 4034);
                            b.g.filterAllPeriods([g]);
                            h = Infinity;
                            k = 0;
                            l = Infinity;
                            for (var C = r(b.a.values()), A = C.next(); !A.done; A = C.next())
                                m = A.value, h = Math.min(h, m.Yb), k = Math.max(k, m.Yb), "text" != m.stream.type && (l = Math.min(l, m.duration));
                            b.f != Ye.va ? (b.b = new P(0, 3 * b.v), b.b.Cb(!1)) : (b.b = new P(null, 0), b.b.Cb(!0));
                            cf(b);
                            if (b.f != Ye.va) {
                                b.J = b.G;
                                p = Ye;
                                b.f == p.kc && (q = b.b.yb, isNaN(b.c.availabilityWindowOverride) || (q = b.c.availabilityWindowOverride), b.b.Kc(q));
                                for (v = 0; 95443.7176888889 <= k;)
                                    v += 95443.7176888889, k -= 95443.7176888889;
                                if (v)
                                    for (C = r(b.a.values()), A = C.next(); !A.done; A = C.next())
                                        w = A.value, 95443.7176888889 > w.Yb && (w.stream.presentationTimeOffset = -v, w.hb.offset(v));
                            }
                            else
                                for (b.b.oa(l), b.b.offset(-h), C = r(b.a.values()), A = C.next(); !A.done; A = C.next()) {
                                    B = A.value;
                                    B.stream.presentationTimeOffset =
                                        h;
                                    B.hb.offset(-h);
                                    A = B.hb;
                                    for (var z = l; A.a.length;)
                                        if (A.a[A.a.length - 1].startTime >= z)
                                            A.a.pop();
                                        else
                                            break;
                                    for (; A.a.length;)
                                        if (0 >= A.a[0].endTime)
                                            A.a.shift();
                                        else
                                            break;
                                    if (0 != A.a.length) {
                                        var R = A.a[A.a.length - 1];
                                        A.a[A.a.length - 1] = new N(R.position, R.startTime, z, R.c, R.b, R.a);
                                    }
                                }
                            b.m = { presentationTimeline: b.b, periods: [g], offlineSessionIds: [], minBufferTime: 0 };
                            x(e);
                    }
                });
            });
        }
        function bf(b, c) {
            return t(function e() {
                var f, g, h, k, l, m, p, q, v, w, B, z;
                return y(e, function (e) {
                    switch (e.j) {
                        case 1: return f = ze, g = $c, h = c.a, k = f.Oa(c.a, "EXT-X-MEDIA"), l = k.filter(function (b) { return "SUBTITLES" == W(b, "TYPE"); }.bind(b)), m = l.map(function (b) { return df(this, b); }.bind(b)), p = k.filter(function (b) { return "CLOSED-CAPTIONS" == W(b, "TYPE"); }), ef(b, p), u(e, Promise.all(m), 2);
                        case 2: return q = e.w, v = f.Oa(h, "EXT-X-STREAM-INF"), w = v.map(function (b) { return ff(this, b, c); }.bind(b)), u(e, Promise.all(w), 3);
                        case 3: return B = e.w,
                            z = B.reduce(g.Lb, []), z = z.filter(function (b) { return null != b; }), e["return"]({ startTime: 0, variants: z, textStreams: q });
                    }
                });
            });
        }
        function ff(b, c, d) {
            return t(function f() {
                var g, h, k, l, m, p, q, v, w, B, z, C, A, V, R, wa, Xa, mb, la, xa, ia, Ya, Ja, nb, Pa, ob, pb;
                return y(f, function (f) {
                    switch (f.j) {
                        case 1:
                            g = bd;
                            h = ze;
                            k = xe(c, "CODECS", "avc1.42E01E,mp4a.40.2");
                            l = gf(k.split(/\s*,\s*/));
                            m = we(c, "RESOLUTION");
                            q = p = null;
                            v = xe(c, "FRAME-RATE");
                            w = Number(W(c, "BANDWIDTH"));
                            m && (B = m.value.split("x"), p = B[0], q = B[1]);
                            z = h.Oa(d.a, "EXT-X-MEDIA");
                            z = z.filter(function (b) { return "CLOSED-CAPTIONS" != W(b, "TYPE"); });
                            z = z.filter(function (b) {
                                var c = xe(b, "URI") || "";
                                return "SUBTITLES" == (xe(b, "TYPE") || "") || "" != c;
                            });
                            C = xe(c, "AUDIO");
                            A = xe(c, "VIDEO");
                            C ? z = h.Pb(z, "AUDIO", C) : A && (z = h.Pb(z, "VIDEO", A));
                            if (V = hf(g.Z, l)) {
                                if (R = xe(c, "SUBTITLES"))
                                    wa = h.Pb(z, "SUBTITLES", R), wa.length && (Xa = b.B.get(wa[0].id), Xa.stream.codecs = V);
                                yb(l, V);
                            }
                            mb = z.map(function (b) { return jf(this, b, l); }.bind(b));
                            la = [];
                            xa = [];
                            return u(f, Promise.all(mb), 2);
                        case 2:
                            Ya = f.w;
                            Ya = Ya.filter(function (b) { return null != b; });
                            C ? la = Ya : A && (xa = Ya);
                            nb = !1;
                            la.length || xa.length ? la.length ? (ob = W(c, "URI"), pb = la[0].Db, ob == pb ? (Ja = g.Za, nb = !0) : Ja = g.ua) : Ja = g.Za : 1 ==
                                l.length ? (Pa = hf(g.ua, l), Ja = m || v || Pa ? g.ua : g.Za) : (Ja = g.ua, l = [l.join(",")]);
                            if (nb) {
                                f.j = 3;
                                break;
                            }
                            return u(f, kf(b, c, l, Ja), 4);
                        case 4: ia = f.w;
                        case 3:
                            if (ia)
                                ia.stream.type == g.Za ? la = [ia] : xa = [ia];
                            else if (null === ia)
                                return f["return"]([]);
                            xa && lf(xa);
                            la && lf(la);
                            return f["return"](mf(b, la, xa, w, p, q, v));
                    }
                });
            });
        }
        function lf(b) { b.forEach(function (b) { var c = b.stream.codecs.split(","); c = c.filter(function (b) { return "mp4a.40.34" != b; }); b.stream.codecs = c.join(","); }); }
        function mf(b, c, d, e, f, g, h) {
            d.forEach(function (b) { if (b = b.stream)
                b.width = Number(f) || void 0, b.height = Number(g) || void 0, b.frameRate = Number(h) || void 0; }.bind(b));
            c.length || (c = [null]);
            d.length || (d = [null]);
            var k = [];
            c = r(c);
            for (var l = c.next(); !l.done; l = c.next()) {
                l = l.value;
                for (var m = r(d), p = m.next(); !p.done; p = m.next()) {
                    var q = p.value;
                    p = l ? l.stream : null;
                    var v = q ? q.stream : null, w = l ? l.drmInfos : null, B = q ? q.drmInfos : null;
                    q = (q ? q.Db : "") + " - " + (l ? l.Db : "");
                    var z = void 0;
                    if (p && v)
                        if (w.length && B.length ? 0 < Sc(w, B).length : 1)
                            z = Sc(w, B);
                        else
                            continue;
                    else
                        p ? z = w : v && (z = B);
                    b.K.has(q) || (p = nf(b, p, v, e, z), k.push(p), b.K.add(q));
                }
            }
            return k;
        }
        function nf(b, c, d, e, f) { return { id: b.N++, language: c ? c.language : "und", primary: !!c && c.primary || !!d && d.primary, audio: c, video: d, bandwidth: e, drmInfos: f, allowedByApplication: !0, allowedByKeySystem: !0 }; }
        function df(b, c) { return t(function e() { var f; return y(e, function (e) { switch (e.j) {
            case 1: return W(c, "TYPE"), u(e, jf(b, c, []), 2);
            case 2: return f = e.w, e["return"](f.stream);
        } }); }); }
        function ef(b, c) { for (var d = r(c), e = d.next(); !e.done; e = d.next()) {
            e = e.value;
            W(e, "TYPE");
            var f = xe(e, "LANGUAGE") || "und";
            f = L(f);
            var g = W(e, "GROUP-ID");
            e = W(e, "INSTREAM-ID");
            b.l.get(g) || b.l.set(g, new Map);
            b.l.get(g).set(e, f);
        } }
        function jf(b, c, d) {
            return t(function f() {
                var g, h, k, l, m, p, q, v, w, B, z;
                return y(f, function (f) {
                    switch (f.j) {
                        case 1:
                            g = W(c, "URI");
                            if (b.a.has(g))
                                return f["return"](b.a.get(g));
                            h = W(c, "TYPE").toLowerCase();
                            k = bd;
                            "subtitles" == h && (h = k.Z);
                            l = L(xe(c, "LANGUAGE", "und"));
                            m = xe(c, "NAME");
                            p = we(c, "DEFAULT");
                            q = we(c, "AUTOSELECT");
                            v = xe(c, "CHANNELS");
                            if ("audio" == h)
                                if (v) {
                                    var A = v.split("/")[0];
                                    A = parseInt(A, 10);
                                }
                                else
                                    A = null;
                            else
                                A = null;
                            w = A;
                            B = !!p || !!q;
                            return u(f, of(b, g, d, h, l, B, m, w, null), 2);
                        case 2:
                            z = f.w;
                            if (null == z)
                                return f["return"](null);
                            if (b.a.has(g))
                                return f["return"](b.a.get(g));
                            b.B.set(c.id, z);
                            b.a.set(g, z);
                            return f["return"](z);
                    }
                });
            });
        }
        function kf(b, c, d, e) { return t(function g() { var h, k, l, m, p; return y(g, function (g) { switch (g.j) {
            case 1:
                h = bd;
                k = W(c, "URI");
                if (b.a.has(k))
                    return g["return"](b.a.get(k));
                l = xe(c, "CLOSED-CAPTIONS");
                m = null;
                e == h.ua && l && "NONE" != l && (m = b.l.get(l));
                return u(g, of(b, k, d, e, "und", !1, null, null, m), 2);
            case 2:
                p = g.w;
                if (null == p)
                    return g["return"](null);
                if (b.a.has(k))
                    return g["return"](b.a.get(k));
                b.a.set(k, p);
                return g["return"](p);
        } }); }); }
        function of(b, c, d, e, f, g, h, k, l) {
            return t(function p() {
                var q, v, w, B, z, C, A, V, R, wa, Xa, mb, la, xa, ia, Ya, Ja, nb, Pa, ob, pb, $f, qb, ag, Fd, eg;
                return y(p, function (p) {
                    switch (p.j) {
                        case 1: return q = ze, v = q.Mb(b.u, c), B = "", u(p, We(b, v), 2);
                        case 2:
                            C = p.w;
                            v = C.uri;
                            w = Fe(b.s, C.data, v);
                            if (1 != w.type)
                                throw new F(2, 4, 4017);
                            A = [];
                            w.segments.forEach(function (b) { b = q.Oa(b.b, "EXT-X-KEY"); A.push.apply(A, b); });
                            V = !1;
                            R = [];
                            wa = null;
                            for (var fg = r(A), Gd = fg.next(); !Gd.done; Gd = fg.next())
                                if (Xa = Gd.value, mb = W(Xa, "METHOD"), "NONE" != mb) {
                                    V = !0;
                                    if ("AES-128" ==
                                        mb)
                                        return b.M = !0, p["return"](null);
                                    la = W(Xa, "KEYFORMAT");
                                    if (ia = (xa = pf[la]) ? xa(Xa) : null)
                                        ia.keyIds.length && (wa = ia.keyIds[0]), R.push(ia);
                                }
                            if (V && !R.length)
                                throw new F(2, 4, 4026);
                            qf(b, w);
                            B = rf(e, d);
                            return u(p, sf(b, e, B, w), 3);
                        case 3: return z = Ya = p.w, nb = (Ja = q.ya(w.a, "EXT-X-MEDIA-SEQUENCE")) ? Number(Ja.value) : 0, u(p, $e(b, c, w, nb, z, B), 4);
                        case 4: return Pa = p.w, ob = Pa[0].startTime, pb = Pa[Pa.length - 1].endTime, $f = pb - ob, qb = new Q(Pa), ag = tf(w), Fd = void 0, "text" == e && (Fd = "subtitle"), eg = { id: b.N++, originalId: h, createSegmentIndex: Promise.resolve.bind(Promise),
                            findSegmentPosition: qb.find.bind(qb), getSegmentReference: qb.get.bind(qb), initSegmentReference: ag, presentationTimeOffset: 0, mimeType: z, codecs: B, kind: Fd, encrypted: V, keyId: wa, language: f, label: h, type: e, primary: g, trickModeVideo: null, emsgSchemeIdUris: null, frameRate: void 0, width: void 0, height: void 0, bandwidth: void 0, roles: [], channelsCount: k, closedCaptions: l }, p["return"]({ stream: eg, hb: qb, drmInfos: R, Db: c, Rc: v, Yb: ob, ye: pb, duration: $f });
                    }
                });
            });
        }
        function qf(b, c) { var d = Ye, e = ze.ya(c.a, "EXT-X-PLAYLIST-TYPE"), f = ze.ya(c.a, "EXT-X-ENDLIST"); f = e && "VOD" == e.value || f; e = e && "EVENT" == e.value && !f; e = !f && !e; f ? af(b, d.va) : (e ? af(b, d.kc) : af(b, d.Oc), d = uf(c.a, "EXT-X-TARGETDURATION"), d = Number(d.value), b.v = Math.max(d, b.v), b.G = Math.min(d, b.G)); }
        function tf(b) { var c = ze.Oa(b.a, "EXT-X-MAP"); if (!c.length)
            return null; if (1 < c.length)
            throw new F(2, 4, 4020); c = c[0]; var d = W(c, "URI"), e = ze.Mb(b.b, d); b = 0; d = null; if (c = xe(c, "BYTERANGE"))
            b = c.split("@"), c = Number(b[0]), b = Number(b[1]), d = b + c - 1; return new Ke(function () { return [e]; }, b, d); }
        function vf(b, c, d, e) { var f = c.b, g = c.a; c = uf(f, "EXTINF").value.split(","); c = e + Number(c[0]); var h = 0, k = null; if (f = ze.ya(f, "EXT-X-BYTERANGE"))
            h = f.value.split("@"), f = Number(h[0]), h = h[1] ? Number(h[1]) : b.a + 1, k = h + f - 1; return new N(d, e, c, function () { return [g]; }, h, k); }
        function cf(b) { b.b && (b.H.forEach(function (c) { b.b.yc(c, 0); }), b.H = []); }
        function $e(b, c, d, e, f, g) { return t(function k() { var l, m, p, q, v, w, B, z, C, A, V; return y(k, function (k) { switch (k.j) {
            case 1: return l = d.segments, m = [], p = l[0].a, q = vf(null, l[0], e, 0), v = tf(d), u(k, wf(b, c, v, q, f, g), 2);
            case 2:
                w = k.w;
                p.split("/").pop();
                for (var R = 0; R < l.length; ++R)
                    B = l[R], z = m[m.length - 1], C = 0 == R ? w : z.endTime, A = e + R, V = vf(z, B, A, C), m.push(V);
                b.H.push(m);
                cf(b);
                return k["return"](m);
        } }); }); }
        function xf(b, c) {
            return t(function e() {
                var f, g, h, k, l, m;
                return y(e, function (e) {
                    switch (e.j) {
                        case 1: return f = Cb, g = Se(c.c(), c.b, c.b + 2048 - 1, b.c.retryParameters), h = Se(c.c(), c.b, c.a, b.c.retryParameters), e.P = 2, u(e, yf(b, g, f.lc), 4);
                        case 4: return k = e.w, e["return"](k);
                        case 2:
                            l = ya(e);
                            if (7001 == l.code)
                                throw l;
                            Qa("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.", g.uris[0]);
                            return u(e, yf(b, h, f.lc), 5);
                        case 5: return m = e.w, e["return"](m);
                    }
                });
            });
        }
        function wf(b, c, d, e, f, g) {
            return t(function k() {
                var l, m, p, q, v, w, B, z, C;
                return y(k, function (k) {
                    switch (k.j) {
                        case 1:
                            if (b.m && (l = b.a.get(c), m = l.hb, p = m.get(e.position)))
                                return k["return"](p.startTime);
                            if ("audio/mpeg" == f)
                                return k["return"](0);
                            if ("video/mp4" != f && "audio/mp4" != f) {
                                k.j = 2;
                                break;
                            }
                            q = [xf(b, e)];
                            d && q.push(xf(b, d));
                            return u(k, Promise.all(q), 3);
                        case 3: return v = k.w, w = v[0], B = v[1] || v[0], k["return"](zf(w.data, B.data));
                        case 2:
                            if ("video/mp2t" != f) {
                                k.j = 4;
                                break;
                            }
                            return u(k, xf(b, e), 5);
                        case 5: return z = k.w, k["return"](Af(z.data));
                        case 4:
                            if ("application/mp4" != f && !f.startsWith("text/")) {
                                k.j = 6;
                                break;
                            }
                            return u(k, xf(b, e), 7);
                        case 7: return C = k.w, k["return"](Bf(f, g, C.data));
                        case 6: throw new F(2, 4, 4030);
                    }
                });
            });
        }
        function zf(b, c) { var d = 0; (new T).A("moov", U).A("trak", U).A("mdia", U).X("mdhd", function (b) { b.reader.I(0 == b.version ? 8 : 16); d = b.reader.D(); b.parser.stop(); }).parse(c, !0); if (!d)
            throw new F(2, 4, 4030); var e = 0, f = !1; (new T).A("moof", U).A("traf", U).X("tfdt", function (b) { e = (0 == b.version ? b.reader.D() : b.reader.Ab()) / d; f = !0; b.parser.stop(); }).parse(b, !0); if (!f)
            throw new F(2, 4, 4030); return e; }
        function Af(b) { function c() { throw new F(2, 4, 4030); } b = new S(new DataView(b), 0); for (var d = 0, e = 0;;)
            if (d = b.ba(), e = b.da(), 71 != e && c(), b.zb() & 16384 || c(), e = (b.da() & 48) >> 4, 0 != e && 2 != e || c(), 3 == e && (e = b.da(), b.I(e)), 1 != b.D() >> 8)
                b.seek(d + 188), e = b.da(), 71 != e && (b.seek(d + 192), e = b.da()), 71 != e && (b.seek(d + 204), e = b.da()), 71 != e && c(), b.Jc(1);
            else
                return b.I(3), d = b.da() >> 6, 0 != d && 1 != d || c(), 0 == b.da() && c(), d = b.da(), e = b.zb(), b = b.zb(), (1073741824 * ((d & 14) >> 1) + ((e & 65534) << 14 | (b & 65534) >> 1)) / 9E4; }
        function Bf(b, c, d) { b = Vb(b, c); if (!Ad(b))
            return 0; c = new yd(null); Bd(c, b); return c.Ub(d); }
        function gf(b) { var c = new Set, d = []; b = r(b); for (var e = b.next(); !e.done; e = b.next()) {
            e = e.value;
            var f = Yb(e)[0];
            c.has(f) || (d.push(e), c.add(f));
        } return d; }
        function hf(b, c) { for (var d = Cf[b], e = 0; e < d.length; e++)
            for (var f = 0; f < c.length; f++)
                if (d[e].test(c[f].trim()))
                    return c[f].trim(); return "text" == b ? "" : null; }
        function rf(b, c) { if (1 == c.length)
            return c[0]; var d = hf(b, c); if (null != d)
            return d; throw new F(2, 4, 4025, c); }
        function sf(b, c, d, e) { return t(function g() { var h, k, l, m, p, q, v, w, B, z; return y(g, function (g) { switch (g.j) {
            case 1:
                h = bd;
                k = Cb;
                l = e.segments[0].a;
                m = new Sa(l);
                p = m.U.split(".").pop();
                q = Df[c];
                if (v = q[p])
                    return g["return"](v);
                if (c == h.Z)
                    return d && "vtt" != d ? g["return"]("application/mp4") : g["return"]("text/vtt");
                w = Fb([l], b.c.retryParameters);
                w.method = "HEAD";
                return u(g, yf(b, w, k.lc), 2);
            case 2:
                B = g.w;
                z = B.headers["content-type"];
                if (!z)
                    throw new F(2, 4, 4021, p);
                return g["return"](z.split(";")[0]);
        } }); }); }
        function W(b, c) { var d = we(b, c); if (!d)
            throw new F(2, 4, 4023, c); return d.value; }
        function uf(b, c) { var d = ze.ya(b, c); if (!d)
            throw new F(2, 4, 4024, c); return d; }
        function We(b, c) { return yf(b, Fb([c], b.c.retryParameters), Cb.ve); }
        var Cf = { audio: [/^vorbis$/, /^opus$/, /^flac$/, /^mp4a/, /^[ae]c-3$/], video: [/^avc/, /^hev/, /^hvc/, /^vp0?[89]/, /^av1$/], text: [/^vtt$/, /^wvtt/, /^stpp/] }, Df = { audio: { mp4: "audio/mp4", m4s: "audio/mp4", m4i: "audio/mp4", m4a: "audio/mp4", ts: "video/mp2t" }, video: { mp4: "video/mp4", m4s: "video/mp4", m4i: "video/mp4", m4v: "video/mp4", ts: "video/mp2t" }, text: { mp4: "application/mp4", m4s: "application/mp4", m4i: "application/mp4", vtt: "text/vtt", ttml: "application/ttml+xml" } };
        function Ue(b) { t(function d() { var e, f; return y(d, function (d) { switch (d.j) {
            case 1:
                if (!b.g)
                    return d["return"]();
                d.P = 2;
                return u(d, b.update(), 4);
            case 4:
                e = b.J;
                b.h.L(e);
                va(d, 0);
                break;
            case 2: f = ya(d), f.severity = 1, b.g.onError(f), b.h.L(.1), x(d);
        } }); }); }
        function af(b, c) { b.f = c; b.b && b.b.Cb(b.f == Ye.va); b.f != Ye.va || b.h.stop(); }
        function yf(b, c, d) { if (!b.i)
            throw new F(2, 7, 7001); c = b.g.networkingEngine.request(d, c); Bb(b.i, c); return c.promise; }
        var pf = { "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed": function (b) {
                var c = W(b, "METHOD");
                pe("HLS SAMPLE-AES-CENC", "SAMPLE-AES-CENC will no longer be supported, see Issue #1227");
                if (!["SAMPLE-AES", "SAMPLE-AES-CTR", "SAMPLE-AES-CENC"].includes(c))
                    return null;
                c = W(b, "URI");
                c = Le.parse(c);
                c = { keySystem: "com.widevine.alpha", licenseServerUri: "", distinctiveIdentifierRequired: !1, persistentStateRequired: !1, audioRobustness: "", videoRobustness: "", serverCertificate: null, initData: [{ initDataType: "cenc", initData: new Uint8Array(c.data) }],
                    keyIds: [] };
                if (b = xe(b, "KEYID"))
                    c.keyIds = [b.substr(2).toLowerCase()];
                return c;
            } }, Ve = "VOD", Ye = { va: Ve, Oc: "EVENT", kc: "LIVE" };
        O.Gc("m3u8", Te);
        O.cc("application/x-mpegurl", Te);
        O.cc("application/vnd.apple.mpegurl", Te);
        function Ef() { this.a = new Map; }
        function Ff(b, c, d) { Gf(b, c).text = d; }
        function Gf(b, c) { b.a.has(c) || b.a.set(c, new Hf); return b.a.get(c); }
        function Hf() { this.text = this.variant = null; }
        ;
        function If(b, c) { this.a = b; this.b = new Set([b]); c = c || []; for (var d = r(c), e = d.next(); !e.done; e = d.next())
            this.add(e.value); }
        If.prototype.add = function (b) { return Jf(this.a, b) ? (this.b.add(b), !0) : !1; };
        function Jf(b, c) { var d; if (!(d = !!b.audio != !!c.audio || !!b.video != !!c.video || b.language != c.language) && (d = b.audio && c.audio)) {
            d = b.audio;
            var e = c.audio;
            d = !(d.channelsCount == e.channelsCount && Kf(d, e) && Lf(d.roles, e.roles));
        } !d && (d = b.video && c.video) && (d = b.video, e = c.video, d = !(Kf(d, e) && Lf(d.roles, e.roles))); return d ? !1 : !0; }
        If.prototype.values = function () { return this.b.values(); };
        function Kf(b, c) { if (b.mimeType != c.mimeType)
            return !1; var d = b.codecs.split(",").map(function (b) { return Yb(b)[0]; }), e = c.codecs.split(",").map(function (b) { return Yb(b)[0]; }); if (d.length != e.length)
            return !1; d.sort(); e.sort(); for (var f = 0; f < d.length; f++)
            if (d[f] != e[f])
                return !1; return !0; }
        function Lf(b, c) { var d = new Set(b), e = new Set(c); d["delete"]("main"); e["delete"]("main"); if (d.size != e.size)
            return !1; d = r(d); for (var f = d.next(); !f.done; f = d.next())
            if (!e.has(f.value))
                return !1; return !0; }
        ;
        function Mf(b) { this.a = b; this.b = new Nf(b.language, "", b.audio && b.audio.channelsCount ? b.audio.channelsCount : 0); }
        Mf.prototype.create = function (b) { var c = this, d = b.filter(function (b) { return Jf(c.a, b); }); return d.length ? new If(d[0], d) : this.b.create(b); };
        function Nf(b, c, d) { this.c = b; this.b = c; this.a = d; }
        Nf.prototype.create = function (b) { var c = []; c = Of(b, this.c); var d = b.filter(function (b) { return b.primary; }); c = c.length ? c : d.length ? d : b; this.b && (b = Pf(c, this.b), b.length && (c = b)); this.a && (b = ie(c, this.a), b.length && (c = b)); b = new If(c[0]); c = r(c); for (d = c.next(); !d.done; d = c.next())
            d = d.value, Jf(b.a, d) && b.add(d); return b; };
        function Of(b, c) { var d = L(c), e = Yd(d, b.map(function (b) { return Xd(b); })); return e ? b.filter(function (b) { return e == Xd(b); }) : []; }
        function Pf(b, c) { return b.filter(function (b) { var d = b.audio; b = b.video; return d && 0 <= d.roles.indexOf(c) || b && 0 <= b.roles.indexOf(c); }); }
        ;
        function Qf(b, c) { this.a = Rf; this.b = (new Map).set(Rf, c).set(Sf, b); }
        var Sf = 0, Rf = 1;
        function Tf(b, c) { this.g = b; this.h = Uf(b); this.c = b.a.currentTime; this.f = Date.now() / 1E3; this.i = c; this.b = function () { }; }
        Tf.prototype.a = function () { this.g = null; this.b = function () { }; };
        function Vf(b, c) { b.b = c; }
        function Wf(b) { this.a = b; }
        function Uf(b) { if (b.a.paused || 0 == b.a.playbackRate || null == b.a.buffered)
            var c = !1;
        else
            a: {
                c = b.a.buffered;
                b = b.a.currentTime;
                for (var d = 0; d < c.length; d++) {
                    var e = c.start(d), f = c.end(d);
                    if (!(b < e || b > f - .5)) {
                        c = !0;
                        break a;
                    }
                }
                c = !1;
            } return c; }
        ;
        function Xf(b, c, d, e, f) { var g = this; this.b = b; this.v = c; this.u = d; this.m = f; this.g = new Ob; this.l = !1; this.s = b.readyState; this.f = !1; this.c = e; this.i = !1; K(this.g, b, "waiting", function () { return Yf(g); }); this.h = (new E(function () { Yf(g); })).qa(.25); }
        Xf.prototype.a = function () { this.g && (this.g.a(), this.g = null); null != this.h && (this.h.stop(), this.h = null); this.c && (this.c.a(), this.c = null); this.b = this.v = this.m = null; };
        Xf.prototype.$b = function () { this.i = !0; Yf(this); };
        function Yf(b) {
            if (0 != b.b.readyState) {
                if (b.b.seeking) {
                    if (!b.l)
                        return;
                }
                else
                    b.l = !1;
                if (!b.b.paused) {
                    b.b.readyState != b.s && (b.f = !1, b.s = b.b.readyState);
                    var c = b.u.smallGapLimit, d = b.b.currentTime, e = b.b.buffered;
                    a: {
                        if (e && e.length && !(1 == e.length && 1E-6 > e.end(0) - e.start(0))) {
                            var f = bc("Edge/") || bc("Trident/") || bc("Tizen") || bc("CrKey") ? .5 : .1;
                            for (var g = 0; g < e.length; g++)
                                if (e.start(g) > d && (0 == g || e.end(g - 1) - d <= f)) {
                                    f = g;
                                    break a;
                                }
                        }
                        f = null;
                    }
                    if (null == f) {
                        if (b.c) {
                            b = b.c;
                            d = b.g;
                            e = Uf(d);
                            d = d.a.currentTime;
                            f = Date.now() / 1E3;
                            if (b.c !=
                                d || b.h != e)
                                b.f = f, b.c = d, b.h = e;
                            d = f - b.f;
                            d >= b.i && e && b.b(b.c, d);
                        }
                    }
                    else if (0 != f || b.i)
                        if (g = e.start(f), !(g >= b.v.ga())) {
                            var h = g - d;
                            c = h <= c;
                            var k = !1;
                            .001 > h || (c || b.f || (b.f = !0, d = new I("largegap", { currentTime: d, gapSize: h }), d.cancelable = !0, b.m(d), b.u.jumpLargeGaps && !d.defaultPrevented && (k = !0)), !c && !k) || (0 != f && e.end(f - 1), b.b.currentTime = g);
                        }
                }
            }
        }
        ;
        function Zf(b) { var c = this; this.f = b; this.b = new Set; this.c = (new E(function () { bg(c, !1); })).qa(.25); }
        Zf.prototype.a = function () { this.c.stop(); for (var b = r(this.b), c = b.next(); !c.done; c = b.next())
            c.value.a(); this.b.clear(); };
        function bg(b, c) { for (var d = r(b.b), e = d.next(); !e.done; e = d.next())
            e.value.h(b.f.currentTime, c); }
        ;
        function cg(b) { var c = []; b = r(b); for (var d = b.next(); !d.done; d = b.next()) {
            d = r(d.value.variants);
            for (var e = d.next(); !e.done; e = d.next())
                c.push(e.value);
        } return c; }
        function dg(b, c) { for (var d = null, e = r(b), f = e.next(); !f.done; f = e.next())
            f = f.value, c >= f.startTime && (d = f); return d; }
        ;
        function gg(b) { this.f = b; this.b = null; this.c = function () { }; }
        gg.prototype.a = function () { this.b = this.f = null; this.c = function () { }; };
        gg.prototype.h = function (b) { var c = this.b, d = this.f.periods; b = dg(d, b) || d[0]; c != b && this.c(b); this.b = b; };
        function hg(b, c) { b.c = c; }
        ;
        function ig(b) { var c = this; this.b = b; this.g = !1; this.f = this.b.qb(); this.c = new E(function () { c.b.wc(.25 * c.f); }); }
        ig.prototype.a = function () { this.c && (this.c.stop(), this.c = null); this.b = null; };
        ig.prototype.set = function (b) { this.f = b; jg(this); };
        function jg(b) { b.c.stop(); var c = b.g ? 0 : b.f; 0 <= c ? b.b.qb() != c && b.b.gc(c) : (b.c.qa(.25), 0 != b.b.qb() && b.b.gc(0)); }
        ;
        function kg(b, c, d) { this.b = b; this.g = c; this.h = d; this.c = new Ob; this.f = new lg(b); 0 < b.readyState ? mg(this, d) : ng(this, d); }
        kg.prototype.a = function () { this.c && (this.c.a(), this.c = null); null != this.f && (this.f.a(), this.f = null); this.g = function () { }; this.b = null; };
        function og(b) { return 0 < b.b.readyState ? b.b.currentTime : b.h; }
        function ng(b, c) { b.h = c; b.c.Y(b.b, "loadedmetadata"); Rb(b.c, b.b, "loadedmetadata", function () { mg(b, c); }); }
        function mg(b, c) { .001 > Math.abs(b.b.currentTime - c) ? pg(b) : (Rb(b.c, b.b, "seeking", function () { pg(b); }), qg(b.f, 0 == b.b.currentTime ? c : b.b.currentTime)); }
        function pg(b) { K(b.c, b.b, "seeking", function () { return b.g(); }); }
        function lg(b) { var c = this; this.c = b; this.i = 10; this.h = this.g = this.f = 0; this.b = new E(function () { 0 >= c.f ? c.b.stop() : c.c.currentTime != c.g ? c.b.stop() : (c.c.currentTime = c.h, c.f--); }); }
        lg.prototype.a = function () { this.b && (this.b.stop(), this.b = null); this.c = null; };
        function qg(b, c) { b.g = b.c.currentTime; b.h = c; b.f = b.i; b.c.currentTime = c; b.b.qa(.1); }
        ;
        function rg(b) { function c() { d.g = !0; null != d.c && (d.b.currentTime = d.c); } var d = this; this.b = b; this.g = !1; this.c = null; this.f = new Ob; 0 == this.b.readyState ? Rb(this.f, this.b, "loadedmetadata", c) : c(); }
        rg.prototype.a = function () { this.f && (this.f.a(), this.f = null); this.b = null; };
        rg.prototype.s = function (b) { this.c = this.g ? this.c : b; };
        rg.prototype.i = function () { return (this.g ? this.b.currentTime : this.c) || 0; };
        rg.prototype.u = function () { };
        function sg(b, c, d, e, f, g) {
            var h = this;
            this.c = b;
            this.b = c.presentationTimeline;
            this.B = c.minBufferTime || 0;
            this.h = d;
            this.v = f;
            this.m = null;
            this.g = new Xf(b, c.presentationTimeline, d, tg(b, d), g);
            this.f = new kg(b, function () { a: {
                var b = h.g;
                b.l = !0;
                b.i = !1;
                b.f = !1;
                var c = og(h.f);
                b = ug(h, c);
                if (.001 < Math.abs(b - c) && (c = (new Date).getTime() / 1E3, !h.m || h.m < c - 1)) {
                    h.m = c;
                    c = h.f;
                    0 < c.b.readyState ? qg(c.f, b) : ng(c, b);
                    b = void 0;
                    break a;
                }
                h.v();
                b = void 0;
            } return b; }, vg(this, e));
            this.l = (new E(function () {
                if (0 != h.c.readyState && !h.c.paused) {
                    var b = h.c.currentTime, c = h.b.Pa(), d = h.b.ga();
                    3 > d - c && (c = d - 3);
                    b < c && (b = ug(h, b), h.c.currentTime = b);
                }
            })).qa(.25);
        }
        sg.prototype.a = function () { this.f && (this.f.a(), this.f = null); this.g && (this.g.a(), this.g = null); this.l && (this.l.stop(), this.l = null); this.c = this.f = this.b = this.h = null; this.v = function () { }; };
        sg.prototype.s = function (b) { var c = this.f; 0 < c.b.readyState ? qg(c.f, b) : ng(c, b); };
        sg.prototype.i = function () { var b = og(this.f); return 0 < this.c.readyState && !this.c.paused ? wg(this, b) : b; };
        function vg(b, c) { null == c ? c = Infinity > b.b.R() ? b.b.Pa() : b.b.ga() : 0 > c && (c = b.b.ga() + c); return xg(b, wg(b, c)); }
        sg.prototype.u = function () { this.g.$b(); };
        function xg(b, c) { var d = b.b.R(); return c >= d ? d - b.h.durationBackoff : c; }
        function ug(b, c) { var d = Xc.bind(null, b.c.buffered), e = Math.max(b.B, b.h.rebufferingGoal), f = b.h.safeSeekOffset, g = b.b.Pa(), h = b.b.ga(), k = b.b.R(); 3 > h - g && (g = h - 3); var l = b.b.bb(e), m = b.b.bb(f); e = b.b.bb(e + f); return c >= k ? xg(b, c) : c > h ? h : c < g ? d(m) ? m : e : c >= l || d(c) ? c : e; }
        function wg(b, c) { var d = b.b.Pa(); if (c < d)
            return d; d = b.b.ga(); return c > d ? d : c; }
        function tg(b, c) { if (!c.stallEnabled)
            return null; var d = c.stallSkip, e = new Tf(new Wf(b), c.stallThreshold); Vf(e, function () { b.currentTime += d; }); return e; }
        ;
        function yg() { this.c = function () { }; this.b = new Set; }
        yg.prototype.a = function () { this.c = function () { }; this.b.clear(); };
        function zg(b, c) { b.c = c; }
        ;
        function Ag(b) { var c = this; this.i = b; this.g = new Map; this.b = function () { }; this.c = function () { }; this.f = function () { }; this.l = [{ Ga: null, Fa: Bg, Ba: function (b, e) { return c.b(b, e); } }, { Ga: Cg, Fa: Bg, Ba: function (b, e) { return c.b(b, e); } }, { Ga: Dg, Fa: Bg, Ba: function (b, e) { return c.b(b, e); } }, { Ga: Bg, Fa: Cg, Ba: function (b, e) { return c.c(b, e); } }, { Ga: Bg, Fa: Dg, Ba: function (b, e) { return c.c(b, e); } }, { Ga: Cg, Fa: Dg, Ba: function (b, e) { return c.f(b, e); } }, { Ga: Dg, Fa: Cg, Ba: function (b, e) { return c.f(b, e); } }]; }
        Ag.prototype.a = function () { this.i = null; this.g.clear(); this.b = function () { }; this.c = function () { }; this.f = function () { }; };
        Ag.prototype.h = function (b, c) { for (var d = r(this.i.b), e = d.next(); !e.done; e = d.next()) {
            e = e.value;
            var f = this.g.get(e), g = b < e.startTime ? Cg : b > e.endTime ? Dg : Bg;
            this.g.set(e, g);
            for (var h = r(this.l), k = h.next(); !k.done; k = h.next())
                k = k.value, k.Ga == f && k.Fa == g && k.Ba(e, c);
        } };
        function Eg(b, c, d, e) { b.b = c; b.c = d; b.f = e; }
        var Cg = 1, Bg = 2, Dg = 3;
        function Fg(b, c) { this.a = c; this.c = b; this.g = null; this.l = 1; this.u = Promise.resolve(); this.h = []; this.i = new Map; this.b = new Map; this.s = !1; this.G = null; this.B = this.f = this.m = !1; this.v = 0; }
        Fg.prototype.destroy = function () { for (var b = r(this.b.values()), c = b.next(); !c.done; c = b.next())
            Gg(c.value); this.b.clear(); this.i.clear(); this.g = this.h = this.u = this.c = this.a = null; this.f = !0; return Promise.resolve(); };
        Fg.prototype.configure = function (b) { this.g = b; this.G = new hb({ maxAttempts: Math.max(b.retryParameters.maxAttempts, 2), baseDelay: b.retryParameters.baseDelay, backoffFactor: b.retryParameters.backoffFactor, fuzzFactor: b.retryParameters.fuzzFactor, timeout: 0 }, !0); };
        Fg.prototype.start = function () { var b = this; return t(function d() { var e, f, g; return y(d, function (d) { switch (d.j) {
            case 1: return e = b.a.za(), f = Hg(b, e), g = b.a.Bc(b.c.periods[f]), g.variant || g.text ? u(d, Ig(b, g.variant ? g.variant.audio : null, g.variant ? g.variant.video : null, g.text, e), 2) : d["return"](new F(2, 5, 5005));
            case 2:
                if (b.f)
                    return d["return"]();
                b.a && b.a.Ed && b.a.Ed();
                x(d);
        } }); }); };
        function Jg(b) { return Kg(b, "audio"); }
        function Lg(b) { return Kg(b, "video"); }
        function Kg(b, c) { var d = b.b.get(c); return d ? d.na || d.stream : null; }
        function Mg(b, c) { return t(function e() { var f, g, h, k, l, m, p, q; return y(e, function (e) { switch (e.j) {
            case 1: return f = bd, u(e, Qd(b.a.F, f.Z), 2);
            case 2: return b.v++, b.B = !1, g = b.v, h = b.a.F, k = new Map, l = new Set, k.set(f.Z, c), l.add(c), u(e, h.init(k, !1), 3);
            case 3: return b.f ? e["return"]() : u(e, Ng(b, l), 4);
            case 4:
                if (b.f)
                    return e["return"]();
                b.v != g || b.b.has(f.Z) || b.B || (m = b.a.za(), p = Hg(b, m), q = Og(c, p, 0), b.b.set(f.Z, q), Pg(b, q, 0));
                x(e);
        } }); }); }
        function Qg(b, c) { var d = b.b.get("video"); if (d) {
            var e = d.stream;
            if (e)
                if (c) {
                    var f = e.trickModeVideo;
                    f && !d.na && (Rg(b, f, !1, 0), d.na = e);
                }
                else if (e = d.na)
                    d.na = null, Rg(b, e, !0, 0);
        } }
        function Sg(b, c, d, e) { c.video && Rg(b, c.video, d, e); c.audio && Rg(b, c.audio, d, e); }
        function Rg(b, c, d, e) { var f = b.b.get(c.type); if (!f && "text" == c.type && b.g.ignoreTextStreamFailures)
            Mg(b, c);
        else if (f) {
            var g = Tg(b, c);
            if (d && g != f.ia)
                b.b.forEach(function (c) { Ug(b, c); });
            else {
                f.na && (c.trickModeVideo ? (f.na = c, c = c.trickModeVideo) : f.na = null);
                var h = b.h[g];
                h && h.Ya && (h = b.i.get(c.id)) && h.Ya && f.stream != c && ("text" == c.type && Jd(b.a.F, Vb(c.mimeType, c.codecs)), f.stream = c, f.tb = !0, Vg(b, f, g) && f.fb.abort(), d && (f.wa ? f.Eb = !0 : f.ma ? (f.sa = !0, f.ob = e, f.Eb = !0) : (Gg(f), Wg(b, f, !0, e))));
            }
        } }
        function Vg(b, c, d) { if (!c.fb)
            return !1; var e = b.a.za(), f = Md(b.a.F, c.type); b = (b = Xg(b, c, e, f, d)) ? b.a ? b.a - b.b : null : null; if (null == b)
            return !1; (d = c.stream.initSegmentReference) && (b += (d.a ? d.a - d.b : null) || 0); return c.fb.b.a > b; }
        function Yg(b) { function c(c) { var f = b.a.F; "text" == c ? (c = f.a, c = null == c.a || null == c.b ? !1 : d >= c.a && d < c.b) : (c = Ld(f, c), c = Xc(c, d, e)); return c; } var d = b.a.za(), e = b.g.smallGapLimit, f = Hg(b, d); if (Sb(b.b.values(), function (b) { return b.ia == f; }))
            for (var g = r(b.b.keys()), h = g.next(); !h.done; h = g.next())
                h = h.value, c(h) || Ug(b, b.b.get(h));
        else
            Sb(b.b.keys(), c) || b.b.forEach(function (c) { Ug(b, c); }); }
        function Ug(b, c) { c.wa || c.sa || (c.ma ? (c.sa = !0, c.ob = 0) : null == Kd(b.a.F, c.type) ? null == c.ka && Pg(b, c, 0) : (Gg(c), Wg(b, c, !1, 0))); }
        function Ig(b, c, d, e, f) { return t(function h() { var k, l, m, p, q, v, w; return y(h, function (h) { switch (h.j) {
            case 1: return k = b.a.za(), l = Hg(b, k), m = bd, p = new Map, q = new Set, c && (p.set(m.Za, c), q.add(c)), d && (p.set(m.ua, d), q.add(d)), e && (p.set(m.Z, e), q.add(e)), v = b.a.F, w = b.g.forceTransmuxTS, u(h, v.init(p, w), 2);
            case 2:
                if (b.f)
                    return h["return"]();
                Zg(b);
                return u(h, Ng(b, q), 3);
            case 3:
                if (b.f)
                    return h["return"]();
                p.forEach(function (c, d) { if (!b.b.has(d)) {
                    var e = Og(c, l, f);
                    b.b.set(d, e);
                    Pg(b, e, 0);
                } });
                x(h);
        } }); }); }
        function Og(b, c, d) { return { stream: b, type: b.type, Ta: null, ha: null, na: null, tb: !0, ia: c, endOfStream: !1, ma: !1, ka: null, sa: !1, ob: 0, Eb: !1, wa: !1, bc: !1, cb: !1, Ic: d || 0, fb: null }; }
        function $g(b, c) {
            var d = b.h[c];
            if (d)
                return d.promise;
            d = { promise: new G, Ya: !1 };
            b.h[c] = d;
            for (var e = new Set, f = r(b.c.periods[c].variants), g = f.next(); !g.done; g = f.next())
                g = g.value, g.video && e.add(g.video), g.video && g.video.trickModeVideo && e.add(g.video.trickModeVideo), g.audio && e.add(g.audio);
            f = r(b.c.periods[c].textStreams);
            for (g = f.next(); !g.done; g = f.next())
                e.add(g.value);
            b.u = b.u.then(function () { if (!this.f)
                return Ng(this, e); }.bind(b)).then(function () { this.f || (this.h[c].promise.resolve(), this.h[c].Ya = !0); }.bind(b))["catch"](function (b) {
                this.f ||
                    (this.h[c].promise["catch"](function () { }), this.h[c].promise.reject(), delete this.h[c], this.a.onError(b));
            }.bind(b));
            return d.promise;
        }
        function Ng(b, c) {
            return t(function e() {
                var f, g, h, k, l, m, p;
                return y(e, function (e) {
                    switch (e.j) {
                        case 1:
                            f = [];
                            for (var q = r(c), w = q.next(); !w.done; w = q.next())
                                g = w.value, (h = b.i.get(g.id)) ? f.push(h.promise) : (b.i.set(g.id, { promise: new G, Ya: !1 }), f.push(g.createSegmentIndex()));
                            e.P = 2;
                            return u(e, Promise.all(f), 4);
                        case 4:
                            if (b.f)
                                return e["return"]();
                            va(e, 3);
                            break;
                        case 2:
                            k = ya(e);
                            if (b.f)
                                return e["return"]();
                            e = r(c);
                            for (w = e.next(); !w.done; w = e.next())
                                l = w.value, b.i.get(l.id).promise["catch"](function () { }), b.i.get(l.id).promise.reject(),
                                    b.i["delete"](l.id);
                            throw k;
                        case 3:
                            q = r(c);
                            for (w = q.next(); !w.done; w = q.next())
                                m = w.value, p = b.i.get(m.id), p.Ya || (p.promise.resolve(), p.Ya = !0);
                            x(e);
                    }
                });
            });
        }
        function Zg(b) { var c = b.c.presentationTimeline.R(); Infinity > c ? b.a.F.oa(c) : b.a.F.oa(Math.pow(2, 32)); }
        function ah(b, c) { if (!b.f && !c.ma && null != c.ka && !c.wa)
            if (c.ka = null, c.sa)
                Wg(b, c, c.Eb, c.ob);
            else {
                try {
                    var d = bh(b, c);
                    null != d && (Pg(b, c, d), c.cb = !1);
                }
                catch (e) {
                    ch(b, e);
                    return;
                }
                d = Array.from(b.b.values());
                dh(b, c);
                b.s && d.every(function (b) { return b.endOfStream; }) && b.a.F.endOfStream().then(function () { if (!this.f) {
                    var b = this.a.F.R();
                    b < this.c.presentationTimeline.R() && this.c.presentationTimeline.oa(b);
                } }.bind(b));
            } }
        function bh(b, c) {
            function d(b) { return "text" == b.type && "application/cea-608" == b.stream.mimeType; }
            if (d(c))
                return b.a.F.Bb(c.stream.originalId || ""), null;
            var e = b.a.za(), f = eh(b, c, e), g = Tg(b, c.stream), h = Hg(b, f), k = Nd(b.a.F, c.type, e), l = Math.max(b.c.minBufferTime || 0, b.g.rebufferingGoal, b.g.bufferingGoal) * b.l;
            if (f >= b.c.presentationTimeline.R())
                return c.endOfStream = !0, "video" == c.type && (f = b.b.get("text")) && "application/cea-608" == f.stream.mimeType && (f.endOfStream = !0), null;
            c.endOfStream = !1;
            c.ia = h;
            if (h != g)
                return null;
            if (k >= l)
                return .5;
            h = Md(b.a.F, c.type);
            h = Xg(b, c, e, h, g);
            if (!h)
                return 1;
            var m = Infinity;
            Array.from(b.b.values()).forEach(function (c) { d(c) || (c = eh(b, c, e), m = Math.min(m, c)); });
            if (f >= m + b.c.presentationTimeline.a)
                return 1;
            c.Ic = 0;
            fh(b, c, e, g, h);
            return null;
        }
        function eh(b, c, d) { if (!c.Ta || !c.ha)
            return Math.max(d, c.Ic); d = Tg(b, c.Ta); return b.c.periods[d].startTime + c.ha.endTime; }
        function Xg(b, c, d, e, f) { if (c.ha && c.stream == c.Ta)
            return gh(b, c, f, c.ha.position + 1); c.ha ? (d = Tg(b, c.Ta), d = c.stream.findSegmentPosition(Math.max(0, b.c.periods[d].startTime + c.ha.endTime - b.c.periods[f].startTime))) : d = c.stream.findSegmentPosition(Math.max(0, (e || d) - b.c.periods[f].startTime)); if (null == d)
            return null; var g = null; null == e && (g = gh(b, c, f, Math.max(0, d - 1))); return g || gh(b, c, f, d); }
        function gh(b, c, d, e) { d = b.c.periods[d]; c = c.stream.getSegmentReference(e); if (!c)
            return null; b = b.c.presentationTimeline; e = b.Qa(); return d.startTime + c.endTime < b.tc() || d.startTime + c.startTime > e ? null : c; }
        function fh(b, c, d, e, f) {
            var g = b.c.periods[e], h = c.stream, k = b.c.presentationTimeline.R(), l = b.c.periods[e + 1];
            e = hh(b, c, e, Math.max(0, g.startTime - .1), l ? l.startTime + .01 : k);
            c.ma = !0;
            c.tb = !1;
            k = ih(b, c, f);
            Promise.all([e, k]).then(function (b) { if (!this.f && !this.m)
                return jh(this, c, d, g, h, f, b[1]); }.bind(b)).then(function () { this.f || this.m || (c.ma = !1, c.bc = !1, c.sa || this.a.$b(), Pg(this, c, 0), kh(this, h)); }.bind(b))["catch"](function (b) {
                this.f || this.m || (c.ma = !1, "text" == c.type && this.g.ignoreTextStreamFailures ? this.b["delete"]("text") :
                    7001 == b.code ? (c.ma = !1, c.ka = null, Pg(this, c, 0)) : 3017 == b.code ? lh(this, c, b) : (c.cb = !0, b.severity = 2, ch(this, b)));
            }.bind(b));
        }
        function lh(b, c, d) { if (!Array.from(b.b.values()).some(function (b) { return b != c && b.bc; })) {
            var e = Math.round(100 * b.l);
            if (20 < e)
                b.l -= .2;
            else if (4 < e)
                b.l -= .04;
            else {
                c.cb = !0;
                b.m = !0;
                b.a.onError(d);
                return;
            }
            c.bc = !0;
        } Pg(b, c, 4); }
        function hh(b, c, d, e, f) { if (!c.tb)
            return Promise.resolve(); d = Rd(b.a.F, c.type, b.c.periods[d].startTime - c.stream.presentationTimeOffset, e, f); if (!c.stream.initSegmentReference)
            return d; b = ih(b, c, c.stream.initSegmentReference).then(function (b) { if (!this.f)
            return Od(this.a.F, c.type, b, null, null, c.stream.closedCaptions && 0 < c.stream.closedCaptions.size); }.bind(b))["catch"](function (b) { c.tb = !0; return Promise.reject(b); }); return Promise.all([d, b]); }
        function jh(b, c, d, e, f, g, h) { var k = f.closedCaptions && 0 < f.closedCaptions.size; null != f.emsgSchemeIdUris && 0 < f.emsgSchemeIdUris.length && (new T).X("emsg", b.H.bind(b, e, g, f.emsgSchemeIdUris)).parse(h); return mh(b, c, d).then(function () { if (!this.f)
            return Od(this.a.F, c.type, h, g.startTime + e.startTime, g.endTime + e.startTime, k); }.bind(b)).then(function () { if (!this.f)
            return c.Ta = f, c.ha = g, Promise.resolve(); }.bind(b)); }
        Fg.prototype.H = function (b, c, d, e) { var f = e.reader.ac(), g = e.reader.ac(), h = e.reader.D(), k = e.reader.D(), l = e.reader.D(), m = e.reader.D(); e = e.reader.Da(e.reader.C.byteLength - e.reader.ba()); b = b.startTime + c.startTime + k / h; if (d.includes(f))
            if ("urn:mpeg:dash:event:2012" == f)
                this.a.Fd();
            else
                this.a.onEvent(new I("emsg", { detail: { startTime: b, endTime: b + l / h, schemeIdUri: f, value: g, timescale: h, presentationTimeDelta: k, eventDuration: l, id: m, messageData: e } })); };
        function mh(b, c, d) { var e = Math.max(b.g.bufferBehind, b.c.presentationTimeline.a), f = Kd(b.a.F, c.type); if (null == f)
            return Promise.resolve(); d = d - f - e; return 0 >= d ? Promise.resolve() : b.a.F.remove(c.type, f, f + d).then(function () { }.bind(b)); }
        function kh(b, c) { if (!b.s) {
            var d = Array.from(b.b.values());
            if (1 != d.length || "text" != d[0].type)
                b.s = d.every(function (b) { return "text" == b.type ? !0 : !b.sa && !b.wa && b.ha; });
            if (b.s) {
                d = Tg(b, c);
                b.h[d] || $g(b, d).then(function () { this.f || this.a.Ac(); }.bind(b))["catch"]($c.eb);
                for (d = 0; d < b.c.periods.length; ++d)
                    $g(b, d)["catch"]($c.eb);
                b.a.Ld && b.a.Ld();
            }
        } }
        function dh(b, c) {
            var d = Tg(b, c.stream);
            if (c.ia != d) {
                var e = c.ia, f = Array.from(b.b.values());
                f.every(function (b) { return b.ia == e; }) && f.every(nh) && $g(b, e).then(function () {
                    if (!this.f && f.every(function (b) { var c = nh(b), d = Tg(this, b.stream); return c && b.ia == e && d != e; }.bind(this))) {
                        var b = this.c.periods[e], c = this.a.Bc(b), d = new Map;
                        c.variant && c.variant.video && d.set("video", c.variant.video);
                        c.variant && c.variant.audio && d.set("audio", c.variant.audio);
                        c.text && d.set("text", c.text);
                        var l = r(this.b.keys());
                        for (c = l.next(); !c.done; c =
                            l.next())
                            if (c = c.value, !d.has(c) && "text" != c) {
                                this.a.onError(new F(2, 5, 5005));
                                return;
                            }
                        l = r(Array.from(d.keys()));
                        for (c = l.next(); !c.done; c = l.next())
                            if (c = c.value, !this.b.has(c))
                                if ("text" == c)
                                    Ig(this, null, null, d.get("text"), b.startTime), d["delete"](c);
                                else {
                                    this.a.onError(new F(2, 5, 5005));
                                    return;
                                }
                        b = r(Array.from(this.b.keys()));
                        for (c = b.next(); !c.done; c = b.next())
                            c = c.value, (l = d.get(c)) ? (Rg(this, l, !1, 0), Pg(this, this.b.get(c), 0)) : this.b["delete"](c);
                        this.a.Ac();
                    }
                }.bind(b))["catch"]($c.eb);
            }
        }
        function nh(b) { return !b.ma && null == b.ka && !b.sa && !b.wa; }
        function Hg(b, c) { var d = dg(b.c.periods, c + cd); return d ? b.c.periods.indexOf(d) : 0; }
        function Tg(b, c) { for (var d = b.c.periods, e = 0; e < d.length; e++) {
            for (var f = d[e], g = new Set, h = r(f.variants), k = h.next(); !k.done; k = h.next())
                k = k.value, k.audio && g.add(k.audio), k.video && g.add(k.video), k.video && k.video.trickModeVideo && g.add(k.video.trickModeVideo);
            f = r(f.textStreams);
            for (h = f.next(); !h.done; h = f.next())
                g.add(h.value);
            if (g.has(c))
                return e;
        } return -1; }
        function ih(b, c, d) { d = Se(d.c(), d.b, d.a, b.g.retryParameters); b = b.a.ub.request(1, d); c.fb = b; return b.promise.then(function (b) { c.fb = null; return b.data; }); }
        function Wg(b, c, d, e) { t(function g() { var h, k, l; return y(g, function (g) { switch (g.j) {
            case 1: return c.sa = !1, c.Eb = !1, c.ob = 0, c.wa = !0, e ? (k = b.a.za(), l = b.a.F.R(), h = b.a.F.remove(c.type, k + e, l)) : h = Qd(b.a.F, c.type).then(function () { if (!this.f && d)
                return this.a.F.flush(c.type); }.bind(b)), u(g, h, 2);
            case 2:
                if (b.f)
                    return g["return"]();
                c.Ta = null;
                c.ha = null;
                c.wa = !1;
                c.endOfStream = !1;
                Pg(b, c, 0);
                x(g);
        } }); }); }
        function Pg(b, c, d) { c.ka = (new gb(function () { ah(b, c); })).L(d); }
        function Gg(b) { null != b.ka && (b.ka.stop(), b.ka = null); }
        function ch(b, c) { jb(b.G).then(function () { this.f || (this.a.onError(c), c.handled || this.g.failureCallback(c)); }.bind(b)); }
        ;
        function oh(b, c, d, e, f, g) { if (200 <= d && 299 >= d && 202 != d)
            return f && (e = f), { uri: e, data: c, headers: b, fromCache: !!b["x-shaka-from-cache"] }; f = null; try {
            f = hc(c);
        }
        catch (h) { } throw new F(401 == d || 403 == d ? 2 : 1, 1, 1001, e, d, f, b, g); }
        ;
        function X(b, c, d, e) { var f = new X.b; Tb(c.headers).forEach(function (b, c) { f.append(c, b); }); var g = new X.a, h = { mc: !1, Nc: !1 }; b = X.h(b, d, { body: c.body || void 0, headers: f, method: c.method, signal: g.signal, credentials: c.allowCrossSiteCredentials ? "include" : void 0 }, h, e); b = new H(b, function () { h.mc = !0; g.abort(); return Promise.resolve(); }); if (c = c.retryParameters.timeout) {
            var k = new E(function () { h.Nc = !0; g.abort(); });
            k.L(c / 1E3);
            b["finally"](function () { k.stop(); });
        } return b; }
        D("shaka.net.HttpFetchPlugin", X);
        X.h = function (b, c, d, e, f) {
            return t(function h() {
                var k, l, m, p, q, v, w, B, z, C, A, V, R, wa;
                return y(h, function (h) {
                    switch (h.j) {
                        case 1: return k = X.g, l = X.c, v = q = 0, w = Date.now(), h.P = 2, u(h, k(b, d), 4);
                        case 4: return m = h.w, B = m.clone().body.getReader(), C = (z = m.headers.get("Content-Length")) ? parseInt(z, 10) : 0, A = function (b) {
                            function c() {
                                return t(function ia() {
                                    var d, e;
                                    return y(ia, function (h) {
                                        switch (h.j) {
                                            case 1: return h.P = 2, u(h, B.read(), 4);
                                            case 4:
                                                d = h.w;
                                                va(h, 3);
                                                break;
                                            case 2: return ya(h), h["return"]();
                                            case 3:
                                                d.done || (q += d.value.byteLength);
                                                e = Date.now();
                                                if (100 < e - w || d.done)
                                                    f(e - w, q - v, C - q), v = q, w = e;
                                                d.done ? b.close() : (b.enqueue(d.value), c());
                                                x(h);
                                        }
                                    });
                                });
                            }
                            c();
                        }, new l({ start: A }), u(h, m.arrayBuffer(), 5);
                        case 5:
                            p = h.w;
                            va(h, 3);
                            break;
                        case 2:
                            V = ya(h);
                            if (e.mc)
                                throw new F(1, 1, 7001, b, c);
                            if (e.Nc)
                                throw new F(1, 1, 1003, b, c);
                            throw new F(1, 1, 1002, b, V, c);
                        case 3: return R = {}, wa = m.headers, wa.forEach(function (b, c) { R[c.trim()] = b; }), h["return"](oh(R, p, m.status, b, m.url, c));
                    }
                });
            });
        };
        X.isSupported = function () { if (window.ReadableStream)
            try {
                new ReadableStream({});
            }
            catch (b) {
                return !1;
            }
        else
            return !1; return !(!window.fetch || !window.AbortController); };
        X.isSupported = X.isSupported;
        X.g = window.fetch;
        X.a = window.AbortController;
        X.c = window.ReadableStream;
        X.b = window.Headers;
        X.isSupported() && (Eb("http", X, 2), Eb("https", X, 2));
        function ph(b, c, d, e) {
            var f = new ph.f, g = Date.now(), h = 0, k = new Promise(function (k, m) {
                f.open(c.method, b, !0);
                f.responseType = "arraybuffer";
                f.timeout = c.retryParameters.timeout;
                f.withCredentials = c.allowCrossSiteCredentials;
                f.onabort = function () { m(new F(1, 1, 7001, b, d)); };
                f.onload = function (c) {
                    c = c.target;
                    var e = c.getAllResponseHeaders().trim().split("\r\n"), f = {};
                    e = r(e);
                    for (var g = e.next(); !g.done; g = e.next())
                        g = g.value.split(": "), f[g[0].toLowerCase()] = g.slice(1).join(": ");
                    try {
                        var h = oh(f, c.response, c.status, b, c.responseURL, d);
                        k(h);
                    }
                    catch (C) {
                        m(C);
                    }
                };
                f.onerror = function (c) { m(new F(1, 1, 1002, b, c, d)); };
                f.ontimeout = function () { m(new F(1, 1, 1003, b, d)); };
                f.onprogress = function (b) { var c = Date.now(); if (100 < c - g || b.lengthComputable && b.loaded == b.total)
                    e(c - g, b.loaded - h, b.total - b.loaded), h = b.loaded, g = c; };
                for (var l in c.headers)
                    f.setRequestHeader(l.toLowerCase(), c.headers[l]);
                f.send(c.body);
            });
            return new H(k, function () { f.abort(); return Promise.resolve(); });
        }
        D("shaka.net.HttpXHRPlugin", ph);
        ph.f = window.XMLHttpRequest;
        Eb("http", ph, 1);
        Eb("https", ph, 1);
        function qh(b, c) { var d = rh(), e = this; this.g = c; this.c = b; this.i = d; this.h = null; this.f = []; this.b = this.a = null; this.l = !0; this.m = Promise.resolve().then(function () { return sh(e); }); }
        qh.prototype.destroy = function () { var b = this; return t(function d() { var e; return y(d, function (d) { switch (d.j) {
            case 1: return b.l = !1, b.b && b.b.abort(), th(b), u(d, b.m, 2);
            case 2:
                b.a && b.a.ca.Ca();
                for (var f = r(b.f), h = f.next(); !h.done; h = f.next())
                    e = h.value, e.ca.Ca();
                b.a = null;
                b.f = [];
                b.g = null;
                x(d);
        } }); }); };
        function uh(b, c) { var d = { Ua: function () { }, vb: function () { }, Ca: function () { }, onError: function () { }, wb: function () { }, Ae: function () { } }; b.f.push({ create: c, ca: d }); b.b && b.b.abort(); th(b); return d; }
        function sh(b) { return t(function d() { return y(d, function (d) { switch (d.j) {
            case 1:
                if (b.l) {
                    if (0 == b.f.length || b.a && !b.a.Aa)
                        var e = !1;
                    else {
                        b.a && (b.a.ca.Ca(), b.a = null);
                        e = b.f.shift();
                        var g = e.create(b.i);
                        g ? (e.ca.Ua(), b.a = { node: g.node, payload: g.payload, Aa: g.Aa, ca: e.ca }) : e.ca.wb();
                        e = !0;
                    }
                    e ? e = Promise.resolve() : b.a ? e = vh(b) : (b.g.Dd(b.c), b.h = new G, e = b.h);
                    return u(d, e, 1);
                }
                d.j = 0;
        } }); }); }
        function vh(b) { return t(function d() { var e, f; return y(d, function (d) { switch (d.j) {
            case 1: return b.c = b.g.pd(b.c, b.i, b.a.node, b.a.payload), d.P = 2, b.b = b.g.Yc(b.c, b.i, b.a.payload), u(d, b.b.promise, 4);
            case 4:
                b.b = null;
                b.c == b.a.node && (b.a.ca.vb(), b.a = null);
                va(d, 0);
                break;
            case 2:
                e = ya(d);
                if (7001 == e.code)
                    b.a.ca.Ca();
                else
                    b.a.ca.onError(e);
                b.a = null;
                b.b = null;
                f = b;
                return u(d, b.g.handleError(b.i, e), 5);
            case 5: f.c = d.w, x(d);
        } }); }); }
        function th(b) { b.h && (b.h.resolve(), b.h = null); }
        ;
        function Y(b) { this.a = null; for (var c = 0; c < b.textTracks.length; ++c) {
            var d = b.textTracks[c];
            d.mode = "disabled";
            "Shaka Player TextTrack" == d.label && (this.a = d);
        } this.a || (this.a = b.addTextTrack("subtitles", "Shaka Player TextTrack")); this.a.mode = "hidden"; }
        D("shaka.text.SimpleTextDisplayer", Y);
        Y.prototype.remove = function (b, c) { if (!this.a)
            return !1; wh(this.a, function (d) { return d.startTime < c && d.endTime > b; }); return !0; };
        Y.prototype.remove = Y.prototype.remove;
        Y.prototype.append = function (b) { for (var c = xh, d = [], e = 0; e < b.length; e++) {
            var f = c(b[e]);
            f && d.push(f);
        } d.slice().sort(function (b, c) { return b.startTime != c.startTime ? b.startTime - c.startTime : b.endTime != c.endTime ? b.endTime - c.startTime : d.indexOf(c) - d.indexOf(b); }).forEach(function (b) { this.a.addCue(b); }.bind(this)); };
        Y.prototype.append = Y.prototype.append;
        Y.prototype.destroy = function () { this.a && wh(this.a, function () { return !0; }); this.a = null; return Promise.resolve(); };
        Y.prototype.destroy = Y.prototype.destroy;
        Y.prototype.isTextVisible = function () { return "showing" == this.a.mode; };
        Y.prototype.isTextVisible = Y.prototype.isTextVisible;
        Y.prototype.setTextVisibility = function (b) { this.a.mode = b ? "showing" : "hidden"; };
        Y.prototype.setTextVisibility = Y.prototype.setTextVisibility;
        function xh(b) { if (b.startTime >= b.endTime)
            return null; var c = new VTTCue(b.startTime, b.endTime, b.payload); c.lineAlign = b.lineAlign; c.positionAlign = b.positionAlign; c.size = b.size; try {
            c.align = b.textAlign;
        }
        catch (d) { } "center" == b.textAlign && "center" != c.align && (c.align = "middle"); "vertical-lr" == b.writingMode ? c.vertical = "lr" : "vertical-rl" == b.writingMode && (c.vertical = "rl"); 1 == b.lineInterpretation && (c.snapToLines = !1); null != b.line && (c.line = b.line); null != b.position && (c.position = b.position); return c; }
        function wh(b, c) { var d = b.mode; b.mode = "showing" == d ? "showing" : "hidden"; for (var e = b.cues, f = e.length - 1; 0 <= f; f--) {
            var g = e[f];
            g && c(g) && b.removeCue(g);
        } b.mode = d; }
        ;
        function yh(b, c, d, e, f) { var g = f in e, h = !0, k; for (k in c) {
            var l = f + "." + k, m = g ? e[f] : d[k];
            g || k in d ? void 0 === c[k] ? void 0 === m || g ? delete b[k] : b[k] = xb(m) : m.constructor == Object && c[k] && c[k].constructor == Object ? (b[k] || (b[k] = xb(m)), l = yh(b[k], c[k], m, e, l), h = h && l) : typeof c[k] != typeof m || null == c[k] || c[k].constructor != m.constructor ? h = !1 : b[k] = c[k] : h = !1;
        } return h; }
        D("shaka.util.ConfigUtils.mergeConfigObjects", yh);
        function zh() {
            var b = 5E5, c = Infinity;
            navigator.connection && navigator.connection.type && (b = 1E6 * navigator.connection.downlink, navigator.connection.saveData && (c = 360));
            var d = { retryParameters: ib(), servers: {}, clearKeys: {}, advanced: {}, delayLicenseRequestUntilPlayed: !1 }, e = { retryParameters: ib(), availabilityWindowOverride: NaN, dash: { customScheme: function (b) { if (b)
                        return null; }, clockSyncUri: "", ignoreDrmInfo: !1, xlinkFailGracefully: !1, defaultPresentationDelay: 10, ignoreMinBufferTime: !1, autoCorrectDrift: !0 } }, f = { retryParameters: ib(),
                failureCallback: function () { }, rebufferingGoal: 2, bufferingGoal: 10, bufferBehind: 30, ignoreTextStreamFailures: !1, alwaysStreamText: !1, startAtSegmentBoundary: !1, smallGapLimit: .5, jumpLargeGaps: !1, durationBackoff: 1, forceTransmuxTS: !1, safeSeekOffset: 5, stallEnabled: !0, stallThreshold: 1, stallSkip: .1 };
            bc("Web0S") && (f.stallEnabled = !1);
            var g = { trackSelectionCallback: function (b) { return b; }, progressCallback: function () { }, usePersistentLicense: !0 }, h = { drm: d, manifest: e, streaming: f, offline: g, abrFactory: M, abr: { enabled: !0, defaultBandwidthEstimate: b,
                    switchInterval: 8, bandwidthUpgradeTarget: .85, bandwidthDowngradeTarget: .95, restrictions: { minWidth: 0, maxWidth: Infinity, minHeight: 0, maxHeight: c, minPixels: 0, maxPixels: Infinity, minBandwidth: 0, maxBandwidth: Infinity } }, preferredAudioLanguage: "", preferredTextLanguage: "", preferredVariantRole: "", preferredTextRole: "", preferredAudioChannelCount: 2, restrictions: { minWidth: 0, maxWidth: Infinity, minHeight: 0, maxHeight: Infinity, minPixels: 0, maxPixels: Infinity, minBandwidth: 0, maxBandwidth: Infinity }, playRangeStart: 0, playRangeEnd: Infinity,
                textDisplayFactory: function () { return null; } };
            g.trackSelectionCallback = function (b) { return Ah(b, h.preferredAudioLanguage); };
            return h;
        }
        function Bh(b, c, d) { var e = { ".drm.servers": "", ".drm.clearKeys": "", ".drm.advanced": { distinctiveIdentifierRequired: !1, persistentStateRequired: !1, videoRobustness: "", audioRobustness: "", serverCertificate: new Uint8Array(0), individualizationServer: "" } }; return yh(b, c, d || zh(), e, ""); }
        function Ah(b, c) {
            var d = b.filter(function (b) { return "variant" == b.type; }), e = [], f = Yd(c, d.map(function (b) { return b.language; }));
            f && (e = d.filter(function (b) { return L(b.language) == f; }));
            0 == e.length && (e = d.filter(function (b) { return b.primary; }));
            0 == e.length && (d.map(function (b) { return b.language; }), e = d);
            var g = e.filter(function (b) { return b.height && 480 >= b.height; });
            g.length && (g.sort(function (b, c) { return c.height - b.height; }), e = g.filter(function (b) { return b.height == g[0].height; }));
            d = [];
            if (e.length) {
                var h = Math.floor(e.length /
                    2);
                e.sort(function (b, c) { return b.bandwidth - c.bandwidth; });
                d.push(e[h]);
            }
            e = r(b);
            for (h = e.next(); !h.done; h = e.next())
                h = h.value, "text" == h.type && d.push(h);
            return d;
        }
        ;
        function Ch() { this.a = null; this.b = []; }
        function Dh(b, c) { if (null == b.a)
            b.a = { timestamp: Date.now() / 1E3, state: c, duration: 0 };
        else {
            var d = Date.now() / 1E3;
            b.a.duration = d - b.a.timestamp;
            b.a.state != c && (b.b.push(b.a), b.a = { timestamp: d, state: c, duration: 0 });
        } }
        function Eh(b, c) { var d = 0; b.a && b.a.state == c && (d += b.a.duration); for (var e = r(b.b), f = e.next(); !f.done; f = e.next())
            f = f.value, d += f.state == c ? f.duration : 0; return d; }
        function Fh(b) { function c(b) { return { timestamp: b.timestamp, state: b.state, duration: b.duration }; } for (var d = [], e = r(b.b), f = e.next(); !f.done; f = e.next())
            d.push(c(f.value)); b.a && d.push(c(b.a)); return d; }
        ;
        function Gh() { this.b = this.c = null; this.a = []; }
        function Hh(b, c, d) { b.b != c && (b.b = c, b.a.push({ timestamp: Date.now() / 1E3, id: c.id, type: "text", fromAdaptation: d, bandwidth: null })); }
        ;
        function Ih() { this.f = this.l = this.c = this.h = this.i = this.g = this.m = NaN; this.a = new Ch; this.b = new Gh; }
        ;
        function Z(b, c) {
            var d = this;
            wb.call(this);
            this.g = Jh;
            this.a = null;
            this.Ia = !1;
            this.i = new Ob;
            this.Gb = this.l = this.Ha = this.b = this.m = this.f = this.mb = this.M = this.ib = this.J = this.Ka = this.s = this.G = this.h = this.H = null;
            this.sc = 1E9;
            this.kb = new Set;
            this.Ma = !0;
            this.W = null;
            this.oc = !1;
            this.nc = 0;
            this.V = null;
            this.B = new Ef;
            this.c = Kh(this);
            this.lb = { width: Infinity, height: Infinity };
            this.u = null;
            this.jb = new Nf(this.c.preferredAudioLanguage, this.c.preferredVariantRole, this.c.preferredAudioChannelCount);
            this.ta = this.c.preferredTextLanguage;
            this.$a = this.c.preferredTextRole;
            c && c(this);
            this.H = Lh(this);
            K(this.i, window, "online", function () { d.ec(); });
            this.v = { name: "detach" };
            this.K = { name: "attach" };
            this.la = { name: "unload" };
            this.Jb = { name: "manifest-parser" };
            this.Ib = { name: "manifest" };
            this.Ja = { name: "media-source" };
            this.Hb = { name: "drm-engine" };
            this.N = { name: "load" };
            this.Kb = { name: "src-equals-drm-engine" };
            this.La = { name: "src-equals" };
            var e = new Map;
            e.set(this.K, function (b, c) { return sb(Mh(d, b, c)); });
            e.set(this.v, function (b) {
                b.o && (d.i.Y(b.o, "error"), b.o = null);
                d.a = null;
                b = Promise.resolve();
                return sb(b);
            });
            e.set(this.la, function (b) { return sb(Nh(d, b)); });
            e.set(this.Ja, function (b) { b = Oh(d, b); return sb(b); });
            e.set(this.Jb, function (b, c) { var e = Ph(d, b, c); return sb(e); });
            e.set(this.Ib, function (b) { return Qh(d, b); });
            e.set(this.Hb, function () { var b = Rh(d); return sb(b); });
            e.set(this.N, function (b, c) { return sb(Sh(d, b, c)); });
            e.set(this.Kb, function (b) { b = Th(d, b); return sb(b); });
            e.set(this.La, function (b, c) { return Uh(d, b, c); });
            this.Na = new qh(this.v, { pd: function (b, c, e, k) {
                    var f = null;
                    b ==
                        d.v && (f = e == d.v ? d.v : d.K);
                    b == d.K && (f = e == d.v || c.o != k.o ? d.v : e == d.K ? d.K : e == d.Ja || e == d.N ? d.Ja : e == d.La ? d.Kb : null);
                    b == d.Ja && (f = e == d.N && c.o == k.o ? d.Jb : d.la);
                    b == d.Jb && (f = Vh(d.N, d.Ib, d.la, e, c, k));
                    b == d.Ib && (f = Vh(d.N, d.Hb, d.la, e, c, k));
                    b == d.Hb && (f = Vh(d.N, d.N, d.la, e, c, k));
                    b == d.Kb && (f = e == d.La && c.o == k.o ? d.La : d.la);
                    if (b == d.N || b == d.La)
                        f = d.la;
                    b == d.la && (f = k.o && c.o == k.o ? d.K : d.v);
                    return f;
                }, Yc: function (b, c, h) { d.dispatchEvent(new I("onstatechange", { state: b.name })); return e.get(b)(c, h); }, handleError: function (b) {
                    return t(function h() {
                        return y(h, function (c) { switch (c.j) {
                            case 1: return u(c, Nh(d, b), 2);
                            case 2: return c["return"](b.o ? d.K : d.v);
                        } });
                    });
                }, Dd: function (b) { d.dispatchEvent(new I("onstateidle", { state: b.name })); } });
            b && this.ab(b, !0);
        }
        Ia(Z, wb);
        D("shaka.Player", Z);
        Z.prototype.destroy = function () {
            var b = this;
            return t(function d() {
                var e;
                return y(d, function (d) {
                    switch (d.j) {
                        case 1:
                            if (b.g == Wh)
                                return d["return"]();
                            b.g = Wh;
                            e = uh(b.Na, function () { return { node: b.v, payload: rh(), Aa: !1 }; });
                            return u(d, new Promise(function (b) { e.Ua = function () { }; e.vb = function () { b(); }; e.Ca = function () { b(); }; e.onError = function () { b(); }; e.wb = function () { b(); }; }), 2);
                        case 2: return u(d, b.Na.destroy(), 3);
                        case 3:
                            b.i && (b.i.a(), b.i = null);
                            b.Gb = null;
                            b.l = null;
                            b.c = null;
                            if (!b.H) {
                                d.j = 0;
                                break;
                            }
                            return u(d, b.H.destroy(), 5);
                        case 5: b.H = null, x(d);
                    }
                });
            });
        };
        Z.prototype.destroy = Z.prototype.destroy;
        Z.version = "2.5.0-npm-dirty";
        var Xh = ["", "5"];
        qe = new function (b) { this.a = b; this.c = re; this.b = se; }(new oe(Number(Xh[0]), Number(Xh[1])));
        var Yh = ["output-restricted", "internal-error"], Zh = {};
        Z.registerSupportPlugin = function (b, c) { Zh[b] = c; };
        Z.isBrowserSupported = function () { return window.Promise && window.Uint8Array && Array.prototype.forEach && window.MediaKeys && window.navigator && window.navigator.requestMediaKeySystemAccess && window.MediaKeySystemAccess && window.MediaKeySystemAccess.prototype.getConfiguration ? Zb() ? !0 : $b("application/x-mpegurl") : !1; };
        Z.probeSupport = function () {
            return Qc().then(function (b) {
                for (var c = O.Od(), d = {}, e = r('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",")), f = e.next(); !f.done; f = e.next()) {
                    f = f.value;
                    d[f] = Zb() ? Ad(f) ? !0 : MediaSource.isTypeSupported(f) || ed(f) : $b(f);
                    var g = f.split(";")[0];
                    d[g] = d[g] || d[f];
                }
                b = { manifest: c, media: d, drm: b };
                for (var h in Zh)
                    b[h] = Zh[h]();
                return b;
            });
        };
        Z.prototype.ab = function (b, c) { c = void 0 === c ? !0 : c; if (this.g == Wh)
            return Promise.reject($h()); var d = rh(); d.o = b; Zb() || (c = !1); var e = c ? this.Ja : this.K, f = uh(this.Na, function () { return { node: e, payload: d, Aa: !1 }; }); f.Ua = function () { }; return ai(f); };
        Z.prototype.attach = Z.prototype.ab;
        Z.prototype.detach = function () { var b = this; if (this.g == Wh)
            return Promise.reject($h()); var c = uh(this.Na, function () { return { node: b.v, payload: rh(), Aa: !1 }; }); c.Ua = function () { }; return ai(c); };
        Z.prototype.detach = Z.prototype.detach;
        Z.prototype.ne = function (b) { var c = this; b = void 0 === b ? !0 : b; if (this.g == Wh)
            return Promise.reject($h()); Zb() || (b = !1); var d = rh(), e = uh(this.Na, function (e) { var f = e.o && b ? c.Ja : e.o ? c.K : c.v; d.o = e.o; return { node: f, payload: d, Aa: !1 }; }); e.Ua = function () { }; return ai(e); };
        Z.prototype.unload = Z.prototype.ne;
        Z.prototype.load = function (b, c, d) {
            if (this.g == Wh)
                return Promise.reject($h());
            this.dispatchEvent(new I("loading"));
            var e = rh();
            e.uri = b;
            e.ic = Date.now() / 1E3;
            d && "string" != typeof d && (pe("Loading with a manifest parser factory", "Please register a manifest parser and for the mime-type."), e.fa = function () { return new d; });
            d && "string" == typeof d && (e.mimeType = d);
            void 0 !== c && (e.startTime = c);
            var f = bi(e) ? this.La : this.N, g = uh(this.Na, function (b) { if (null == b.o)
                return null; e.o = b.o; return { node: f, payload: e, Aa: !0 }; });
            g.Ua = function () { };
            return new Promise(function (b, c) { g.wb = function () { return c(new F(2, 7, 7002)); }; g.vb = function () { return b(); }; g.Ca = function () { return c($h()); }; g.onError = function (b) { return c(b); }; });
        };
        Z.prototype.load = Z.prototype.load;
        function bi(b) { if (b.fa)
            return !1; if (!Zb())
            return !0; var c = b.mimeType; b = b.uri || ""; c || (c = { mp4: "video/mp4", m4v: "video/mp4", m4a: "audio/mp4", webm: "video/webm", ts: "video/mp2t", m3u8: "application/x-mpegurl", mp3: "audio/mpeg", aac: "audio/aac", flac: "audio/flac" }[O.getExtension(b)]); return c ? $b(c) ? O.isSupported(b, c) ? !!navigator.vendor && navigator.vendor.includes("Apple") : !0 : !1 : !1; }
        function Mh(b, c, d) { null == c.o && (c.o = d.o, K(b.i, c.o, "error", function () { var c = ci(b); c && b.pa(c); })); b.a = c.o; return Promise.resolve(); }
        function Nh(b, c) {
            return t(function e() {
                return y(e, function (e) {
                    switch (e.j) {
                        case 1:
                            b.g != Wh && (b.g = Jh);
                            b.dispatchEvent(new I("unloading"));
                            c.currentTime = null;
                            c.fa = null;
                            c.mimeType = null;
                            c.startTime = null;
                            c.uri = null;
                            c.o && (b.i.Y(c.o, "loadeddata"), b.i.Y(c.o, "playing"), b.i.Y(c.o, "pause"), b.i.Y(c.o, "ended"), b.i.Y(c.o, "ratechange"));
                            b.Ka && (b.Ka.a(), b.Ka = null);
                            b.ib && (b.ib.stop(), b.ib = null);
                            if (!b.m) {
                                e.j = 2;
                                break;
                            }
                            return u(e, b.m.stop(), 3);
                        case 3: b.m = null;
                        case 2:
                            if (!b.l) {
                                e.j = 4;
                                break;
                            }
                            return u(e, b.l.stop(), 4);
                        case 4:
                            if (!b.f) {
                                e.j =
                                    6;
                                break;
                            }
                            return u(e, b.f.destroy(), 7);
                        case 7: b.f = null;
                        case 6:
                            b.s && (b.s.a(), b.s = null);
                            if (!b.G) {
                                e.j = 8;
                                break;
                            }
                            return u(e, b.G.destroy(), 9);
                        case 9: b.G = null;
                        case 8:
                            c.o && c.o.src && (c.o.removeAttribute("src"), c.o.load());
                            if (!b.h) {
                                e.j = 10;
                                break;
                            }
                            return u(e, b.h.destroy(), 11);
                        case 11: b.h = null;
                        case 10: b.B.a.clear(), b.Ha = null, b.M = null, b.kb.clear(), b.b = null, b.u = null, b.Ma = !0, di(b), x(e);
                    }
                });
            });
        }
        function Oh(b, c) { return t(function e() { var f, g, h, k; return y(e, function (e) { switch (e.j) {
            case 1: return f = window.muxjs ? new Uc : new Vc, g = b.c.textDisplayFactory, h = new g, k = new Ed(c.o, f, h), u(e, k.s, 2);
            case 2: b.G = k, x(e);
        } }); }); }
        function Ph(b, c, d) { return t(function f() { var g, h, k; return y(f, function (f) { switch (f.j) {
            case 1:
                c.fa = d.fa;
                c.mimeType = d.mimeType;
                c.uri = d.uri;
                g = c.uri;
                h = b.H;
                b.Ha = g;
                if (c.fa) {
                    b.m = c.fa();
                    f.j = 2;
                    break;
                }
                k = b;
                return u(f, O.create(g, h, b.c.manifest.retryParameters, c.mimeType), 3);
            case 3: k.m = f.w;
            case 2: b.m.configure(b.c.manifest), x(f);
        } }); }); }
        function Qh(b, c) {
            var d = c.uri, e = b.H;
            b.mb = new yg;
            zg(b.mb, function (c) { ei(b, "timelineregionadded", c); });
            var f = { networkingEngine: e, filterNewPeriod: function (c) { return b.Ob(c); }, filterAllPeriods: function (c) { return fi(b, c); }, onTimelineRegionAdded: function (c) { var d = b.mb; a: {
                    var e = r(d.b);
                    for (var f = e.next(); !f.done; f = e.next())
                        if (f = f.value, f.schemeIdUri == c.schemeIdUri && f.startTime == c.startTime && f.endTime == c.endTime) {
                            e = f;
                            break a;
                        }
                    e = null;
                } null == e && (d.b.add(c), d.c(c)); }, onEvent: function (c) { return b.dispatchEvent(c); }, onError: function (c) { return b.pa(c); } };
            return new H(Promise.resolve().then(function () { return t(function h() { var c; return y(h, function (e) { switch (e.j) {
                case 1: return c = b, u(e, b.m.start(d, f), 2);
                case 2:
                    c.b = e.w;
                    b.dispatchEvent(new I("manifestparsed"));
                    if (0 == b.b.periods.length)
                        throw new F(2, 4, 4014);
                    gi(b.b.periods);
                    x(e);
            } }); }); }), function () { return b.m.stop(); });
        }
        function Rh(b) { return t(function d() { return y(d, function (d) { switch (d.j) {
            case 1: return b.h = new qc({ ub: b.H, onError: function (d) { b.pa(d); }, Cc: function (d) { hi(b, d); }, onExpirationUpdated: function (d, e) { ii(b, d, e); }, onEvent: function (d) { b.dispatchEvent(d); } }), b.h.configure(b.c.drm), u(d, vc(b.h, cg(b.b.periods), b.b.offlineSessionIds), 2);
            case 2: fi(b, b.b.periods), x(d);
        } }); }); }
        function Sh(b, c, d) {
            return t(function f() {
                var g, h, k, l, m, p, q, v, w;
                return y(f, function (f) {
                    switch (f.j) {
                        case 1: return c.startTime = d.startTime, g = c.o, h = c.uri, b.Ha = h, b.u = new Ih, k = function () { return ji(b); }, l = function () { var c = b.a.playbackRate; 0 != c && b.J.set(c); }, K(b.i, g, "playing", k), K(b.i, g, "pause", k), K(b.i, g, "ended", k), K(b.i, g, "ratechange", l), m = b.c.abrFactory, b.l && b.Gb == m || (b.Gb = m, b.l = new m, b.l.configure(b.c.abr)), ki(b, b.b.periods), b.jb = new Nf(b.c.preferredAudioLanguage, b.c.preferredVariantRole, b.c.preferredAudioChannelCount),
                            b.ta = b.c.preferredTextLanguage, li(b.b.presentationTimeline, b.c.playRangeStart, b.c.playRangeEnd), u(f, b.h.ab(g), 2);
                        case 2: return b.l.init(function (c, d, f) { d = void 0 === d ? !1 : d; f = void 0 === f ? 0 : f; a: {
                            var g = r(b.b.periods);
                            for (var h = g.next(); !h.done; h = g.next())
                                if (h = h.value, h.variants.includes(c)) {
                                    g = h;
                                    break a;
                                }
                            g = null;
                        } mi(b, g, c, !0); b.f && (Sg(b.f, c, d, f), ni(b)); }), b.s = oi(b, c.startTime), b.Ka = pi(b), b.J = new ig({ qb: function () { return c.o.playbackRate; }, gc: function (b) { c.o.playbackRate = b; }, wc: function (b) { c.o.currentTime += b; } }),
                            p = Math.max(b.b.minBufferTime, b.c.streaming.rebufferingGoal), qi(b, p), b.f = ri(b), b.f.configure(b.c.streaming), si(b), b.g = ti, b.dispatchEvent(new I("streaming")), u(f, b.f.start(), 3);
                        case 3: b.c.streaming.startAtSegmentBoundary && (q = b.s.i(), v = ui(b, q), b.s.s(v)), b.b.periods.forEach(b.Ob.bind(b)), vi(b), ni(b), w = wi(b), w.variants.some(function (b) { return b.primary; }), xi(b, w.variants), Rb(b.i, g, "loadeddata", function () { b.u.c = Date.now() / 1E3 - d.ic; }), x(f);
                    }
                });
            });
        }
        function Th(b, c) {
            return t(function e() {
                var f, g;
                return y(e, function (e) {
                    switch (e.j) {
                        case 1: return f = bd, b.h = new qc({ ub: b.H, onError: function (c) { b.pa(c); }, Cc: function (c) { hi(b, c); }, onExpirationUpdated: function (c, e) { ii(b, c, e); }, onEvent: function (c) { b.dispatchEvent(c); } }), b.h.configure(b.c.drm), g = { id: 0, language: "und", primary: !1, audio: null, video: { id: 0, originalId: null, createSegmentIndex: Promise.resolve.bind(Promise), findSegmentPosition: function () { return null; }, getSegmentReference: function () { return null; }, initSegmentReference: null,
                                presentationTimeOffset: 0, mimeType: "video/mp4", codecs: "", encrypted: !0, keyId: null, language: "und", label: null, type: f.ua, primary: !1, trickModeVideo: null, emsgSchemeIdUris: null, roles: [], channelsCount: null, closedCaptions: null }, bandwidth: 100, drmInfos: [], allowedByApplication: !0, allowedByKeySystem: !0 }, u(e, vc(b.h, [g], []), 2);
                        case 2: return u(e, b.h.ab(c.o), 0);
                    }
                });
            });
        }
        function Uh(b, c, d) {
            function e() { return ji(b); }
            c.uri = d.uri;
            c.startTime = d.startTime;
            b.Ha = c.uri;
            b.u = new Ih;
            b.s = new rg(c.o);
            null != c.startTime && b.s.s(c.startTime);
            b.J = new ig({ qb: function () { return c.o.playbackRate; }, gc: function (b) { c.o.playbackRate = b; }, wc: function (b) { c.o.currentTime += b; } });
            qi(b, b.c.streaming.rebufferingGoal);
            K(b.i, c.o, "playing", e);
            K(b.i, c.o, "pause", e);
            K(b.i, c.o, "ended", e);
            Rb(b.i, c.o, "loadeddata", function () { b.u.c = Date.now() / 1E3 - d.ic; });
            b.a.audioTracks && (K(b.i, b.a.audioTracks, "addtrack", function () { return vi(b); }),
                K(b.i, b.a.audioTracks, "removetrack", function () { return vi(b); }));
            if (b.a.textTracks) {
                var f = b.a.textTracks;
                K(b.i, f, "addtrack", function () { return vi(b); });
                K(b.i, f, "removetrack", function () { return vi(b); });
            }
            c.o.src = c.uri;
            b.g = yi;
            b.dispatchEvent(new I("streaming"));
            var g = new G;
            b.a.readyState >= HTMLMediaElement.HAVE_CURRENT_DATA ? g.resolve() : b.a.error ? g.reject(ci(b)) : (Rb(b.i, b.a, "loadeddata", function () { g.resolve(); }), Rb(b.i, b.a, "error", function () { g.reject(ci(b)); }));
            return new H(g, function () {
                g.reject(new F(2, 7, 7001));
                return Promise.resolve();
            });
        }
        function gi(b) { function c(b) { return b.video && b.audio || b.video && b.video.codecs.includes(","); } b.some(function (b) { return b.variants.some(c); }) && b.forEach(function (b) { b.variants = b.variants.filter(c); }); }
        function si(b) {
            function c(b) { var c = ""; b.video && (c = Yb(b.video.codecs)[0]); var d = ""; b.audio && (d = Yb(b.audio.codecs)[0]); return c + "-" + d; }
            var d = b.b.periods.reduce(function (b, c) { return b.concat(c.variants); }, []);
            d = ie(d, b.c.preferredAudioChannelCount);
            var e = new vb;
            d.forEach(function (b) { var d = c(b); e.push(d, b); });
            var f = null, g = Infinity;
            e.forEach(function (b, c) { var d = 0, e = 0; c.forEach(function (b) { d += b.bandwidth || 0; ++e; }); var h = d / e; h < g && (f = b, g = h); });
            b.b.periods.forEach(function (b) {
                b.variants = b.variants.filter(function (b) {
                    return c(b) ==
                        f ? !0 : !1;
                });
            });
        }
        function Lh(b) { return new J(function (c, d) { b.l && b.l.segmentDownloaded(c, d); }); }
        function oi(b, c) { return new sg(b.a, b.b, b.c.streaming, c, function () { b.Ka && bg(b.Ka, !0); b.f && Yg(b.f); }, function (c) { return b.dispatchEvent(c); }); }
        function pi(b) { var c = new gg(b.b); hg(c, function () { vi(b); }); var d = new Ag(b.mb); Eg(d, function (c) { ei(b, "timelineregionenter", c); }, function (c) { ei(b, "timelineregionexit", c); }, function (c, d) { d || (ei(b, "timelineregionenter", c), ei(b, "timelineregionexit", c)); }); var e = new Zf(b.a); e.b.add(c); e.b.add(d); return e; }
        function qi(b, c) { b.M = new Qf(c, Math.min(.5, c / 2)); b.M.a = Sf; di(b); b.ib = (new E(function () { switch (b.g) {
            case yi:
                var c = b.a.ended ? !0 : Wc(b.a.buffered) >= b.a.duration - .1;
                break;
            case ti:
                a: {
                    var e;
                    (e = b.a.ended) || (e = b.G, e = e.g ? "ended" == e.g.readyState : !0);
                    if (e)
                        c = !0;
                    else {
                        if (b.b.presentationTimeline.S() && (e = b.b.presentationTimeline.Qa(), Wc(b.a.buffered) >= e)) {
                            c = !0;
                            break a;
                        }
                        c = !1;
                    }
                }
                break;
            default: c = !1;
        } var f = Yc(b.a.buffered, b.a.currentTime); e = b.M; var g = c, h = e.b.get(e.a); c = e.a; f = g || f >= h ? Rf : Sf; e.a = f; c != f && di(b); })).qa(.25); }
        function ri(b) { return new Fg(b.b, { za: function () { return b.s.i(); }, F: b.G, ub: b.H, Bc: b.Cd.bind(b), Ac: b.Uc.bind(b), onError: b.pa.bind(b), onEvent: function (c) { return b.dispatchEvent(c); }, Fd: b.Gd.bind(b), $b: b.Kd.bind(b) }); }
        Z.prototype.configure = function (b, c) { if (2 == arguments.length && "string" == typeof b) {
            for (var d = b, e = {}, f = e, g = 0, h = 0;;) {
                g = d.indexOf(".", g);
                if (0 > g)
                    break;
                if (0 == g || "\\" != d[g - 1])
                    h = d.substring(h, g).replace(/\\\./g, "."), f[h] = {}, f = f[h], h = g + 1;
                g += 1;
            }
            f[d.substring(h).replace(/\\\./g, ".")] = c;
            b = e;
        } d = Bh(this.c, b, Kh(this)); zi(this); return d; };
        Z.prototype.configure = Z.prototype.configure;
        function zi(b) { b.m && b.m.configure(b.c.manifest); b.h && b.h.configure(b.c.drm); if (b.f) {
            b.f.configure(b.c.streaming);
            try {
                b.b.periods.forEach(b.Ob.bind(b));
            }
            catch (f) {
                b.pa(f);
            }
            var c = Jg(b.f), d = Lg(b.f), e = wi(b);
            c = le(c, d, e.variants);
            b.l && c && c.allowedByApplication && c.allowedByKeySystem ? xi(b, e.variants) : Ai(b, e);
        } b.l && (b.l.configure(b.c.abr), b.c.abr.enabled && !b.Ma ? b.l.enable() : b.l.disable(), Bi(b)); }
        Z.prototype.getConfiguration = function () { var b = Kh(this); Bh(b, this.c, Kh(this)); return b; };
        Z.prototype.getConfiguration = Z.prototype.getConfiguration;
        Z.prototype.Rd = function () { for (var b in this.c)
            delete this.c[b]; Bh(this.c, Kh(this), Kh(this)); zi(this); };
        Z.prototype.resetConfiguration = Z.prototype.Rd;
        Z.prototype.hd = function () { return this.g; };
        Z.prototype.getLoadMode = Z.prototype.hd;
        Z.prototype.md = function () { return this.a; };
        Z.prototype.getMediaElement = Z.prototype.md;
        Z.prototype.od = function () { return this.H; };
        Z.prototype.getNetworkingEngine = Z.prototype.od;
        Z.prototype.ad = function () { return this.Ha; };
        Z.prototype.getAssetUri = Z.prototype.ad;
        Z.prototype.ld = function () { pe("getManifestUri", 'Please use "getAssetUri" instead.'); return this.Ha; };
        Z.prototype.getManifestUri = Z.prototype.ld;
        Z.prototype.S = function () { return this.b ? this.b.presentationTimeline.S() : this.a && this.a.src ? Infinity == this.a.duration : !1; };
        Z.prototype.isLive = Z.prototype.S;
        Z.prototype.Sa = function () { return this.b ? this.b.presentationTimeline.Sa() : !1; };
        Z.prototype.isInProgress = Z.prototype.Sa;
        Z.prototype.xd = function () { if (this.b) {
            if (!this.b.periods.length)
                return !1;
            var b = this.b.periods[0].variants;
            return b.length ? !b[0].video : !1;
        } return this.a && this.a.src ? this.a.videoTracks ? 0 == this.a.videoTracks.length : 0 == this.a.videoHeight : !1; };
        Z.prototype.isAudioOnly = Z.prototype.xd;
        Z.prototype.Td = function () { if (this.b) {
            var b = this.b.presentationTimeline;
            return { start: b.Pa(), end: b.ga() };
        } return this.a && this.a.src && (b = this.a.seekable, b.length) ? { start: b.start(0), end: b.end(b.length - 1) } : { start: 0, end: 0 }; };
        Z.prototype.seekRange = Z.prototype.Td;
        Z.prototype.keySystem = function () { return this.h ? this.h.keySystem() : ""; };
        Z.prototype.keySystem = Z.prototype.keySystem;
        Z.prototype.drmInfo = function () { return this.h ? this.h.a : null; };
        Z.prototype.drmInfo = Z.prototype.drmInfo;
        Z.prototype.Sb = function () { return this.h ? this.h.Sb() : Infinity; };
        Z.prototype.getExpiration = Z.prototype.Sb;
        Z.prototype.vc = function () { return this.M ? this.M.a == Sf : !1; };
        Z.prototype.isBuffering = Z.prototype.vc;
        Z.prototype.qd = function () { if (this.J) {
            var b = this.J;
            b = b.g ? 0 : b.f;
        }
        else
            b = 0; return b; };
        Z.prototype.getPlaybackRate = Z.prototype.qd;
        Z.prototype.me = function (b) { 0 == b ? Qa("A trick play rate of 0 is unsupported!") : (this.g == yi && this.J.set(b), this.g == ti && (this.J.set(b), Qg(this.f, 1 < Math.abs(b)))); };
        Z.prototype.trickPlay = Z.prototype.me;
        Z.prototype.Vc = function () { this.g == yi && this.J.set(1); this.g == ti && (this.J.set(1), Qg(this.f, !1)); };
        Z.prototype.cancelTrickPlay = Z.prototype.Vc;
        Z.prototype.Vb = function () { if (this.b && this.s) {
            for (var b = Ci(this), c = [], d = r(Di(this)), e = d.next(); !e.done; e = d.next()) {
                e = e.value;
                var f = ce(e);
                f.active = e == b;
                c.push(f);
            }
            return c;
        } return this.a && this.a.audioTracks ? Array.from(this.a.audioTracks).map(function (b) { var c = ge(b); c.active = b.enabled; c.type = "variant"; c.originalAudioId = b.id; "main" == b.kind ? (c.primary = !0, c.roles = ["main"], c.audioRoles = ["main"]) : c.audioRoles = []; return c; }) : []; };
        Z.prototype.getVariantTracks = Z.prototype.Vb;
        Z.prototype.Ra = function () { if (this.b && this.s) {
            for (var b = Ei(this), c = [], d = r(Fi(this)), e = d.next(); !e.done; e = d.next()) {
                e = e.value;
                var f = de(e);
                f.active = e == b;
                c.push(f);
            }
            return c;
        } return this.a && this.a.src && this.a.textTracks ? Array.from(this.a.textTracks).map(function (b) { var c = ge(b); c.active = "disabled" != b.mode; c.type = "text"; c.originalTextId = b.id; "captions" == b.kind && (c.mimeType = "application/cea-608"); return c; }) : []; };
        Z.prototype.getTextTracks = Z.prototype.Ra;
        Z.prototype.fc = function (b) { if (this.b && this.f) {
            var c = wi(this), d = c.textStreams.find(function (c) { return c.id == b.id; });
            d && (Ff(this.B, c, d), Hh(this.u.b, d, !1), Gi(this, d), this.ta = d.language);
        }
        else if (this.a && this.a.src && this.a.textTracks) {
            c = Array.from(this.a.textTracks);
            c = r(c);
            for (d = c.next(); !d.done; d = c.next())
                d = d.value, ee(d) == b.id ? d.mode = this.Ia ? "showing" : "hidden" : d.mode = "disabled";
            Hi(this);
        } };
        Z.prototype.selectTextTrack = Z.prototype.fc;
        Z.prototype.Vd = function () { pe("selectEmbeddedTextTrack", "If closed captions are signaled in the manifest, a text stream will be created to represent them. Please use SelectTextTrack."); var b = this.Ra().filter(function (b) { return "application/cea-608" == b.mimeType; }); 0 < b.length && this.fc(b[0]); };
        Z.prototype.selectEmbeddedTextTrack = Z.prototype.Vd;
        Z.prototype.qe = function () { pe("usingEmbeddedTextTrack", "If closed captions are signaled in the manifest, a text stream will be created to represent them. There should be no reason to know if the player is playing embedded text."); var b = this.Ra().filter(function (b) { return b.active; })[0]; return b ? "application/cea-608" == b.mimeType : !1; };
        Z.prototype.usingEmbeddedTextTrack = Z.prototype.qe;
        Z.prototype.Xd = function (b, c, d) {
            d = void 0 === d ? 0 : d;
            if (this.b && this.f) {
                var e = wi(this);
                this.c.abr.enabled && Qa("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");
                var f = e.variants.find(function (c) { return c.id == b.id; });
                f && he(f) && (mi(this, e, f, !1), Ii(this, f, c, d), this.jb = new Mf(f), xi(this, e.variants));
            }
            else if (this.a && this.a.audioTracks) {
                c = Array.from(this.a.audioTracks);
                c = r(c);
                for (d = c.next(); !d.done; d =
                    c.next())
                    d = d.value, ee(d) == b.id && (d.enabled = !0);
                Ji(this);
            }
        };
        Z.prototype.selectVariantTrack = Z.prototype.Xd;
        Z.prototype.cd = function () { return Ki(this.Vb()); };
        Z.prototype.getAudioLanguagesAndRoles = Z.prototype.cd;
        Z.prototype.vd = function () { return Ki(this.Ra()); };
        Z.prototype.getTextLanguagesAndRoles = Z.prototype.vd;
        Z.prototype.bd = function () { return Array.from(Li(this.Vb())); };
        Z.prototype.getAudioLanguages = Z.prototype.bd;
        Z.prototype.ud = function () { return Array.from(Li(this.Ra())); };
        Z.prototype.getTextLanguages = Z.prototype.ud;
        Z.prototype.Ud = function (b, c) { if (this.b && this.s) {
            var d = wi(this);
            this.jb = new Nf(b, c || "", 0);
            Ai(this, d);
        }
        else if (this.a && this.a.audioTracks) {
            d = Array.from(this.a.audioTracks);
            d = r(d);
            for (var e = d.next(); !e.done; e = d.next())
                e = e.value, e.language == b && (e.enabled = !0);
            Ji(this);
        } };
        Z.prototype.selectAudioLanguage = Z.prototype.Ud;
        Z.prototype.Wd = function (b, c) { if (this.b && this.s) {
            var d = wi(this);
            this.ta = b;
            this.$a = c || "";
            Ai(this, d);
        }
        else
            (d = this.Ra().filter(function (c) { return c.language == b; })[0]) && this.fc(d); };
        Z.prototype.selectTextLanguage = Z.prototype.Wd;
        Z.prototype.Xb = function () { var b = this.Ia; return this.b ? this.G.h.isTextVisible() : this.a && this.a.src && this.a.textTracks ? Array.from(this.a.textTracks).some(function (b) { return "showing" == b.mode; }) : b; };
        Z.prototype.isTextTrackVisible = Z.prototype.Xb;
        Z.prototype.be = function (b) {
            var c = this;
            return t(function e() {
                var f, g, h, k, l, m;
                return y(e, function (e) {
                    switch (e.j) {
                        case 1:
                            f = c.Ia;
                            g = b;
                            if (f == g)
                                return e["return"]();
                            c.Ia = g;
                            if (c.g != ti) {
                                if (c.a && c.a.src && c.a.textTracks) {
                                    h = Array.from(c.a.textTracks);
                                    for (var p = r(h), v = p.next(); !v.done; v = p.next())
                                        k = v.value, "disabled" != k.mode && (k.mode = b ? "showing" : "hidden");
                                }
                                e.j = 2;
                                break;
                            }
                            c.G.h.setTextVisibility(b);
                            if (c.c.streaming.alwaysStreamText) {
                                e.j = 2;
                                break;
                            }
                            if (!b) {
                                p = c.f;
                                p.B = !0;
                                if (v = p.b.get("text"))
                                    Gg(v), p.b["delete"]("text");
                                e.j =
                                    2;
                                break;
                            }
                            l = wi(c);
                            m = je(l.textStreams, c.ta, c.$a);
                            if (!(0 < m.length)) {
                                e.j = 2;
                                break;
                            }
                            return u(e, Mg(c.f, m[0]), 2);
                        case 2: Mi(c), x(e);
                    }
                });
            });
        };
        Z.prototype.setTextTrackVisibility = Z.prototype.be;
        Z.prototype.rd = function () { if (!this.S())
            return null; if (this.b)
            return new Date(1E3 * (this.b.presentationTimeline.f + this.a.currentTime)); if (this.a && this.a.getStartDate) {
            var b = this.a.getStartDate();
            return isNaN(b.getTime()) ? null : new Date(b.getTime() + 1E3 * this.a.currentTime);
        } return null; };
        Z.prototype.getPlayheadTimeAsDate = Z.prototype.rd;
        Z.prototype.td = function () { if (!this.S())
            return null; if (this.b)
            return new Date(1E3 * this.b.presentationTimeline.f); if (this.a && this.a.getStartDate) {
            var b = this.a.getStartDate();
            return isNaN(b.getTime()) ? null : b;
        } return null; };
        Z.prototype.getPresentationStartTimeAsDate = Z.prototype.td;
        Z.prototype.Qb = function () { var b = { total: [], audio: [], video: [], text: [] }; this.g == yi && (b.total = Zc(this.a.buffered)); this.g == ti && this.G.Qb(b); return b; };
        Z.prototype.getBufferedInfo = Z.prototype.Qb;
        Z.prototype.getStats = function () {
            if (this.g != ti && this.g != yi)
                return { width: NaN, height: NaN, streamBandwidth: NaN, decodedFrames: NaN, droppedFrames: NaN, estimatedBandwidth: NaN, loadLatency: NaN, playTime: NaN, pauseTime: NaN, bufferingTime: NaN, switchHistory: [], stateHistory: [] };
            ji(this);
            var b = this.a;
            if (b.getVideoPlaybackQuality) {
                b = b.getVideoPlaybackQuality();
                var c = this.u, d = Number(b.totalVideoFrames);
                c.i = Number(b.droppedVideoFrames);
                c.h = d;
            }
            if (this.g == ti) {
                if (b = Ci(this))
                    this.u.l = b.bandwidth;
                b && b.video && (c = this.u, d = b.video.height ||
                    NaN, c.m = b.video.width || NaN, c.g = d);
                b = this.l.getBandwidthEstimate();
                this.u.f = b;
            }
            var e = this.u;
            b = e.m;
            c = e.g;
            d = e.l;
            var f = e.h, g = e.i, h = e.f, k = e.c, l = Eh(e.a, "playing"), m = Eh(e.a, "paused"), p = Eh(e.a, "buffering"), q = Fh(e.a), v = [];
            e = r(e.b.a);
            for (var w = e.next(); !w.done; w = e.next())
                w = w.value, v.push({ timestamp: w.timestamp, id: w.id, type: w.type, fromAdaptation: w.fromAdaptation, bandwidth: w.bandwidth });
            return { width: b, height: c, streamBandwidth: d, decodedFrames: f, droppedFrames: g, estimatedBandwidth: h, loadLatency: k, playTime: l, pauseTime: m,
                bufferingTime: p, stateHistory: q, switchHistory: v };
        };
        Z.prototype.getStats = Z.prototype.getStats;
        Z.prototype.addTextTrack = function (b, c, d, e, f, g) {
            var h = this;
            return t(function l() {
                var m, p, q, v, w, B, z, C, A;
                return y(l, function (l) {
                    switch (l.j) {
                        case 1:
                            if (h.g == yi)
                                throw Error("State error!");
                            if (h.g != ti)
                                throw Error("State error!");
                            m = wi(h);
                            p = bd;
                            q = h.b.periods.indexOf(m);
                            v = q + 1;
                            w = v >= h.b.periods.length ? h.b.presentationTimeline.R() : h.b.periods[v].startTime;
                            B = w - m.startTime;
                            if (Infinity == B)
                                throw new F(1, 4, 4033);
                            z = new N(1, 0, B, function () { return [b]; }, 0, null);
                            C = { id: h.sc++, originalId: null, createSegmentIndex: Promise.resolve.bind(Promise),
                                findSegmentPosition: function () { return 1; }, getSegmentReference: function (b) { return 1 == b ? z : null; }, initSegmentReference: null, presentationTimeOffset: 0, mimeType: e, codecs: f || "", kind: d, encrypted: !1, keyId: null, language: c, label: g || null, type: p.Z, primary: !1, trickModeVideo: null, emsgSchemeIdUris: null, roles: [], channelsCount: null, closedCaptions: null };
                            h.kb.add(C);
                            m.textStreams.push(C);
                            return u(l, Mg(h.f, C), 2);
                        case 2: return (A = Kg(h.f, "text")) && Ff(h.B, m, A), h.kb["delete"](C), Ai(h, m), vi(h), l["return"](de(C));
                    }
                });
            });
        };
        Z.prototype.addTextTrack = Z.prototype.addTextTrack;
        Z.prototype.ae = function (b, c) { this.lb.width = b; this.lb.height = c; };
        Z.prototype.setMaxHardwareResolution = Z.prototype.ae;
        Z.prototype.ec = function () { if (this.g == ti) {
            var b = this.f;
            if (b.f)
                b = !1;
            else if (b.m)
                b = !1;
            else {
                for (var c = r(b.b.values()), d = c.next(); !d.done; d = c.next())
                    d = d.value, d.cb && (d.cb = !1, Pg(b, d, .1));
                b = !0;
            }
        }
        else
            b = !1; return b; };
        Z.prototype.retryStreaming = Z.prototype.ec;
        Z.prototype.jd = function () { return this.b; };
        Z.prototype.getManifest = Z.prototype.jd;
        Z.prototype.kd = function () { return this.m ? this.m.constructor : null; };
        Z.prototype.getManifestParserFactory = Z.prototype.kd;
        function mi(b, c, d, e) { Gf(b.B, c).variant = d; b = b.u.b; b.c != d && (b.c = d, b.a.push({ timestamp: Date.now() / 1E3, id: d.id, type: "variant", fromAdaptation: e, bandwidth: d.bandwidth })); }
        function Kh(b) { var c = zh(); c.streaming.failureCallback = function (c) { var d = [1001, 1002, 1003]; b.S() && d.includes(c.code) && (c.severity = 1, b.ec()); }; c.textDisplayFactory = function () { return new Y(b.a); }; return c; }
        function ki(b, c) {
            for (var d = 0; d < c.length; d++) {
                for (var e = c[d], f = new Map, g = r(e.variants), h = g.next(); !h.done; h = g.next())
                    if (h = h.value, h.video && h.video.closedCaptions) {
                        h = h.video;
                        for (var k = r(h.closedCaptions.keys()), l = k.next(); !l.done; l = k.next())
                            if (l = l.value, !f.has(l)) {
                                var m = { id: b.sc++, originalId: l, createSegmentIndex: Promise.resolve.bind(Promise), findSegmentPosition: function () { return null; }, getSegmentReference: function () { return null; }, initSegmentReference: null, presentationTimeOffset: 0, mimeType: "application/cea-608",
                                    codecs: "", kind: "caption", encrypted: !1, keyId: null, language: h.closedCaptions.get(l), label: null, type: "text", primary: !1, trickModeVideo: null, emsgSchemeIdUris: null, roles: h.roles, channelsCount: null, closedCaptions: null };
                                f.set(l, m);
                            }
                    }
                f = r(f.values());
                for (g = f.next(); !g.done; g = f.next())
                    e.textStreams.push(g.value);
            }
        }
        function fi(b, c) { var d = b.f ? Jg(b.f) : null, e = b.f ? Lg(b.f) : null; c.forEach(ae.bind(null, b.h, d, e)); d = zb(c, function (b) { return b.variants.some(he); }); if (0 == d)
            throw new F(2, 4, 4032); if (d < c.length)
            throw new F(2, 4, 4011); c.forEach(function (b) { $d(b.variants, this.c.restrictions, this.lb) && this.f && wi(this) == b && vi(this); Ni(this, b.variants); }.bind(b)); }
        n = Z.prototype;
        n.Ob = function (b) { var c = this.f ? Jg(this.f) : null, d = this.f ? Lg(this.f) : null; ae(this.h, c, d, b); c = b.variants; if (!c.some(he))
            throw new F(2, 4, 4011); Ni(this, b.variants); $d(c, this.c.restrictions, this.lb) && this.f && wi(this) == b && vi(this); if (b = this.h ? this.h.a : null)
            for (c = r(c), d = c.next(); !d.done; d = c.next()) {
                d = r(d.value.drmInfos);
                for (var e = d.next(); !e.done; e = d.next())
                    if (e = e.value, e.keySystem == b.keySystem) {
                        e = r(e.initData || []);
                        for (var f = e.next(); !f.done; f = e.next())
                            f = f.value, Fc(this.h, f.initDataType, f.initData);
                    }
            } };
        function Ii(b, c, d, e) { d = void 0 === d ? !1 : d; e = void 0 === e ? 0 : e; b.Ma ? (b.W = c, b.oc = d, b.nc = e) : (Sg(b.f, c, d, e), Ji(b)); }
        function Gi(b, c) { b.Ma ? b.V = c : (Rg(b.f, c, !0, 0), Hi(b)); }
        function ui(b, c) { function d(b, c) { if (!b)
            return null; var d = b.findSegmentPosition(c - g.startTime); return null == d ? null : (d = b.getSegmentReference(d)) ? d.startTime + g.startTime : null; } var e = Jg(b.f), f = Lg(b.f), g = wi(b); e = d(e, c); f = d(f, c); return null != f && null != e ? Math.max(f, e) : null != f ? f : null != e ? e : c; }
        function di(b) { var c = b.vc(); if (b.u && b.M && b.s) {
            var d = b.J;
            d.g = c;
            jg(d);
            ji(b);
        } b.dispatchEvent(new I("buffering", { buffering: c })); }
        function ji(b) { if (b.u && b.M) {
            var c = b.u.a;
            b.M.a == Sf ? Dh(c, "buffering") : b.a.paused ? Dh(c, "paused") : b.a.ended ? Dh(c, "ended") : Dh(c, "playing");
        } }
        function xi(b, c) { try {
            Ni(b, c);
        }
        catch (e) {
            return b.pa(e), null;
        } var d = c.filter(function (b) { return he(b); }); d = b.jb.create(d); b.l.setVariants(Array.from(d.values())); return b.l.chooseVariant(); }
        function Ai(b, c) { var d = xi(b, c.variants); d && (mi(b, c, d, !0), Ii(b, d, !0)); (d = je(c.textStreams, b.ta, b.$a)[0] || null) && (b.c.streaming.alwaysStreamText || b.Xb()) && (Ff(b.B, c, d), Hh(b.u.b, d, !0), Gi(b, d)); ni(b); }
        n.Cd = function (b) {
            try {
                this.Ma = !0;
                this.l.disable();
                Bi(this);
                var c = xi(this, b.variants), d = je(b.textStreams, this.ta, this.$a)[0] || null;
                this.W && (b.variants.includes(this.W) && (c = this.W), this.W = null);
                this.V && (b.textStreams.includes(this.V) && (d = this.V), this.V = null);
                c && mi(this, b, c, !0);
                if (d) {
                    var e = d;
                    Ff(this.B, b, e);
                    Hh(this.u.b, e, !0);
                }
                var f = this.f, g = f.b.get("video");
                if (g)
                    var h = f.c.periods[g.ia];
                else {
                    var k = f.b.get("audio");
                    h = k ? f.c.periods[k.ia] : null;
                }
                var l = c ? c.audio : null;
                if (!h && d) {
                    var m;
                    if (m = l) {
                        b = d;
                        var p = L(this.c.preferredTextLanguage), q = L(l.language), v = L(b.language);
                        m = Ud(v, p) && !Ud(q, v);
                    }
                    m && (this.Ia = !0);
                    this.Ia && this.G.h.setTextVisibility(!0);
                    Mi(this);
                }
                return this.c.streaming.alwaysStreamText || this.Xb() ? { variant: c, text: d } : { variant: c, text: null };
            }
            catch (w) {
                return this.pa(w), { variant: null, text: null };
            }
        };
        n.Uc = function () { this.Ma = !1; this.c.abr.enabled && (this.l.enable(), Bi(this)); this.W && (Sg(this.f, this.W, this.oc, this.nc), Ji(this), this.W = null); this.V && (Rg(this.f, this.V, !0, 0), Hi(this), this.V = null); };
        n.Gd = function () { this.m && this.m.update && this.m.update(); };
        n.Kd = function () { this.s && this.s.u(); };
        function ni(b) { Oi(b, new I("adaptation")); }
        function vi(b) { Oi(b, new I("trackschanged")); }
        function Ji(b) { Oi(b, new I("variantchanged")); }
        function Hi(b) { Oi(b, new I("textchanged")); }
        function Mi(b) { Oi(b, new I("texttrackvisibility")); }
        function Bi(b) { Oi(b, new I("abrstatuschanged", { ze: b.c.abr.enabled })); }
        n.pa = function (b) { if (this.g != Wh) {
            var c = new I("error", { detail: b });
            this.dispatchEvent(c);
            c.defaultPrevented && (b.handled = !0);
        } };
        function ei(b, c, d) { b.dispatchEvent(new I(c, { detail: { schemeIdUri: d.schemeIdUri, value: d.value, startTime: d.startTime, endTime: d.endTime, id: d.id, eventElement: d.eventElement } })); }
        function ci(b) { if (!b.a.error)
            return null; var c = b.a.error.code; if (1 == c)
            return null; var d = b.a.error.msExtendedCode; d && (0 > d && (d += Math.pow(2, 32)), d = d.toString(16)); return new F(2, 3, 3016, c, d, b.a.error.message); }
        function hi(b, c) { if (b.f) {
            var d = wi(b), e = !1, f = Object.keys(c), g = 1 == f.length && "00" == f[0];
            f.length && d.variants.forEach(function (b) { me(b).forEach(function (d) { var f = b.allowedByKeySystem; d.keyId && (d = c[g ? "00" : d.keyId], b.allowedByKeySystem = !!d && !Yh.includes(d)); f != b.allowedByKeySystem && (e = !0); }); });
            f = Jg(b.f);
            var h = Lg(b.f);
            (f = le(f, h, d.variants)) && !f.allowedByKeySystem && Ai(b, d);
            e && (vi(b), xi(b, d.variants));
        } }
        function ii(b, c, d) { if (b.m && b.m.onExpirationUpdated)
            b.m.onExpirationUpdated(c, d); b.dispatchEvent(new I("expirationupdated")); }
        function li(b, c, d) { 0 < c && (b.S() || b.Lc(c)); d < b.R() && (b.S() || b.oa(d)); }
        function Ni(b, c) {
            var d = b.h ? Ub(b.h.K) : {}, e = Object.keys(d);
            e = e.length && "00" == e[0];
            for (var f = !1, g = !1, h = [], k = [], l = r(c), m = l.next(); !m.done; m = l.next()) {
                m = m.value;
                var p = [];
                m.audio && p.push(m.audio);
                m.video && p.push(m.video);
                p = r(p);
                for (var q = p.next(); !q.done; q = p.next())
                    if (q = q.value, q.keyId) {
                        var v = d[e ? "00" : q.keyId];
                        v ? Yh.includes(v) && (k.includes(v) || k.push(v)) : h.includes(q.keyId) || h.push(q.keyId);
                    }
                m.allowedByApplication ? m.allowedByKeySystem && (f = !0) : g = !0;
            }
            if (!f)
                throw new F(2, 4, 4012, { hasAppRestrictions: g, missingKeys: h,
                    restrictedKeyStatuses: k });
        }
        function Oi(b, c) { t(function e() { return y(e, function (e) { switch (e.j) {
            case 1: return u(e, Promise.resolve(), 2);
            case 2: b.g != Wh && b.dispatchEvent(c), x(e);
        } }); }); }
        function Li(b) { var c = new Set; b = r(b); for (var d = b.next(); !d.done; d = b.next())
            d = d.value, d.language ? c.add(L(d.language)) : c.add("und"); return c; }
        function Ki(b) { var c = new Map; b = r(b); for (var d = b.next(); !d.done; d = b.next()) {
            var e = d.value;
            d = "und";
            var f = [];
            e.language && (d = L(e.language));
            "variant" == e.type ? f = e.audioRoles : f = e.roles;
            f && f.length || (f = [""]);
            c.has(d) || c.set(d, new Set);
            e = r(f);
            for (f = e.next(); !f.done; f = e.next())
                f = f.value, c.get(d).add(f);
        } var g = []; c.forEach(function (b, c) { for (var d = r(b), e = d.next(); !e.done; e = d.next())
            g.push({ language: c, role: e.value }); }); return g; }
        function Di(b) { b = wi(b); return null == b ? [] : b.variants.filter(function (b) { return he(b); }); }
        function Fi(b) { var c = wi(b); return null == c ? [] : c.textStreams.filter(function (c) { return !b.kb.has(c); }); }
        function wi(b) { var c = b.s.i(), d = null; b = r(b.b.periods); for (var e = b.next(); !e.done; e = b.next())
            e = e.value, e.startTime <= c && (d = e); return d; }
        function Ci(b) { var c = wi(b); return Gf(b.B, c).variant; }
        function Ei(b) { var c = wi(b); if (null == c)
            return null; if (!Gf(b.B, c).text) {
            var d = je(c.textStreams, b.ta, b.$a);
            d.length && Ff(b.B, c, d[0]);
        } return Gf(b.B, c).text; }
        function $h() { return new F(2, 7, 7E3); }
        function Vh(b, c, d, e, f, g) { return e == b && f.o == g.o && f.uri == g.uri && f.mimeType == g.mimeType && f.fa == g.fa ? c : d; }
        function rh() { return { fa: null, o: null, mimeType: null, startTime: null, ic: null, uri: null }; }
        function ai(b) { return new Promise(function (c, d) { b.Ca = function () { return d($h()); }; b.vb = function () { return c(); }; b.onError = function (b) { return d(b); }; b.wb = function () { return d($h()); }; }); }
        var Wh = 0, Jh = 1, ti = 2, yi = 3;
        Z.LoadMode = { DESTROYED: Wh, NOT_LOADED: Jh, MEDIA_SOURCE: ti, SRC_EQUALS: yi };
        D("shaka.polyfill.installAll", function () { for (var b = 0; b < Pi.length; ++b)
            Pi[b].Tc(); });
        var Pi = [];
        function Qi(b, c) { c = c || 0; for (var d = { priority: c, Tc: b }, e = 0; e < Pi.length; e++)
            if (Pi[e].priority < c) {
                Pi.splice(e, 0, d);
                return;
            } Pi.push(d); }
        D("shaka.polyfill.register", Qi);
        function Ri(b) { var c = b.type.replace(/^(webkit|moz|MS)/, "").toLowerCase(); if ("function" === typeof Event)
            var d = new Event(c, b);
        else
            d = document.createEvent("Event"), d.initEvent(c, b.bubbles, b.cancelable); b.target.dispatchEvent(d); }
        Qi(function () {
            if (window.Document) {
                var b = Element.prototype;
                b.requestFullscreen = b.requestFullscreen || b.mozRequestFullScreen || b.msRequestFullscreen || b.webkitRequestFullscreen;
                b = Document.prototype;
                b.exitFullscreen = b.exitFullscreen || b.mozCancelFullScreen || b.msExitFullscreen || b.webkitExitFullscreen;
                "fullscreenElement" in document || (Object.defineProperty(document, "fullscreenElement", { get: function () { return document.mozFullScreenElement || document.msFullscreenElement || document.webkitFullscreenElement; } }), Object.defineProperty(document, "fullscreenEnabled", { get: function () { return document.mozFullScreenEnabled || document.msFullscreenEnabled || document.webkitSupportsFullscreen || document.webkitFullscreenEnabled; } }));
                document.addEventListener("webkitfullscreenchange", Ri);
                document.addEventListener("webkitfullscreenerror", Ri);
                document.addEventListener("mozfullscreenchange", Ri);
                document.addEventListener("mozfullscreenerror", Ri);
                document.addEventListener("MSFullscreenChange", Ri);
                document.addEventListener("MSFullscreenError", Ri);
            }
        });
        Qi(function () { bc("CrKey") && delete window.indexedDB; });
        var Si;
        function Ti(b, c, d) { if ("input" == b)
            switch (this.type) {
                case "range": b = "change";
            } Si.call(this, b, c, d); }
        Qi(function () { bc("Trident/") && HTMLInputElement.prototype.addEventListener != Ti && (Si = HTMLInputElement.prototype.addEventListener, HTMLInputElement.prototype.addEventListener = Ti); });
        Qi(function () { navigator.languages || Object.defineProperty(navigator, "languages", { get: function () { return navigator.language ? [navigator.language] : ["en"]; } }); });
        Qi(function () { });
        function Ui() { var b = MediaSource.prototype.addSourceBuffer; MediaSource.prototype.addSourceBuffer = function (c) { for (var d = [], e = 0; e < arguments.length; ++e)
            d[e] = arguments[e]; d = b.apply(this, d); d.abort = function () { }; return d; }; }
        function Vi() { var b = SourceBuffer.prototype.remove; SourceBuffer.prototype.remove = function (c, d) { return b.call(this, c, d - .001); }; }
        function Wi() {
            var b = MediaSource.prototype.endOfStream;
            MediaSource.prototype.endOfStream = function (c) { for (var d = [], e = 0; e < arguments.length; ++e)
                d[e] = arguments[e]; for (var h = e = 0; h < this.sourceBuffers.length; ++h) {
                var k = this.sourceBuffers[h];
                k = k.buffered.end(k.buffered.length - 1);
                e = Math.max(e, k);
            } if (!isNaN(this.duration) && e < this.duration)
                for (this.uc = !0, e = 0; e < this.sourceBuffers.length; ++e)
                    this.sourceBuffers[e].pc = !1; return b.apply(this, d); };
            var c = !1, d = MediaSource.prototype.addSourceBuffer;
            MediaSource.prototype.addSourceBuffer =
                function (b) { for (var e = [], g = 0; g < arguments.length; ++g)
                    e[g] = arguments[g]; e = d.apply(this, e); e.mediaSource_ = this; e.addEventListener("updateend", Xi, !1); c || (this.addEventListener("sourceclose", Yi, !1), c = !0); return e; };
        }
        function Xi(b) { var c = b.target, d = c.mediaSource_; if (d.uc) {
            b.preventDefault();
            b.stopPropagation();
            b.stopImmediatePropagation();
            c.pc = !0;
            for (b = 0; b < d.sourceBuffers.length; ++b)
                if (0 == d.sourceBuffers[b].pc)
                    return;
            d.uc = !1;
        } }
        function Yi(b) { b = b.target; for (var c = 0; c < b.sourceBuffers.length; ++c)
            b.sourceBuffers[c].removeEventListener("updateend", Xi, !1); b.removeEventListener("sourceclose", Yi, !1); }
        function Zi() { var b = MediaSource.isTypeSupported; MediaSource.isTypeSupported = function (c) { return "mp2t" == c.split(/ *; */)[0].split("/")[1] ? !1 : b(c); }; }
        function $i() { var b = MediaSource.isTypeSupported; MediaSource.isTypeSupported = function (c) { return "opus" != Yb(c)[0] && b(c); }; }
        function aj() { var b = MediaSource.isTypeSupported, c = /^dv(?:h[e1]|a[v1])\./; MediaSource.isTypeSupported = function (d) { for (var e = d.split(/ *; */), f = e[0], g = {}, h = 1; h < e.length; ++h) {
            var k = e[h].split("="), l = k[0];
            k = k[1].replace(/"(.*)"/, "$1");
            g[l] = k;
        } e = g.codecs; if (!e)
            return b(d); var m = !1, p = !1; d = e.split(",").filter(function (b) { c.test(b) && (p = !0); /^(hev|hvc)1\.2/.test(b) && (m = !0); return !0; }); p && (m = !1); g.codecs = d.join(","); m && (g.eotf = "smpte2084"); for (var q in g)
            f += "; " + q + '="' + g[q] + '"'; return cast.__platform__.canDisplayType(f); }; }
        Qi(function () { if (window.MediaSource)
            if (window.cast && cast.__platform__ && cast.__platform__.canDisplayType)
                aj();
            else if (navigator.vendor && navigator.vendor.includes("Apple")) {
                var b = navigator.appVersion;
                Zi();
                if (b.includes("Version/8"))
                    window.MediaSource = null;
                else if (b.includes("Version/9"))
                    Ui();
                else if (b.includes("Version/10"))
                    Ui(), Wi();
                else if (b.includes("Version/11") || b.includes("Version/12"))
                    Ui(), Vi();
            }
            else
                bc("Tizen") && $i(); });
        function bj(b, c) { try {
            var d = new cj(b, c);
            return Promise.resolve(d);
        }
        catch (e) {
            return Promise.reject(e);
        } }
        function cj(b, c) {
            this.keySystem = b;
            if (b.startsWith("com.apple.fps"))
                for (var d = r(c), e = d.next(); !e.done; e = d.next()) {
                    var f = e.value;
                    if ("required" == f.persistentState)
                        e = null;
                    else {
                        e = { audioCapabilities: [], videoCapabilities: [], persistentState: "optional", distinctiveIdentifier: "optional", initDataTypes: f.initDataTypes, sessionTypes: ["temporary"], label: f.label };
                        var g = !1, h = !1;
                        if (f.audioCapabilities)
                            for (var k = r(f.audioCapabilities), l = k.next(); !l.done; l = k.next())
                                if (l = l.value, l.contentType) {
                                    g = !0;
                                    var m = l.contentType.split(";")[0];
                                    WebKitMediaKeys.isTypeSupported(this.keySystem, m) && (e.audioCapabilities.push(l), h = !0);
                                }
                        if (f.videoCapabilities)
                            for (f = r(f.videoCapabilities), l = f.next(); !l.done; l = f.next())
                                k = l.value, k.contentType && (g = !0, l = k.contentType.split(";")[0], WebKitMediaKeys.isTypeSupported(this.keySystem, l) && (e.videoCapabilities.push(k), h = !0));
                        g || (h = WebKitMediaKeys.isTypeSupported(this.keySystem, "video/mp4"));
                        e = h ? e : null;
                    }
                    if (e) {
                        this.a = e;
                        return;
                    }
                }
            d = Error("Unsupported keySystem");
            d.name = "NotSupportedError";
            d.code = DOMException.NOT_SUPPORTED_ERR;
            throw d;
        }
        cj.prototype.createMediaKeys = function () { var b = new dj(this.keySystem); return Promise.resolve(b); };
        cj.prototype.getConfiguration = function () { return this.a; };
        function ej(b) { var c = this.mediaKeys; c && c != b && fj(c, null); delete this.mediaKeys; return (this.mediaKeys = b) ? fj(b, this) : Promise.resolve(); }
        function dj(b) { this.b = new WebKitMediaKeys(b); this.a = new Ob; this.c = null; }
        dj.prototype.createSession = function (b) { b = b || "temporary"; if ("temporary" != b)
            throw new TypeError("Session type " + b + " is unsupported on this platform."); return new gj(this.b, b); };
        dj.prototype.setServerCertificate = function (b) { this.c = b ? new Uint8Array(b) : null; return Promise.resolve(!0); };
        function fj(b, c) { Pb(b.a); if (!c)
            return Promise.resolve(); K(b.a, c, "webkitneedkey", hj); try {
            return 1 <= c.readyState ? c.webkitSetMediaKeys(b.b) : Rb(b.a, c, "loadedmetadata", function () { c.webkitSetMediaKeys(b.b); }), Promise.resolve();
        }
        catch (d) {
            return Promise.reject(d);
        } }
        function gj(b) { wb.call(this); this.c = null; this.g = b; this.b = this.a = null; this.f = new Ob; this.sessionId = ""; this.expiration = NaN; this.closed = new G; this.keyStatuses = new ij; }
        Ia(gj, wb);
        n = gj.prototype;
        n.generateRequest = function (b, c) { this.a = new G; try {
            this.c = this.g.createSession("video/mp4", new Uint8Array(c)), K(this.f, this.c, "webkitkeymessage", this.ge.bind(this)), K(this.f, this.c, "webkitkeyadded", this.ee.bind(this)), K(this.f, this.c, "webkitkeyerror", this.fe.bind(this)), jj(this, "status-pending");
        }
        catch (d) {
            this.a.reject(d);
        } return this.a; };
        n.load = function () { return Promise.reject(Error("MediaKeySession.load not yet supported")); };
        n.update = function (b) { this.b = new G; try {
            this.c.update(new Uint8Array(b));
        }
        catch (c) {
            this.b.reject(c);
        } return this.b; };
        n.close = function () { try {
            this.c.close(), this.closed.resolve(), Pb(this.f);
        }
        catch (b) {
            this.closed.reject(b);
        } return this.closed; };
        n.remove = function () { return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform")); };
        function kj(b, c) { function d(b) { (new DataView(g.buffer)).setUint32(h, b.byteLength, !0); h += 4; g.set(b, h); h += b.byteLength; } var e = new Uint8Array(b); if ((new DataView(e.buffer)).getUint32(0, !0) + 4 != e.byteLength)
            throw Error("Malformed init data!"); var f = gc(e.slice(4), !0); f = (new Sa(f)).aa; f = new Uint8Array(jc(f, !0)); var g = new Uint8Array(e.byteLength + 4 + f.byteLength + 4 + c.byteLength), h = 0; g.set(e, h); h += e.byteLength; d(f); d(new Uint8Array(c)); return g; }
        function hj(b) { var c = this.mediaKeys.c, d = new Event("encrypted"); d.initDataType = "cenc"; d.initData = kj(b.initData, c); this.dispatchEvent(d); }
        n.ge = function (b) { this.a && (this.a.resolve(), this.a = null); this.dispatchEvent(new I("message", { messageType: void 0 == this.keyStatuses.a ? "license-request" : "license-renewal", message: b.message.buffer })); };
        n.ee = function () { this.b && (jj(this, "usable"), this.b.resolve(), this.b = null); };
        n.fe = function () { var b = Error("EME PatchedMediaKeysApple key error"); b.errorCode = this.c.error; if (null != this.a)
            this.a.reject(b), this.a = null;
        else if (null != this.b)
            this.b.reject(b), this.b = null;
        else
            switch (this.c.error.code) {
                case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:
                case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:
                    jj(this, "output-not-allowed");
                    break;
                default: jj(this, "internal-error");
            } };
        function jj(b, c) { var d = b.keyStatuses; d.size = void 0 == c ? 0 : 1; d.a = c; b.dispatchEvent(new I("keystatuseschange")); }
        function ij() { this.size = 0; this.a = void 0; }
        var lj;
        n = ij.prototype;
        n.forEach = function (b) { this.a && b(this.a, lj); };
        n.get = function (b) { if (this.has(b))
            return this.a; };
        n.has = function (b) { var c = lj; return this.a && oc(new Uint8Array(b), new Uint8Array(c)) ? !0 : !1; };
        n.entries = function () { };
        n.keys = function () { };
        n.values = function () { };
        Qi(function () { window.HTMLVideoElement && window.WebKitMediaKeys && (lj = (new Uint8Array([0])).buffer, delete HTMLMediaElement.prototype.mediaKeys, HTMLMediaElement.prototype.mediaKeys = null, HTMLMediaElement.prototype.setMediaKeys = ej, window.MediaKeys = dj, window.MediaKeySystemAccess = cj, navigator.requestMediaKeySystemAccess = bj); });
        function mj(b) { this.f = []; this.b = []; this.a = []; (new T).X("pssh", this.c.bind(this)).parse(b.buffer); }
        mj.prototype.c = function (b) { if (!(1 < b.version)) {
            var c = nc(b.reader.Da(16)), d = [];
            if (0 < b.version)
                for (var e = b.reader.D(), f = 0; f < e; ++f) {
                    var g = nc(b.reader.Da(16));
                    d.push(g);
                }
            e = b.reader.D();
            b.reader.I(e);
            this.b.push.apply(this.b, d);
            this.f.push(c);
            this.a.push({ start: b.start, end: b.start + b.size - 1 });
        } };
        function nj(b, c) { try {
            var d = new oj(b, c);
            return Promise.resolve(d);
        }
        catch (e) {
            return Promise.reject(e);
        } }
        function oj(b, c) {
            this.keySystem = b;
            for (var d = !1, e = 0; e < c.length; ++e) {
                var f = c[e], g = { audioCapabilities: [], videoCapabilities: [], persistentState: "optional", distinctiveIdentifier: "optional", initDataTypes: f.initDataTypes, sessionTypes: ["temporary"], label: f.label }, h = !1;
                if (f.audioCapabilities)
                    for (var k = 0; k < f.audioCapabilities.length; ++k) {
                        var l = f.audioCapabilities[k];
                        if (l.contentType) {
                            h = !0;
                            var m = l.contentType.split(";")[0];
                            MSMediaKeys.isTypeSupported(this.keySystem, m) && (g.audioCapabilities.push(l), d = !0);
                        }
                    }
                if (f.videoCapabilities)
                    for (k =
                        0; k < f.videoCapabilities.length; ++k)
                        l = f.videoCapabilities[k], l.contentType && (h = !0, m = l.contentType.split(";")[0], MSMediaKeys.isTypeSupported(this.keySystem, m) && (g.videoCapabilities.push(l), d = !0));
                h || (d = MSMediaKeys.isTypeSupported(this.keySystem, "video/mp4"));
                "required" == f.persistentState && (d = !1);
                if (d) {
                    this.a = g;
                    return;
                }
            }
            d = Error("Unsupported keySystem");
            d.name = "NotSupportedError";
            d.code = DOMException.NOT_SUPPORTED_ERR;
            throw d;
        }
        oj.prototype.createMediaKeys = function () { var b = new pj(this.keySystem); return Promise.resolve(b); };
        oj.prototype.getConfiguration = function () { return this.a; };
        function qj(b) { var c = this.mediaKeys; c && c != b && rj(c, null); delete this.mediaKeys; return (this.mediaKeys = b) ? rj(b, this) : Promise.resolve(); }
        function pj(b) { this.a = new MSMediaKeys(b); this.b = new Ob; }
        pj.prototype.createSession = function (b) { b = b || "temporary"; if ("temporary" != b)
            throw new TypeError("Session type " + b + " is unsupported on this platform."); return new sj(this.a, b); };
        pj.prototype.setServerCertificate = function () { return Promise.resolve(!1); };
        function rj(b, c) { function d() { c.msSetMediaKeys(e.a); c.removeEventListener("loadedmetadata", d); } Pb(b.b); if (!c)
            return Promise.resolve(); K(b.b, c, "msneedkey", tj); var e = b; try {
            return 1 <= c.readyState ? c.msSetMediaKeys(b.a) : c.addEventListener("loadedmetadata", d), Promise.resolve();
        }
        catch (f) {
            return Promise.reject(f);
        } }
        function sj(b) { wb.call(this); this.c = null; this.g = b; this.b = this.a = null; this.f = new Ob; this.sessionId = ""; this.expiration = NaN; this.closed = new G; this.keyStatuses = new uj; }
        Ia(sj, wb);
        n = sj.prototype;
        n.generateRequest = function (b, c) { this.a = new G; try {
            this.c = this.g.createSession("video/mp4", new Uint8Array(c), null), K(this.f, this.c, "mskeymessage", this.Jd.bind(this)), K(this.f, this.c, "mskeyadded", this.Hd.bind(this)), K(this.f, this.c, "mskeyerror", this.Id.bind(this)), vj(this, "status-pending");
        }
        catch (d) {
            this.a.reject(d);
        } return this.a; };
        n.load = function () { return Promise.reject(Error("MediaKeySession.load not yet supported")); };
        n.update = function (b) { this.b = new G; try {
            this.c.update(new Uint8Array(b));
        }
        catch (c) {
            this.b.reject(c);
        } return this.b; };
        n.close = function () { try {
            this.c.close(), this.closed.resolve(), Pb(this.f);
        }
        catch (b) {
            this.closed.reject(b);
        } return this.closed; };
        n.remove = function () { return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform")); };
        function tj(b) { if (b.initData) {
            var c = document.createEvent("CustomEvent");
            c.initCustomEvent("encrypted", !1, !1, null);
            c.initDataType = "cenc";
            c.initData = wj(b.initData);
            this.dispatchEvent(c);
        } }
        function wj(b) { if (!b)
            return b; var c = new mj(b); if (1 >= c.a.length)
            return b; for (var d = [], e = 0; e < c.a.length; e++)
            d.push(b.subarray(c.a[e].start, c.a[e].end + 1)); b = []; c = {}; e = r(d); for (d = e.next(); !d.done; c = { sb: c.sb }, d = e.next())
            c.sb = d.value, b.some(function (b) { return function (c) { return oc(c, b.sb); }; }(c)) || b.push(c.sb); c = 0; e = r(b); for (d = e.next(); !d.done; d = e.next())
            c += d.value.length; c = new Uint8Array(c); e = 0; b = r(b); for (d = b.next(); !d.done; d = b.next())
            d = d.value, c.set(d, e), e += d.length; return c; }
        n.Jd = function (b) { this.a && (this.a.resolve(), this.a = null); this.dispatchEvent(new I("message", { messageType: void 0 == this.keyStatuses.a ? "license-request" : "license-renewal", message: b.message.buffer })); };
        n.Hd = function () { this.a ? (vj(this, "usable"), this.a.resolve(), this.a = null) : this.b && (vj(this, "usable"), this.b.resolve(), this.b = null); };
        n.Id = function () { var b = Error("EME PatchedMediaKeysMs key error"); b.errorCode = this.c.error; if (null != this.a)
            this.a.reject(b), this.a = null;
        else if (null != this.b)
            this.b.reject(b), this.b = null;
        else
            switch (this.c.error.code) {
                case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:
                case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:
                    vj(this, "output-not-allowed");
                    break;
                default: vj(this, "internal-error");
            } };
        function vj(b, c) { var d = b.keyStatuses; d.size = void 0 == c ? 0 : 1; d.a = c; b.dispatchEvent(new I("keystatuseschange")); }
        function uj() { this.size = 0; this.a = void 0; }
        var xj;
        n = uj.prototype;
        n.forEach = function (b) { this.a && b(this.a, xj); };
        n.get = function (b) { if (this.has(b))
            return this.a; };
        n.has = function (b) { var c = xj; return this.a && oc(new Uint8Array(b), new Uint8Array(c)) ? !0 : !1; };
        n.entries = function () { };
        n.keys = function () { };
        n.values = function () { };
        Qi(function () { !window.HTMLVideoElement || !window.MSMediaKeys || navigator.requestMediaKeySystemAccess && MediaKeySystemAccess.prototype.getConfiguration || (xj = (new Uint8Array([0])).buffer, delete HTMLMediaElement.prototype.mediaKeys, HTMLMediaElement.prototype.mediaKeys = null, HTMLMediaElement.prototype.setMediaKeys = qj, window.MediaKeys = pj, window.MediaKeySystemAccess = oj, navigator.requestMediaKeySystemAccess = nj); });
        function yj() { return Promise.reject(Error("The key system specified is not supported.")); }
        function zj(b) { return null == b ? Promise.resolve() : Promise.reject(Error("MediaKeys not supported.")); }
        function Aj() { throw new TypeError("Illegal constructor."); }
        Aj.prototype.createSession = function () { };
        Aj.prototype.setServerCertificate = function () { };
        function Bj() { throw new TypeError("Illegal constructor."); }
        Bj.prototype.getConfiguration = function () { };
        Bj.prototype.createMediaKeys = function () { };
        Qi(function () { !window.HTMLVideoElement || navigator.requestMediaKeySystemAccess && MediaKeySystemAccess.prototype.getConfiguration || (navigator.requestMediaKeySystemAccess = yj, delete HTMLMediaElement.prototype.mediaKeys, HTMLMediaElement.prototype.mediaKeys = null, HTMLMediaElement.prototype.setMediaKeys = zj, window.MediaKeys = Aj, window.MediaKeySystemAccess = Bj); }, -10);
        var Cj = "";
        function Dj(b) { var c = Cj; return c ? c + b.charAt(0).toUpperCase() + b.slice(1) : b; }
        function Ej(b, c) { try {
            var d = new Fj(b, c);
            return Promise.resolve(d);
        }
        catch (e) {
            return Promise.reject(e);
        } }
        function Gj(b) { var c = this.mediaKeys; c && c != b && Hj(c, null); delete this.mediaKeys; (this.mediaKeys = b) && Hj(b, this); return Promise.resolve(); }
        function Fj(b, c) {
            this.a = this.keySystem = b;
            var d = !1;
            "org.w3.clearkey" == b && (this.a = "webkit-org.w3.clearkey", d = !1);
            var e = !1;
            var f = document.getElementsByTagName("video");
            f = f.length ? f[0] : document.createElement("video");
            for (var g = 0; g < c.length; ++g) {
                var h = c[g], k = { audioCapabilities: [], videoCapabilities: [], persistentState: "optional", distinctiveIdentifier: "optional", initDataTypes: h.initDataTypes, sessionTypes: ["temporary"], label: h.label }, l = !1;
                if (h.audioCapabilities)
                    for (var m = 0; m < h.audioCapabilities.length; ++m) {
                        var p = h.audioCapabilities[m];
                        if (p.contentType) {
                            l = !0;
                            var q = p.contentType.split(";")[0];
                            f.canPlayType(q, this.a) && (k.audioCapabilities.push(p), e = !0);
                        }
                    }
                if (h.videoCapabilities)
                    for (m = 0; m < h.videoCapabilities.length; ++m)
                        p = h.videoCapabilities[m], p.contentType && (l = !0, f.canPlayType(p.contentType, this.a) && (k.videoCapabilities.push(p), e = !0));
                l || (e = f.canPlayType("video/mp4", this.a) || f.canPlayType("video/webm", this.a));
                "required" == h.persistentState && (d ? (k.persistentState = "required", k.sessionTypes = ["persistent-license"]) :
                    e = !1);
                if (e) {
                    this.b = k;
                    return;
                }
            }
            d = "Unsupported keySystem";
            if ("org.w3.clearkey" == b || "com.widevine.alpha" == b)
                d = "None of the requested configurations were supported.";
            d = Error(d);
            d.name = "NotSupportedError";
            d.code = DOMException.NOT_SUPPORTED_ERR;
            throw d;
        }
        Fj.prototype.createMediaKeys = function () { var b = new Ij(this.a); return Promise.resolve(b); };
        Fj.prototype.getConfiguration = function () { return this.b; };
        function Ij(b) { this.g = b; this.b = null; this.a = new Ob; this.c = []; this.f = {}; }
        function Hj(b, c) { b.b = c; Pb(b.a); var d = Cj; c && (K(b.a, c, d + "needkey", b.Md.bind(b)), K(b.a, c, d + "keymessage", b.je.bind(b)), K(b.a, c, d + "keyadded", b.he.bind(b)), K(b.a, c, d + "keyerror", b.ie.bind(b))); }
        n = Ij.prototype;
        n.createSession = function (b) { b = b || "temporary"; if ("temporary" != b && "persistent-license" != b)
            throw new TypeError("Session type " + b + " is unsupported on this platform."); var c = this.b || document.createElement("video"); c.src || (c.src = "about:blank"); b = new Jj(c, this.g, b); this.c.push(b); return b; };
        n.setServerCertificate = function () { return Promise.resolve(!1); };
        n.Md = function (b) { var c = document.createEvent("CustomEvent"); c.initCustomEvent("encrypted", !1, !1, null); c.initDataType = "webm"; c.initData = b.initData; this.b.dispatchEvent(c); };
        n.je = function (b) { var c = Kj(this, b.sessionId); c && (b = new I("message", { messageType: void 0 == c.keyStatuses.a ? "licenserequest" : "licenserenewal", message: b.message }), c.b && (c.b.resolve(), c.b = null), c.dispatchEvent(b)); };
        n.he = function (b) { if (b = Kj(this, b.sessionId))
            Lj(b, "usable"), b.a && b.a.resolve(), b.a = null; };
        n.ie = function (b) { var c = Kj(this, b.sessionId); c && c.handleError(b); };
        function Kj(b, c) { var d = b.f[c]; return d ? d : (d = b.c.shift()) ? (d.sessionId = c, b.f[c] = d) : null; }
        function Jj(b, c, d) { wb.call(this); this.f = b; this.h = !1; this.a = this.b = null; this.c = c; this.g = d; this.sessionId = ""; this.expiration = NaN; this.closed = new G; this.keyStatuses = new Mj; }
        Ia(Jj, wb);
        n = Jj.prototype;
        n.handleError = function (b) { var c = Error("EME v0.1b key error"); c.errorCode = b.errorCode; c.errorCode.systemCode = b.systemCode; !b.sessionId && this.b ? (c.method = "generateRequest", 45 == b.systemCode && (c.message = "Unsupported session type."), this.b.reject(c), this.b = null) : b.sessionId && this.a ? (c.method = "update", this.a.reject(c), this.a = null) : (c = b.systemCode, b.errorCode.code == MediaKeyError.MEDIA_KEYERR_OUTPUT ? Lj(this, "output-restricted") : 1 == c ? Lj(this, "expired") : Lj(this, "internal-error")); };
        function Nj(b, c, d) {
            if (b.h)
                return Promise.reject(Error("The session is already initialized."));
            b.h = !0;
            try {
                if ("persistent-license" == b.g)
                    if (d)
                        var e = new Uint8Array(ic("LOAD_SESSION|" + d));
                    else {
                        var f = ic("PERSISTENT|"), g = new Uint8Array(f.byteLength + c.byteLength);
                        g.set(new Uint8Array(f), 0);
                        g.set(new Uint8Array(c), f.byteLength);
                        e = g;
                    }
                else
                    e = new Uint8Array(c);
            }
            catch (k) {
                return Promise.reject(k);
            }
            b.b = new G;
            var h = Dj("generateKeyRequest");
            try {
                b.f[h](b.c, e);
            }
            catch (k) {
                if ("InvalidStateError" != k.name)
                    return b.b = null, Promise.reject(k);
                (new E(function () { try {
                    b.f[h](b.c, e);
                }
                catch (l) {
                    b.b.reject(l), b.b = null;
                } })).L(.01);
            }
            return b.b;
        }
        n.hc = function (b, c) { if (this.a)
            this.a.then(this.hc.bind(this, b, c))["catch"](this.hc.bind(this, b, c));
        else {
            this.a = b;
            if ("webkit-org.w3.clearkey" == this.c) {
                var d = ec(c);
                var e = JSON.parse(d);
                "oct" != e.keys[0].kty && (this.a.reject(Error("Response is not a valid JSON Web Key Set.")), this.a = null);
                d = lc(e.keys[0].k);
                e = lc(e.keys[0].kid);
            }
            else
                d = new Uint8Array(c), e = null;
            var f = Dj("addKey");
            try {
                this.f[f](this.c, d, e, this.sessionId);
            }
            catch (g) {
                this.a.reject(g), this.a = null;
            }
        } };
        function Lj(b, c) { var d = b.keyStatuses; d.size = void 0 == c ? 0 : 1; d.a = c; b.dispatchEvent(new I("keystatuseschange")); }
        n.generateRequest = function (b, c) { return Nj(this, c, null); };
        n.load = function (b) { return "persistent-license" == this.g ? Nj(this, null, b) : Promise.reject(Error("Not a persistent session.")); };
        n.update = function (b) { var c = new G; this.hc(c, b); return c; };
        n.close = function () { if ("persistent-license" != this.g) {
            if (!this.sessionId)
                return this.closed.reject(Error("The session is not callable.")), this.closed;
            var b = Dj("cancelKeyRequest");
            try {
                this.f[b](this.c, this.sessionId);
            }
            catch (c) { }
        } this.closed.resolve(); return this.closed; };
        n.remove = function () { return "persistent-license" != this.g ? Promise.reject(Error("Not a persistent session.")) : this.close(); };
        function Mj() { this.size = 0; this.a = void 0; }
        var Oj;
        n = Mj.prototype;
        n.forEach = function (b) { this.a && b(this.a, Oj); };
        n.get = function (b) { if (this.has(b))
            return this.a; };
        n.has = function (b) { var c = Oj; return this.a && oc(new Uint8Array(b), new Uint8Array(c)) ? !0 : !1; };
        n.entries = function () { };
        n.keys = function () { };
        n.values = function () { };
        Qi(function () {
            if (!(!window.HTMLVideoElement || navigator.requestMediaKeySystemAccess && MediaKeySystemAccess.prototype.getConfiguration)) {
                if (HTMLMediaElement.prototype.webkitGenerateKeyRequest)
                    Cj = "webkit";
                else if (!HTMLMediaElement.prototype.generateKeyRequest)
                    return;
                Oj = (new Uint8Array([0])).buffer;
                navigator.requestMediaKeySystemAccess = Ej;
                delete HTMLMediaElement.prototype.mediaKeys;
                HTMLMediaElement.prototype.mediaKeys = null;
                HTMLMediaElement.prototype.setMediaKeys = Gj;
                window.MediaKeys = Ij;
                window.MediaKeySystemAccess =
                    Fj;
            }
        });
        function Pj(b) { b = b.target; if ("picture-in-picture" == b.webkitPresentationMode) {
            document.pictureInPictureElement = b;
            var c = new Event("enterpictureinpicture");
            b.dispatchEvent(c);
        }
        else
            document.pictureInPictureElement == b && (document.pictureInPictureElement = null), c = new Event("leavepictureinpicture"), b.dispatchEvent(c); }
        function Qj() { return this.webkitSupportsPresentationMode("picture-in-picture") ? (this.webkitSetPresentationMode("picture-in-picture"), document.pictureInPictureElement = this, Promise.resolve()) : Promise.reject(Error("PiP not allowed by video element")); }
        function Rj() { var b = document.pictureInPictureElement; return b ? (b.webkitSetPresentationMode("inline"), document.pictureInPictureElement = null, Promise.resolve()) : Promise.reject(Error("No picture in picture element found")); }
        Qi(function () { if (window.HTMLVideoElement) {
            var b = HTMLVideoElement.prototype;
            b.requestPictureInPicture && document.exitPictureInPicture || !b.webkitSupportsPresentationMode || (document.pictureInPictureEnabled = !0, document.pictureInPictureElement = null, b.requestPictureInPicture = Qj, document.exitPictureInPicture = Rj, document.addEventListener("webkitpresentationmodechanged", Pj, !0));
        } });
        Qi(function () { if (window.HTMLMediaElement) {
            var b = HTMLMediaElement.prototype.play;
            HTMLMediaElement.prototype.play = function () { var c = b.apply(this); c && c["catch"](function () { }); return c; };
        } });
        function Sj() { return { droppedVideoFrames: this.webkitDroppedFrameCount, totalVideoFrames: this.webkitDecodedFrameCount, corruptedVideoFrames: 0, creationTime: NaN, totalFrameDelay: 0 }; }
        Qi(function () { if (window.HTMLVideoElement) {
            var b = HTMLVideoElement.prototype;
            !b.getVideoPlaybackQuality && "webkitDroppedFrameCount" in b && (b.getVideoPlaybackQuality = Sj);
        } });
        function Tj(b, c, d) { return new window.TextTrackCue(b, c, d); }
        function Uj(b, c, d) { return new window.TextTrackCue(b + "-" + c + "-" + d, b, c, d); }
        Qi(function () { if (!window.VTTCue && window.TextTrackCue) {
            var b = TextTrackCue.length;
            if (3 == b)
                window.VTTCue = Tj;
            else if (6 == b)
                window.VTTCue = Uj;
            else {
                try {
                    var c = !!Tj(1, 2, "");
                }
                catch (d) {
                    c = !1;
                }
                c && (window.VTTCue = Tj);
            }
        } });
        function Vj(b, c, d) { return b.hasAttributeNS(c, d) ? b.getAttributeNS(c, d) : null; }
        ;
        function Wj() { }
        Wj.prototype.parseInit = function () { };
        Wj.prototype.parseMedia = function (b, c) {
            var d = ec(b), e = [], f = new DOMParser, g = null;
            try {
                g = f.parseFromString(d, "text/xml");
            }
            catch (R) {
                throw new F(2, 2, 2005);
            }
            if (g) {
                if (g = g.getElementsByTagName("tt")[0]) {
                    var h = Vj(g, "http://www.w3.org/ns/ttml#parameter", "frameRate");
                    var k = Vj(g, "http://www.w3.org/ns/ttml#parameter", "subFrameRate");
                    var l = Vj(g, "http://www.w3.org/ns/ttml#parameter", "frameRateMultiplier");
                    var m = Vj(g, "http://www.w3.org/ns/ttml#parameter", "tickRate");
                    d = g.getAttribute("xml:space") || "default";
                    f = g.getAttribute("tts:extent");
                }
                else
                    throw new F(2, 2, 2005);
                if ("default" != d && "preserve" != d)
                    throw new F(2, 2, 2005);
                d = "default" == d;
                h = new Xj(h, k, l, m);
                k = Yj(g.getElementsByTagName("metadata")[0]);
                l = Yj(g.getElementsByTagName("styling")[0]);
                m = Yj(g.getElementsByTagName("layout")[0]);
                for (var p = [], q = 0; q < m.length; q++) {
                    var v = m[q], w = l, B = f;
                    var z = new jd;
                    var C = v.getAttribute("xml:id");
                    if (C) {
                        z.id = C;
                        C = null;
                        B && (C = Zj.exec(B) || ak.exec(B));
                        B = C ? Number(C[1]) : null;
                        C = C ? Number(C[2]) : null;
                        var A, V;
                        if (A = bk(v, w, "extent"))
                            A = (V = Zj.exec(A)) || ak.exec(A), null != A && (z.width = null != B ? 100 *
                                Number(A[1]) / B : Number(A[1]), z.height = null != C ? 100 * Number(A[2]) / C : Number(A[2]), z.widthUnits = V || null != B ? wd : 0, z.heightUnits = V || null != C ? wd : 0);
                        if (v = bk(v, w, "origin"))
                            A = (V = Zj.exec(v)) || ak.exec(v), null != A && (z.viewportAnchorX = null != C ? 100 * Number(A[1]) / C : Number(A[1]), z.viewportAnchorY = null != B ? 100 * Number(A[2]) / B : Number(A[2]), z.viewportAnchorUnits = V || null != B ? wd : 0);
                    }
                    else
                        z = null;
                    z && p.push(z);
                }
                f = Yj(g.getElementsByTagName("body")[0]);
                for (g = 0; g < f.length; g++)
                    (q = ck(f[g], c.periodStart, h, k, l, m, p, d)) && e.push(q);
            }
            return e;
        };
        var Zj = /^(\d{1,2}|100)% (\d{1,2}|100)%$/, dk = /^(\d+px|\d+em)$/, ak = /^(\d+)px (\d+)px$/, ek = /^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/, fk = /^(?:(\d{2,}):)?(\d{2}):(\d{2})$/, gk = /^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/, hk = /^(\d*(?:\.\d*)?)f$/, ik = /^(\d*(?:\.\d*)?)t$/, jk = /^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/, kk = { left: od, center: "center", right: "end", start: od, end: "end" }, lk = { left: "line-left", center: "center", right: "line-right" };
        function Yj(b) { var c = []; if (!b)
            return c; for (var d = b.childNodes, e = 0; e < d.length; e++) {
            var f = "span" == d[e].nodeName && "p" == b.nodeName;
            d[e].nodeType != Node.ELEMENT_NODE || "br" == d[e].nodeName || f || (f = Yj(d[e]), c = c.concat(f));
        } c.length || c.push(b); return c; }
        function mk(b, c) { for (var d = b.childNodes, e = 0; e < d.length; e++)
            if ("br" == d[e].nodeName && 0 < e)
                d[e - 1].textContent += "\n";
            else if (0 < d[e].childNodes.length)
                mk(d[e], c);
            else if (c) {
                var f = d[e].textContent.trim();
                f = f.replace(/\s+/g, " ");
                d[e].textContent = f;
            } }
        function ck(b, c, d, e, f, g, h, k) {
            if (!b.hasAttribute("begin") && !b.hasAttribute("end") && /^\s*$/.test(b.textContent))
                return null;
            mk(b, k);
            k = nk(b.getAttribute("begin"), d);
            var l = nk(b.getAttribute("end"), d);
            d = nk(b.getAttribute("dur"), d);
            var m = b.textContent;
            null == l && null != d && (l = k + d);
            if (null == k || null == l)
                throw new F(2, 2, 2001);
            c = new hd(k + c, l + c, m);
            if ((g = ok(b, "region", g, "")) && g.getAttribute("xml:id")) {
                var p = g.getAttribute("xml:id");
                h = h.filter(function (b) { return b.id == p; });
                c.region = h[0];
            }
            e = ok(b, "smpte:backgroundImage", e, "#");
            pk(c, b, g, e, f);
            return c;
        }
        function pk(b, c, d, e, f) {
            "rtl" == qk(c, d, f, "direction") && (b.direction = "rtl");
            var g = qk(c, d, f, "writingMode");
            "tb" == g || "tblr" == g ? b.writingMode = "vertical-lr" : "tbrl" == g ? b.writingMode = "vertical-rl" : "rltb" == g || "rl" == g ? b.direction = "rtl" : g && (b.direction = id);
            if (g = qk(c, d, f, "textAlign"))
                b.positionAlign = lk[g], b.lineAlign = kk[g], b.textAlign = sd[g.toUpperCase()];
            if (g = qk(c, d, f, "displayAlign"))
                b.displayAlign = td[g.toUpperCase()];
            if (g = qk(c, d, f, "color"))
                b.color = g;
            if (g = qk(c, d, f, "backgroundColor"))
                b.backgroundColor = g;
            if (g = qk(c, d, f, "fontFamily"))
                b.fontFamily = g;
            (g = qk(c, d, f, "fontWeight")) && "bold" == g && (b.fontWeight = 700);
            (g = qk(c, d, f, "wrapOption")) && "noWrap" == g && (b.wrapLine = !1);
            (g = qk(c, d, f, "lineHeight")) && g.match(dk) && (b.lineHeight = g);
            (g = qk(c, d, f, "fontSize")) && g.match(dk) && (b.fontSize = g);
            if (g = qk(c, d, f, "fontStyle"))
                b.fontStyle = vd[g.toUpperCase()];
            if (e) {
                g = e.getAttribute("imagetype");
                var h = e.getAttribute("encoding");
                e = e.textContent;
                "PNG" == g && "Base64" == h && e && (b.backgroundImage = "data:image/png;base64," + e);
            }
            (d = bk(d, f, "textDecoration")) &&
                rk(b, d);
            (c = sk(c, f, "textDecoration")) && rk(b, c);
        }
        function rk(b, c) {
            for (var d = c.split(" "), e = 0; e < d.length; e++)
                switch (d[e]) {
                    case "underline":
                        b.textDecoration.includes("underline") || b.textDecoration.push("underline");
                        break;
                    case "noUnderline":
                        b.textDecoration.includes("underline") && yb(b.textDecoration, "underline");
                        break;
                    case "lineThrough":
                        b.textDecoration.includes("lineThrough") || b.textDecoration.push("lineThrough");
                        break;
                    case "noLineThrough":
                        b.textDecoration.includes("lineThrough") && yb(b.textDecoration, "lineThrough");
                        break;
                    case "overline":
                        b.textDecoration.includes("overline") ||
                            b.textDecoration.push("overline");
                        break;
                    case "noOverline": b.textDecoration.includes("overline") && yb(b.textDecoration, "overline");
                }
        }
        function qk(b, c, d, e) { return (b = sk(b, d, e)) ? b : bk(c, d, e); }
        function bk(b, c, d) { for (var e = Yj(b), f = 0; f < e.length; f++) {
            var g = Vj(e[f], "http://www.w3.org/ns/ttml#styling", d);
            if (g)
                return g;
        } return (b = ok(b, "style", c, "")) ? Vj(b, "http://www.w3.org/ns/ttml#styling", d) : null; }
        function sk(b, c, d) { return (b = ok(b, "style", c, "")) ? Vj(b, "http://www.w3.org/ns/ttml#styling", d) : null; }
        function ok(b, c, d, e) { if (!b || 1 > d.length)
            return null; var f = null, g = b; for (b = null; g && !(b = g.getAttribute(c)) && (g = g.parentNode, g instanceof Element);)
            ; if (c = b)
            for (b = 0; b < d.length; b++)
                if (e + d[b].getAttribute("xml:id") == c) {
                    f = d[b];
                    break;
                } return f; }
        function nk(b, c) { var d = null; if (ek.test(b)) {
            d = ek.exec(b);
            var e = Number(d[1]), f = Number(d[2]), g = Number(d[3]), h = Number(d[4]);
            h += (Number(d[5]) || 0) / c.b;
            g += h / c.frameRate;
            d = g + 60 * f + 3600 * e;
        }
        else
            fk.test(b) ? d = tk(fk, b) : gk.test(b) ? d = tk(gk, b) : hk.test(b) ? (d = hk.exec(b), d = Number(d[1]) / c.frameRate) : ik.test(b) ? (d = ik.exec(b), d = Number(d[1]) / c.a) : jk.test(b) && (d = tk(jk, b)); return d; }
        function tk(b, c) { var d = b.exec(c); return null == d || "" == d[0] ? null : (Number(d[4]) || 0) / 1E3 + (Number(d[3]) || 0) + 60 * (Number(d[2]) || 0) + 3600 * (Number(d[1]) || 0); }
        function Xj(b, c, d, e) { this.frameRate = Number(b) || 30; this.b = Number(c) || 1; this.a = Number(e); 0 == this.a && (this.a = b ? this.frameRate * this.b : 1); d && (b = /^(\d+) (\d+)$/g.exec(d)) && (this.frameRate *= Number(b[1]) / Number(b[2])); }
        zd["application/ttml+xml"] = Wj;
        function uk() { this.a = new Wj; }
        uk.prototype.parseInit = function (b) { var c = !1; (new T).A("moov", U).A("trak", U).A("mdia", U).A("minf", U).A("stbl", U).X("stsd", Pe).A("stpp", function (b) { c = !0; b.parser.stop(); }).parse(b); if (!c)
            throw new F(2, 2, 2007); };
        uk.prototype.parseMedia = function (b, c) { var d = !1, e = []; (new T).A("mdat", Qe(function (b) { d = !0; e = e.concat(this.a.parseMedia(b, c)); }.bind(this))).parse(b); if (!d)
            throw new F(2, 2, 2007); return e; };
        zd['application/mp4; codecs="stpp"'] = uk;
        zd['application/mp4; codecs="stpp.TTML.im1t"'] = uk;
        function vk() { }
        vk.prototype.parseInit = function () { };
        vk.prototype.parseMedia = function (b, c) {
            var d = ec(b);
            d = d.replace(/\r\n|\r(?=[^\n]|$)/gm, "\n");
            d = d.split(/\n{2,}/m);
            if (!/^WEBVTT($|[ \t\n])/m.test(d[0]))
                throw new F(2, 2, 2E3);
            var e = c.segmentStart;
            if (null == e && (e = 0, d[0].includes("X-TIMESTAMP-MAP"))) {
                var f = d[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m), g = d[0].match(/MPEGTS:(\d+)/m);
                if (f && g) {
                    e = wk(new Ae(f[1]));
                    if (null == e)
                        throw new F(2, 2, 2E3);
                    e = c.periodStart + (Number(g[1]) / 9E4 - e);
                }
            }
            g = [];
            var h = d[0].split("\n");
            for (f = 1; f < h.length; f++)
                if (/^Region:/.test(h[f])) {
                    var k = new Ae(h[f]), l = new jd;
                    De(k);
                    Be(k);
                    for (var m = De(k); m;) {
                        var p = l, q = m;
                        (m = /^id=(.*)$/.exec(q)) ? p.id = m[1] : (m = /^width=(\d{1,2}|100)%$/.exec(q)) ? p.width = Number(m[1]) : (m = /^lines=(\d+)$/.exec(q)) ? (p.height = Number(m[1]), p.heightUnits = 2) : (m = /^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(q)) ? (p.regionAnchorX = Number(m[1]), p.regionAnchorY = Number(m[2])) : (m = /^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(q)) ? (p.viewportAnchorX = Number(m[1]), p.viewportAnchorY = Number(m[2])) : /^scroll=up$/.exec(q) && (p.scroll =
                            "up");
                        Be(k);
                        m = De(k);
                    }
                    g.push(l);
                }
            f = [];
            for (k = 1; k < d.length; k++) {
                h = d[k].split("\n");
                m = h;
                q = e;
                h = g;
                if (1 == m.length && !m[0] || /^NOTE($|[ \t])/.test(m[0]) || "STYLE" == m[0])
                    h = null;
                else {
                    l = null;
                    m[0].includes("--\x3e") || (l = m[0], m.splice(0, 1));
                    p = new Ae(m[0]);
                    var v = wk(p), w = Ce(p, /[ \t]+--\x3e[ \t]+/g), B = wk(p);
                    if (null == v || null == w || null == B)
                        throw new F(2, 2, 2001);
                    m = new hd(v + q, B + q, m.slice(1).join("\n").trim());
                    Be(p);
                    for (q = De(p); q;)
                        xk(m, q, h), Be(p), q = De(p);
                    null != l && (m.id = l);
                    h = m;
                }
                h && f.push(h);
            }
            return f;
        };
        function xk(b, c, d) {
            var e;
            if (e = /^align:(start|middle|center|end|left|right)$/.exec(c))
                c = e[1], "middle" == c ? b.textAlign = ld : b.textAlign = sd[c.toUpperCase()];
            else if (e = /^vertical:(lr|rl)$/.exec(c))
                b.writingMode = "lr" == e[1] ? "vertical-lr" : "vertical-rl";
            else if (e = /^size:([\d.]+)%$/.exec(c))
                b.size = Number(e[1]);
            else if (e = /^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(c))
                b.position = Number(e[1]), e[2] && (c = e[2], b.positionAlign = "line-left" == c || "start" == c ? "line-left" : "line-right" == c || "end" ==
                    c ? "line-right" : "center");
            else if (e = /^region:(.*)$/.exec(c)) {
                if (c = yk(d, e[1]))
                    b.region = c;
            }
            else if (d = /^line:([\d.]+)%(?:,(start|end|center))?$/.exec(c))
                b.lineInterpretation = 1, b.line = Number(d[1]), d[2] && (b.lineAlign = ud[d[2].toUpperCase()]);
            else if (d = /^line:(-?\d+)(?:,(start|end|center))?$/.exec(c))
                b.lineInterpretation = nd, b.line = Number(d[1]), d[2] && (b.lineAlign = ud[d[2].toUpperCase()]);
        }
        function yk(b, c) { var d = b.filter(function (b) { return b.id == c; }); return d.length ? d[0] : null; }
        function wk(b) { b = Ce(b, /(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g); if (null == b)
            return null; var c = Number(b[2]), d = Number(b[3]); return 59 < c || 59 < d ? null : Number(b[4]) / 1E3 + d + 60 * c + 3600 * (Number(b[1]) || 0); }
        zd["text/vtt"] = vk;
        zd['text/vtt; codecs="vtt"'] = vk;
        function zk() { this.a = null; }
        zk.prototype.parseInit = function (b) { var c = !1; (new T).A("moov", U).A("trak", U).A("mdia", U).X("mdhd", function (b) { 0 == b.version ? (b.reader.I(4), b.reader.I(4), this.a = b.reader.D(), b.reader.I(4)) : (b.reader.I(8), b.reader.I(8), this.a = b.reader.D(), b.reader.I(8)); b.reader.I(4); }.bind(this)).A("minf", U).A("stbl", U).X("stsd", Pe).A("wvtt", function () { c = !0; }).parse(b); if (!this.a)
            throw new F(2, 2, 2008); if (!c)
            throw new F(2, 2, 2008); };
        zk.prototype.parseMedia = function (b, c) {
            var d = this;
            if (!this.a)
                throw new F(2, 2, 2008);
            var e = 0, f = [], g, h = [], k = !1, l = !1, m = !1, p = null;
            (new T).A("moof", U).A("traf", U).X("tfdt", function (b) { k = !0; e = 0 == b.version ? b.reader.D() : b.reader.Ab(); }).X("tfhd", function (b) { var c = b.flags; b = b.reader; b.I(4); c & 1 && b.I(8); c & 2 && b.I(4); p = c & 8 ? b.D() : null; }).X("trun", function (b) {
                l = !0;
                var c = b.version, d = b.flags;
                b = b.reader;
                var e = b.D();
                d & 1 && b.I(4);
                d & 4 && b.I(4);
                for (var g = [], h = 0; h < e; h++) {
                    var k = { duration: null, sampleSize: null, jc: null };
                    d & 256 && (k.duration =
                        b.D());
                    d & 512 && (k.sampleSize = b.D());
                    d & 1024 && b.I(4);
                    d & 2048 && (k.jc = 0 == c ? b.D() : b.Fc());
                    g.push(k);
                }
                f = g;
            }).A("mdat", Qe(function (b) { m = !0; g = b; })).parse(b);
            if (!m && !k && !l)
                throw new F(2, 2, 2008);
            var q = e, v = new DataView(g.buffer, g.byteOffset, g.byteLength), w = new S(v, 0);
            f.forEach(function (b) { var f = b.duration || p, g = b.jc ? e + b.jc : q; q = g + (f || 0); var k = 0; do {
                var l = w.D();
                k += l;
                var m = w.D(), v = null;
                "vttc" == Re(m) ? 8 < l && (v = w.Da(l - 8)) : w.I(l - 8);
                f && v && h.push(Ak(v, c.periodStart + g / d.a, c.periodStart + q / d.a));
            } while (b.sampleSize && k < b.sampleSize); });
            return h.filter($c.zd);
        };
        function Ak(b, c, d) { var e, f, g; (new T).A("payl", Qe(function (b) { e = ec(b); })).A("iden", Qe(function (b) { f = ec(b); })).A("sttg", Qe(function (b) { g = ec(b); })).parse(b); return e ? Bk(e, f, g, c, d) : null; }
        function Bk(b, c, d, e, f) { b = new hd(e, f, b); c && (b.id = c); if (d)
            for (c = new Ae(d), d = De(c); d;)
                xk(b, d, []), Be(c), d = De(c); return b; }
        zd['application/mp4; codecs="wvtt"'] = zk;
        D("shaka.util.Dom.createHTMLElement", function (b) { return document.createElement(b); });
        D("shaka.util.Dom.createVideoElement", function () { var b = document.createElement("video"); b.muted = !0; b.width = 600; b.height = 400; return b; });
        D("shaka.util.Dom.asHTMLElement", function (b) { return b; });
        D("shaka.util.Dom.asHTMLMediaElement", function (b) { return b; });
        D("shaka.util.Dom.removeAllChildren", function (b) { for (; b.firstChild;)
            b.removeChild(b.firstChild); });
    }).call(exportTo, innerGlobal, innerGlobal);
    if (typeof exports != "undefined")
        for (var k in exportTo.shaka)
            exports[k] = exportTo.shaka[k];
    else if (typeof define != "undefined" && define.amd)
        define(function () { return exportTo.shaka; });
    else
        innerGlobal.shaka = exportTo.shaka;
})();
//# sourceMappingURL=shaka-player.compiled.js.map