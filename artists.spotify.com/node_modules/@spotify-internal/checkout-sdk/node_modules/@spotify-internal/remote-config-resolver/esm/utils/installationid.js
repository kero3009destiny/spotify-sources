import { v4 as uuid } from 'uuid';
import { INSTALLATION_ID_COOKIE_KEY, INSTALLATION_ID_STORAGE_KEY, } from '../constants';
import { getCookie } from './system';
export function defaultInstallationId(storage) {
    return getFromStorage(storage) || getCookie(INSTALLATION_ID_COOKIE_KEY) || '';
}
export function isValidInstallationId(id) {
    return typeof id === 'string' && id.length > 5;
}
export function createInstallationId() {
    return getCookie(INSTALLATION_ID_COOKIE_KEY) || uuid();
}
function getFromStorage(storage) {
    if (!storage)
        return undefined;
    var installationId = storage.getItem(INSTALLATION_ID_STORAGE_KEY);
    if (!installationId) {
        installationId = createInstallationId();
        storage.setItem(INSTALLATION_ID_STORAGE_KEY, installationId);
    }
    return installationId;
}
//# sourceMappingURL=installationid.js.map